{"version":3,"sources":["external-libraries/dropzonejs/dropzone.js"],"names":["Dropzone","Emitter","ExifRestore","camelize","contentLoaded","detectVerticalSquash","drawImageIOSFix","noop","without","slice","extend1","child","parent","key","hasProp","call","ctor","constructor","prototype","__super__","hasOwnProperty","addEventListener","on","event","fn","_callbacks","push","emit","args","callback","callbacks","j","len","arguments","length","apply","removeListener","off","removeAllListeners","removeEventListener","i","splice","superClass","extend","resolveOption","events","defaultOptions","url","method","withCredentials","timeout","parallelUploads","uploadMultiple","maxFilesize","paramName","createImageThumbnails","maxThumbnailFilesize","thumbnailWidth","thumbnailHeight","thumbnailMethod","resizeWidth","resizeHeight","resizeMimeType","resizeQuality","resizeMethod","filesizeBase","maxFiles","params","headers","clickable","ignoreHiddenFiles","acceptedFiles","acceptedMimeTypes","autoProcessQueue","autoQueue","addRemoveLinks","previewsContainer","hiddenInputContainer","capture","renameFilename","forceFallback","dictDefaultMessage","dictFallbackMessage","dictFallbackText","dictFileTooBig","dictInvalidFileType","dictResponseError","dictCancelUpload","dictCancelUploadConfirmation","dictRemoveFile","dictRemoveFileConfirmation","dictMaxFilesExceeded","init","accept","file","done","fallback","messageElement","ref","span","element","className","getElementsByTagName","test","createElement","appendChild","textContent","options","innerText","getFallbackForm","resize","width","height","info","srcRatio","trgRatio","srcX","srcY","srcWidth","srcHeight","Math","min","Error","trgWidth","trgHeight","transformFile","type","match","resizeImage","previewTemplate","drop","e","classList","remove","dragstart","dragend","dragenter","add","dragover","dragleave","paste","reset","addedfile","k","l","len1","len2","node","ref1","ref2","removeFileEvent","removeLink","results","previewElement","trim","querySelectorAll","_renameFilename","name","innerHTML","filesize","size","_removeLink","_this","preventDefault","stopPropagation","status","UPLOADING","confirm","removeFile","removedfile","parentNode","removeChild","_updateMaxFilesReachedClass","thumbnail","dataUrl","thumbnailElement","alt","src","setTimeout","error","message","errormultiple","processing","processingmultiple","uploadprogress","progress","bytesSent","nodeName","value","style","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","maxfilesexceeded","maxfilesreached","queuecomplete","addedfiles","object","objects","target","val","element1","elementOptions","version","replace","clickableElements","listeners","files","document","querySelector","nodeType","dropzone","instances","optionsForElement","isBrowserSupported","getAttribute","toUpperCase","getExistingFallback","getElement","getElements","getAcceptedFiles","accepted","getRejectedFiles","getFilesWithStatus","getQueuedFiles","QUEUED","getUploadingFiles","getAddedFiles","ADDED","getActiveFiles","eventName","noPropagation","setupHiddenFileInput","tagName","setAttribute","contains","hiddenFileInput","visibility","position","top","left","addFile","URL","window","webkitURL","updateTotalUploadProgress","returnValue","efct","dataTransfer","effectAllowed","undefined","dropEffect","forEach","clickableElement","evt","elementInside","click","enable","destroy","disable","removeAllFiles","indexOf","activeFiles","totalBytes","totalBytesSent","totalUploadProgress","upload","total","_getParamName","n","existingFallback","fields","fieldsString","form","getFallback","elements","el","setupEventListeners","elementListeners","listener","results1","removeEventListeners","cancelUpload","cutoff","selectedSize","selectedUnit","unit","units","pow","round","items","webkitGetAsEntry","_addFilesFromItems","handleFiles","clipboardData","entry","item","isFile","getAsFile","isDirectory","_addFilesFromDirectory","kind","directory","path","dirReader","errorHandler","readEntries","createReader","console","log","entries","substring","fullPath","isValidFile","_enqueueThumbnail","_errorProcessing","enqueueFile","enqueueFiles","processQueue","_thumbnailQueue","_processingThumbnail","_processThumbnailQueue","shift","createThumbnail","cancelIfNecessary","canvas","resizedDataURL","toDataURL","restore","dataURL","dataURItoBlob","fixOrientation","fileReader","FileReader","onload","result","createThumbnailFromUrl","readAsDataURL","crossOrigin","img","loadExif","EXIF","getData","getTag","orientation","ctx","ref3","resizeInfo","getContext","translate","scale","rotate","PI","trgX","trgY","onerror","processingLength","queuedFiles","processFiles","processFile","uploadFiles","_getFilesWithXhr","xhr","groupedFile","groupedFiles","CANCELED","abort","option","uploadFile","doneCounter","doneFunction","formData","handleError","headerName","headerValue","input","inputName","inputType","len3","m","o","progressObj","ref4","ref5","response","updateProgress","XMLHttpRequest","open","allFilesFinished","loaded","error1","readyState","responseText","getResponseHeader","JSON","parse","_finished","onprogress","setRequestHeader","FormData","append","hasAttribute","selected","toLowerCase","checked","fileName","transformedFile","submitRequest","send","SUCCESS","ERROR","forElement","autoDiscover","discover","checkElements","dropzones","blacklistedBrowsers","capableBrowser","regex","File","FileList","Blob","navigator","userAgent","dataURI","ab","byteString","ia","mimeString","atob","split","ArrayBuffer","Uint8Array","charCodeAt","list","rejectedItem","str","charAt","string","div","childNodes","container","els","Array","question","rejected","baseMimeType","mimeType","validType","jQuery","each","module","exports","ACCEPTED","PROCESSING","alpha","data","ey","ih","iw","py","ratio","sy","naturalWidth","naturalHeight","drawImage","getImageData","sx","sw","sh","dx","dy","dw","dh","vertSquashRatio","KEY_STR","encode64","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","isNaN","origFileBase64","resizedFileBase64","image","rawImage","segments","decode64","slice2Segments","exifManipulation","aBuffer","exifArray","newImageArray","getExifArray","insertExif","seg","x","array","ato","buf","imageData","mae","separatePoint","concat","rawImageArray","endPoint","head","base64test","exec","warning","win","doc","poll","pre","rem","root","documentElement","doScroll","createEventObject","frameElement","_autoDiscoverFunction"],"mappings":";;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,CAAC,YAAW;AACV,MAAIA,QAAJ;AAAA,MAAcC,OAAd;AAAA,MAAuBC,WAAvB;AAAA,MAAoCC,QAApC;AAAA,MAA8CC,aAA9C;AAAA,MAA6DC,oBAA7D;AAAA,MAAmFC,eAAnF;AAAA,MAAoGC,IAApG;AAAA,MAA0GC,OAA1G;AAAA,MACEC,QAAQ,GAAGA,KADb;AAAA,MAEEC,UAAU,SAAVA,OAAU,CAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAE,SAAK,IAAIC,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIE,QAAQC,IAAR,CAAaH,MAAb,EAAqBC,GAArB,CAAJ,EAA+BF,MAAME,GAAN,IAAaD,OAAOC,GAAP,CAAb;AAA2B,KAAC,SAASG,IAAT,GAAgB;AAAE,WAAKC,WAAL,GAAmBN,KAAnB;AAA2B,KAACK,KAAKE,SAAL,GAAiBN,OAAOM,SAAxB,CAAmCP,MAAMO,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA8BL,MAAMQ,SAAN,GAAkBP,OAAOM,SAAzB,CAAoC,OAAOP,KAAP;AAAe,GAF7R;AAAA,MAGEG,UAAU,GAAGM,cAHf;;AAKAb,SAAO,gBAAW,CAAE,CAApB;;AAEAN,YAAW,YAAW;AACpB,aAASA,OAAT,GAAmB,CAAE;;AAErBA,YAAQiB,SAAR,CAAkBG,gBAAlB,GAAqCpB,QAAQiB,SAAR,CAAkBI,EAAvD;;AAEArB,YAAQiB,SAAR,CAAkBI,EAAlB,GAAuB,UAASC,KAAT,EAAgBC,EAAhB,EAAoB;AACzC,WAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;AACA,UAAI,CAAC,KAAKA,UAAL,CAAgBF,KAAhB,CAAL,EAA6B;AAC3B,aAAKE,UAAL,CAAgBF,KAAhB,IAAyB,EAAzB;AACD;AACD,WAAKE,UAAL,CAAgBF,KAAhB,EAAuBG,IAAvB,CAA4BF,EAA5B;AACA,aAAO,IAAP;AACD,KAPD;;AASAvB,YAAQiB,SAAR,CAAkBS,IAAlB,GAAyB,YAAW;AAClC,UAAIC,IAAJ,EAAUC,QAAV,EAAoBC,SAApB,EAA+BP,KAA/B,EAAsCQ,CAAtC,EAAyCC,GAAzC;AACAT,cAAQU,UAAU,CAAV,CAAR,EAAsBL,OAAO,KAAKK,UAAUC,MAAf,GAAwBzB,MAAMM,IAAN,CAAWkB,SAAX,EAAsB,CAAtB,CAAxB,GAAmD,EAAhF;AACA,WAAKR,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;AACAK,kBAAY,KAAKL,UAAL,CAAgBF,KAAhB,CAAZ;AACA,UAAIO,SAAJ,EAAe;AACb,aAAKC,IAAI,CAAJ,EAAOC,MAAMF,UAAUI,MAA5B,EAAoCH,IAAIC,GAAxC,EAA6CD,GAA7C,EAAkD;AAChDF,qBAAWC,UAAUC,CAAV,CAAX;AACAF,mBAASM,KAAT,CAAe,IAAf,EAAqBP,IAArB;AACD;AACF;AACD,aAAO,IAAP;AACD,KAZD;;AAcA3B,YAAQiB,SAAR,CAAkBkB,cAAlB,GAAmCnC,QAAQiB,SAAR,CAAkBmB,GAArD;;AAEApC,YAAQiB,SAAR,CAAkBoB,kBAAlB,GAAuCrC,QAAQiB,SAAR,CAAkBmB,GAAzD;;AAEApC,YAAQiB,SAAR,CAAkBqB,mBAAlB,GAAwCtC,QAAQiB,SAAR,CAAkBmB,GAA1D;;AAEApC,YAAQiB,SAAR,CAAkBmB,GAAlB,GAAwB,UAASd,KAAT,EAAgBC,EAAhB,EAAoB;AAC1C,UAAIK,QAAJ,EAAcC,SAAd,EAAyBU,CAAzB,EAA4BT,CAA5B,EAA+BC,GAA/B;AACA,UAAI,CAAC,KAAKP,UAAN,IAAoBQ,UAAUC,MAAV,KAAqB,CAA7C,EAAgD;AAC9C,aAAKT,UAAL,GAAkB,EAAlB;AACA,eAAO,IAAP;AACD;AACDK,kBAAY,KAAKL,UAAL,CAAgBF,KAAhB,CAAZ;AACA,UAAI,CAACO,SAAL,EAAgB;AACd,eAAO,IAAP;AACD;AACD,UAAIG,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,eAAO,KAAKT,UAAL,CAAgBF,KAAhB,CAAP;AACA,eAAO,IAAP;AACD;AACD,WAAKiB,IAAIT,IAAI,CAAR,EAAWC,MAAMF,UAAUI,MAAhC,EAAwCH,IAAIC,GAA5C,EAAiDQ,IAAI,EAAET,CAAvD,EAA0D;AACxDF,mBAAWC,UAAUU,CAAV,CAAX;AACA,YAAIX,aAAaL,EAAjB,EAAqB;AACnBM,oBAAUW,MAAV,CAAiBD,CAAjB,EAAoB,CAApB;AACA;AACD;AACF;AACD,aAAO,IAAP;AACD,KAtBD;;AAwBA,WAAOvC,OAAP;AAED,GA5DS,EAAV;;AA8DAD,aAAY,UAAS0C,UAAT,EAAqB;AAC/B,QAAIC,MAAJ,EAAYC,aAAZ;;AAEAlC,YAAQV,QAAR,EAAkB0C,UAAlB;;AAEA1C,aAASkB,SAAT,CAAmBjB,OAAnB,GAA6BA,OAA7B;;AAGA;;;;;;;;AAQAD,aAASkB,SAAT,CAAmB2B,MAAnB,GAA4B,CAAC,MAAD,EAAS,WAAT,EAAsB,SAAtB,EAAiC,WAAjC,EAA8C,UAA9C,EAA0D,WAA1D,EAAuE,WAAvE,EAAoF,YAApF,EAAkG,aAAlG,EAAiH,WAAjH,EAA8H,OAA9H,EAAuI,eAAvI,EAAwJ,YAAxJ,EAAsK,oBAAtK,EAA4L,gBAA5L,EAA8M,qBAA9M,EAAqO,SAArO,EAAgP,iBAAhP,EAAmQ,SAAnQ,EAA8Q,iBAA9Q,EAAiS,UAAjS,EAA6S,kBAA7S,EAAiU,UAAjU,EAA6U,kBAA7U,EAAiW,OAAjW,EAA0W,kBAA1W,EAA8X,iBAA9X,EAAiZ,eAAjZ,CAA5B;;AAEA7C,aAASkB,SAAT,CAAmB4B,cAAnB,GAAoC;AAClCC,WAAK,IAD6B;AAElCC,cAAQ,MAF0B;AAGlCC,uBAAiB,KAHiB;AAIlCC,eAAS,KAJyB;AAKlCC,uBAAiB,CALiB;AAMlCC,sBAAgB,KANkB;AAOlCC,mBAAa,GAPqB;AAQlCC,iBAAW,MARuB;AASlCC,6BAAuB,IATW;AAUlCC,4BAAsB,EAVY;AAWlCC,sBAAgB,GAXkB;AAYlCC,uBAAiB,GAZiB;AAalCC,uBAAiB,MAbiB;AAclCC,mBAAa,IAdqB;AAelCC,oBAAc,IAfoB;AAgBlCC,sBAAgB,IAhBkB;AAiBlCC,qBAAe,GAjBmB;AAkBlCC,oBAAc,SAlBoB;AAmBlCC,oBAAc,IAnBoB;AAoBlCC,gBAAU,IApBwB;AAqBlCC,cAAQ,EArB0B;AAsBlCC,eAAS,IAtByB;AAuBlCC,iBAAW,IAvBuB;AAwBlCC,yBAAmB,IAxBe;AAyBlCC,qBAAe,IAzBmB;AA0BlCC,yBAAmB,IA1Be;AA2BlCC,wBAAkB,IA3BgB;AA4BlCC,iBAAW,IA5BuB;AA6BlCC,sBAAgB,KA7BkB;AA8BlCC,yBAAmB,IA9Be;AA+BlCC,4BAAsB,MA/BY;AAgClCC,eAAS,IAhCyB;AAiClCC,sBAAgB,IAjCkB;AAkClCC,qBAAe,KAlCmB;AAmClCC,0BAAoB,2BAnCc;AAoClCC,2BAAqB,yDApCa;AAqClCC,wBAAkB,iFArCgB;AAsClCC,sBAAgB,sEAtCkB;AAuClCC,2BAAqB,sCAvCa;AAwClCC,yBAAmB,4CAxCe;AAyClCC,wBAAkB,eAzCgB;AA0ClCC,oCAA8B,8CA1CI;AA2ClCC,sBAAgB,aA3CkB;AA4ClCC,kCAA4B,IA5CM;AA6ClCC,4BAAsB,oCA7CY;AA8ClCC,YAAM,gBAAW;AACf,eAAOrF,IAAP;AACD,OAhDiC;AAiDlCsF,cAAQ,gBAASC,IAAT,EAAeC,IAAf,EAAqB;AAC3B,eAAOA,MAAP;AACD,OAnDiC;AAoDlCC,gBAAU,oBAAW;AACnB,YAAIrF,KAAJ,EAAWoB,CAAX,EAAcC,GAAd,EAAmBiE,cAAnB,EAAmCC,GAAnC,EAAwCC,IAAxC;AACA,aAAKC,OAAL,CAAaC,SAAb,GAAyB,KAAKD,OAAL,CAAaC,SAAb,GAAyB,2BAAlD;AACAH,cAAM,KAAKE,OAAL,CAAaE,oBAAb,CAAkC,KAAlC,CAAN;AACA,aAAKvE,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1CpB,kBAAQuF,IAAInE,CAAJ,CAAR;AACA,cAAI,uBAAuBwE,IAAvB,CAA4B5F,MAAM0F,SAAlC,CAAJ,EAAkD;AAChDJ,6BAAiBtF,KAAjB;AACAA,kBAAM0F,SAAN,GAAkB,YAAlB;AACA;AACD;AACF;AACD,YAAI,CAACJ,cAAL,EAAqB;AACnBA,2BAAiBjG,SAASwG,aAAT,CAAuB,+CAAvB,CAAjB;AACA,eAAKJ,OAAL,CAAaK,WAAb,CAAyBR,cAAzB;AACD;AACDE,eAAOF,eAAeK,oBAAf,CAAoC,MAApC,EAA4C,CAA5C,CAAP;AACA,YAAIH,IAAJ,EAAU;AACR,cAAIA,KAAKO,WAAL,IAAoB,IAAxB,EAA8B;AAC5BP,iBAAKO,WAAL,GAAmB,KAAKC,OAAL,CAAazB,mBAAhC;AACD,WAFD,MAEO,IAAIiB,KAAKS,SAAL,IAAkB,IAAtB,EAA4B;AACjCT,iBAAKS,SAAL,GAAiB,KAAKD,OAAL,CAAazB,mBAA9B;AACD;AACF;AACD,eAAO,KAAKkB,OAAL,CAAaK,WAAb,CAAyB,KAAKI,eAAL,EAAzB,CAAP;AACD,OA7EiC;AA8ElCC,cAAQ,gBAAShB,IAAT,EAAeiB,KAAf,EAAsBC,MAAtB,EAA8BhD,YAA9B,EAA4C;AAClD,YAAIiD,IAAJ,EAAUC,QAAV,EAAoBC,QAApB;AACAF,eAAO;AACLG,gBAAM,CADD;AAELC,gBAAM,CAFD;AAGLC,oBAAUxB,KAAKiB,KAHV;AAILQ,qBAAWzB,KAAKkB;AAJX,SAAP;AAMAE,mBAAWpB,KAAKiB,KAAL,GAAajB,KAAKkB,MAA7B;AACA,YAAKD,SAAS,IAAV,IAAoBC,UAAU,IAAlC,EAAyC;AACvCD,kBAAQE,KAAKK,QAAb;AACAN,mBAASC,KAAKM,SAAd;AACD,SAHD,MAGO,IAAIR,SAAS,IAAb,EAAmB;AACxBA,kBAAQC,SAASE,QAAjB;AACD,SAFM,MAEA,IAAIF,UAAU,IAAd,EAAoB;AACzBA,mBAASD,QAAQG,QAAjB;AACD;AACDH,gBAAQS,KAAKC,GAAL,CAASV,KAAT,EAAgBE,KAAKK,QAArB,CAAR;AACAN,iBAASQ,KAAKC,GAAL,CAAST,MAAT,EAAiBC,KAAKM,SAAtB,CAAT;AACAJ,mBAAWJ,QAAQC,MAAnB;AACA,YAAIC,KAAKK,QAAL,GAAgBP,KAAhB,IAAyBE,KAAKM,SAAL,GAAiBP,MAA9C,EAAsD;AACpD,cAAIhD,iBAAiB,MAArB,EAA6B;AAC3B,gBAAIkD,WAAWC,QAAf,EAAyB;AACvBF,mBAAKM,SAAL,GAAiBzB,KAAKkB,MAAtB;AACAC,mBAAKK,QAAL,GAAgBL,KAAKM,SAAL,GAAiBJ,QAAjC;AACD,aAHD,MAGO;AACLF,mBAAKK,QAAL,GAAgBxB,KAAKiB,KAArB;AACAE,mBAAKM,SAAL,GAAiBN,KAAKK,QAAL,GAAgBH,QAAjC;AACD;AACF,WARD,MAQO,IAAInD,iBAAiB,SAArB,EAAgC;AACrC,gBAAIkD,WAAWC,QAAf,EAAyB;AACvBH,uBAASD,QAAQG,QAAjB;AACD,aAFD,MAEO;AACLH,sBAAQC,SAASE,QAAjB;AACD;AACF,WANM,MAMA;AACL,kBAAM,IAAIQ,KAAJ,CAAU,2BAA2B1D,YAA3B,GAA0C,GAApD,CAAN;AACD;AACF;AACDiD,aAAKG,IAAL,GAAY,CAACtB,KAAKiB,KAAL,GAAaE,KAAKK,QAAnB,IAA+B,CAA3C;AACAL,aAAKI,IAAL,GAAY,CAACvB,KAAKkB,MAAL,GAAcC,KAAKM,SAApB,IAAiC,CAA7C;AACAN,aAAKU,QAAL,GAAgBZ,KAAhB;AACAE,aAAKW,SAAL,GAAiBZ,MAAjB;AACA,eAAOC,IAAP;AACD,OA1HiC;AA2HlCY,qBAAe,uBAAS/B,IAAT,EAAeC,IAAf,EAAqB;AAClC,YAAI,CAAC,KAAKY,OAAL,CAAa/C,WAAb,IAA4B,KAAK+C,OAAL,CAAa9C,YAA1C,KAA2DiC,KAAKgC,IAAL,CAAUC,KAAV,CAAgB,SAAhB,CAA/D,EAA2F;AACzF,iBAAO,KAAKC,WAAL,CAAiBlC,IAAjB,EAAuB,KAAKa,OAAL,CAAa/C,WAApC,EAAiD,KAAK+C,OAAL,CAAa9C,YAA9D,EAA4E,KAAK8C,OAAL,CAAa3C,YAAzF,EAAuG+B,IAAvG,CAAP;AACD,SAFD,MAEO;AACL,iBAAOA,KAAKD,IAAL,CAAP;AACD;AACF,OAjIiC;AAkIlCmC,uBAAiB,osGAlIiB;;AAoIlC;;;;;;;;AAQAC,YAAM,cAASC,CAAT,EAAY;AAChB,eAAO,KAAK/B,OAAL,CAAagC,SAAb,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACD,OA9IiC;AA+IlCC,iBAAW/H,IA/IuB;AAgJlCgI,eAAS,iBAASJ,CAAT,EAAY;AACnB,eAAO,KAAK/B,OAAL,CAAagC,SAAb,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACD,OAlJiC;AAmJlCG,iBAAW,mBAASL,CAAT,EAAY;AACrB,eAAO,KAAK/B,OAAL,CAAagC,SAAb,CAAuBK,GAAvB,CAA2B,eAA3B,CAAP;AACD,OArJiC;AAsJlCC,gBAAU,kBAASP,CAAT,EAAY;AACpB,eAAO,KAAK/B,OAAL,CAAagC,SAAb,CAAuBK,GAAvB,CAA2B,eAA3B,CAAP;AACD,OAxJiC;AAyJlCE,iBAAW,mBAASR,CAAT,EAAY;AACrB,eAAO,KAAK/B,OAAL,CAAagC,SAAb,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACD,OA3JiC;AA4JlCO,aAAOrI,IA5J2B;AA6JlCsI,aAAO,iBAAW;AAChB,eAAO,KAAKzC,OAAL,CAAagC,SAAb,CAAuBC,MAAvB,CAA8B,YAA9B,CAAP;AACD,OA/JiC;AAgKlCS,iBAAW,mBAAShD,IAAT,EAAe;AACxB,YAAI/D,CAAJ,EAAOgH,CAAP,EAAUC,CAAV,EAAahH,GAAb,EAAkBiH,IAAlB,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoCjD,GAApC,EAAyCkD,IAAzC,EAA+CC,IAA/C,EAAqDC,eAArD,EAAsEC,UAAtE,EAAkFC,OAAlF;AACA,YAAI,KAAKpD,OAAL,KAAiB,KAAKxB,iBAA1B,EAA6C;AAC3C,eAAKwB,OAAL,CAAagC,SAAb,CAAuBK,GAAvB,CAA2B,YAA3B;AACD;AACD,YAAI,KAAK7D,iBAAT,EAA4B;AAC1BkB,eAAK2D,cAAL,GAAsBzJ,SAASwG,aAAT,CAAuB,KAAKG,OAAL,CAAasB,eAAb,CAA6ByB,IAA7B,EAAvB,CAAtB;AACA5D,eAAKmC,eAAL,GAAuBnC,KAAK2D,cAA5B;AACA,eAAK7E,iBAAL,CAAuB6B,WAAvB,CAAmCX,KAAK2D,cAAxC;AACAvD,gBAAMJ,KAAK2D,cAAL,CAAoBE,gBAApB,CAAqC,gBAArC,CAAN;AACA,eAAK5H,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1CoH,mBAAOjD,IAAInE,CAAJ,CAAP;AACAoH,iBAAKzC,WAAL,GAAmB,KAAKkD,eAAL,CAAqB9D,KAAK+D,IAA1B,EAAgC/D,IAAhC,CAAnB;AACD;AACDsD,iBAAOtD,KAAK2D,cAAL,CAAoBE,gBAApB,CAAqC,gBAArC,CAAP;AACA,eAAKZ,IAAI,CAAJ,EAAOE,OAAOG,KAAKlH,MAAxB,EAAgC6G,IAAIE,IAApC,EAA0CF,GAA1C,EAA+C;AAC7CI,mBAAOC,KAAKL,CAAL,CAAP;AACAI,iBAAKW,SAAL,GAAiB,KAAKC,QAAL,CAAcjE,KAAKkE,IAAnB,CAAjB;AACD;AACD,cAAI,KAAKrD,OAAL,CAAahC,cAAjB,EAAiC;AAC/BmB,iBAAKmE,WAAL,GAAmBjK,SAASwG,aAAT,CAAuB,0EAA0E,KAAKG,OAAL,CAAalB,cAAvF,GAAwG,MAA/H,CAAnB;AACAK,iBAAK2D,cAAL,CAAoBhD,WAApB,CAAgCX,KAAKmE,WAArC;AACD;AACDX,4BAAmB,UAASY,KAAT,EAAgB;AACjC,mBAAO,UAAS/B,CAAT,EAAY;AACjBA,gBAAEgC,cAAF;AACAhC,gBAAEiC,eAAF;AACA,kBAAItE,KAAKuE,MAAL,KAAgBrK,SAASsK,SAA7B,EAAwC;AACtC,uBAAOtK,SAASuK,OAAT,CAAiBL,MAAMvD,OAAN,CAAcnB,4BAA/B,EAA6D,YAAW;AAC7E,yBAAO0E,MAAMM,UAAN,CAAiB1E,IAAjB,CAAP;AACD,iBAFM,CAAP;AAGD,eAJD,MAIO;AACL,oBAAIoE,MAAMvD,OAAN,CAAcjB,0BAAlB,EAA8C;AAC5C,yBAAO1F,SAASuK,OAAT,CAAiBL,MAAMvD,OAAN,CAAcjB,0BAA/B,EAA2D,YAAW;AAC3E,2BAAOwE,MAAMM,UAAN,CAAiB1E,IAAjB,CAAP;AACD,mBAFM,CAAP;AAGD,iBAJD,MAIO;AACL,yBAAOoE,MAAMM,UAAN,CAAiB1E,IAAjB,CAAP;AACD;AACF;AACF,aAhBD;AAiBD,WAlBiB,CAkBf,IAlBe,CAAlB;AAmBAuD,iBAAOvD,KAAK2D,cAAL,CAAoBE,gBAApB,CAAqC,kBAArC,CAAP;AACAH,oBAAU,EAAV;AACA,eAAKR,IAAI,CAAJ,EAAOE,OAAOG,KAAKnH,MAAxB,EAAgC8G,IAAIE,IAApC,EAA0CF,GAA1C,EAA+C;AAC7CO,yBAAaF,KAAKL,CAAL,CAAb;AACAQ,oBAAQ9H,IAAR,CAAa6H,WAAWlI,gBAAX,CAA4B,OAA5B,EAAqCiI,eAArC,CAAb;AACD;AACD,iBAAOE,OAAP;AACD;AACF,OAlNiC;AAmNlCiB,mBAAa,qBAAS3E,IAAT,EAAe;AAC1B,YAAII,GAAJ;AACA,YAAIJ,KAAK2D,cAAT,EAAyB;AACvB,cAAI,CAACvD,MAAMJ,KAAK2D,cAAZ,KAA+B,IAAnC,EAAyC;AACvCvD,gBAAIwE,UAAJ,CAAeC,WAAf,CAA2B7E,KAAK2D,cAAhC;AACD;AACF;AACD,eAAO,KAAKmB,2BAAL,EAAP;AACD,OA3NiC;AA4NlCC,iBAAW,mBAAS/E,IAAT,EAAegF,OAAf,EAAwB;AACjC,YAAI/I,CAAJ,EAAOC,GAAP,EAAYkE,GAAZ,EAAiB6E,gBAAjB;AACA,YAAIjF,KAAK2D,cAAT,EAAyB;AACvB3D,eAAK2D,cAAL,CAAoBrB,SAApB,CAA8BC,MAA9B,CAAqC,iBAArC;AACAnC,gBAAMJ,KAAK2D,cAAL,CAAoBE,gBAApB,CAAqC,qBAArC,CAAN;AACA,eAAK5H,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1CgJ,+BAAmB7E,IAAInE,CAAJ,CAAnB;AACAgJ,6BAAiBC,GAAjB,GAAuBlF,KAAK+D,IAA5B;AACAkB,6BAAiBE,GAAjB,GAAuBH,OAAvB;AACD;AACD,iBAAOI,WAAa,UAAShB,KAAT,EAAgB;AAClC,mBAAO,YAAW;AAChB,qBAAOpE,KAAK2D,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,kBAAlC,CAAP;AACD,aAFD;AAGD,WAJkB,CAIhB,IAJgB,CAAZ,EAII,CAJJ,CAAP;AAKD;AACF,OA5OiC;AA6OlC0C,aAAO,eAASrF,IAAT,EAAesF,OAAf,EAAwB;AAC7B,YAAIrJ,CAAJ,EAAOC,GAAP,EAAYmH,IAAZ,EAAkBjD,GAAlB,EAAuBsD,OAAvB;AACA,YAAI1D,KAAK2D,cAAT,EAAyB;AACvB3D,eAAK2D,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,UAAlC;AACA,cAAI,OAAO2C,OAAP,KAAmB,QAAnB,IAA+BA,QAAQD,KAA3C,EAAkD;AAChDC,sBAAUA,QAAQD,KAAlB;AACD;AACDjF,gBAAMJ,KAAK2D,cAAL,CAAoBE,gBAApB,CAAqC,wBAArC,CAAN;AACAH,oBAAU,EAAV;AACA,eAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1CoH,mBAAOjD,IAAInE,CAAJ,CAAP;AACAyH,oBAAQ9H,IAAR,CAAayH,KAAKzC,WAAL,GAAmB0E,OAAhC;AACD;AACD,iBAAO5B,OAAP;AACD;AACF,OA5PiC;AA6PlC6B,qBAAe9K,IA7PmB;AA8PlC+K,kBAAY,oBAASxF,IAAT,EAAe;AACzB,YAAIA,KAAK2D,cAAT,EAAyB;AACvB3D,eAAK2D,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,eAAlC;AACA,cAAI3C,KAAKmE,WAAT,EAAsB;AACpB,mBAAOnE,KAAKmE,WAAL,CAAiBvD,WAAjB,GAA+B,KAAKC,OAAL,CAAapB,gBAAnD;AACD;AACF;AACF,OArQiC;AAsQlCgG,0BAAoBhL,IAtQc;AAuQlCiL,sBAAgB,wBAAS1F,IAAT,EAAe2F,QAAf,EAAyBC,SAAzB,EAAoC;AAClD,YAAI3J,CAAJ,EAAOC,GAAP,EAAYmH,IAAZ,EAAkBjD,GAAlB,EAAuBsD,OAAvB;AACA,YAAI1D,KAAK2D,cAAT,EAAyB;AACvBvD,gBAAMJ,KAAK2D,cAAL,CAAoBE,gBAApB,CAAqC,0BAArC,CAAN;AACAH,oBAAU,EAAV;AACA,eAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1CoH,mBAAOjD,IAAInE,CAAJ,CAAP;AACA,gBAAIoH,KAAKwC,QAAL,KAAkB,UAAtB,EAAkC;AAChCnC,sBAAQ9H,IAAR,CAAayH,KAAKyC,KAAL,GAAaH,QAA1B;AACD,aAFD,MAEO;AACLjC,sBAAQ9H,IAAR,CAAayH,KAAK0C,KAAL,CAAW9E,KAAX,GAAmB0E,WAAW,GAA3C;AACD;AACF;AACD,iBAAOjC,OAAP;AACD;AACF,OAtRiC;AAuRlCsC,2BAAqBvL,IAvRa;AAwRlCwL,eAASxL,IAxRyB;AAyRlCyL,uBAAiBzL,IAzRiB;AA0RlC0L,eAAS,iBAASnG,IAAT,EAAe;AACtB,YAAIA,KAAK2D,cAAT,EAAyB;AACvB,iBAAO3D,KAAK2D,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,YAAlC,CAAP;AACD;AACF,OA9RiC;AA+RlCyD,uBAAiB3L,IA/RiB;AAgSlC4L,gBAAU,kBAASrG,IAAT,EAAe;AACvB,eAAO,KAAKnE,IAAL,CAAU,OAAV,EAAmBmE,IAAnB,EAAyB,kBAAzB,CAAP;AACD,OAlSiC;AAmSlCsG,wBAAkB7L,IAnSgB;AAoSlC8L,gBAAU,kBAASvG,IAAT,EAAe;AACvB,YAAIA,KAAKmE,WAAT,EAAsB;AACpBnE,eAAKmE,WAAL,CAAiBvD,WAAjB,GAA+B,KAAKC,OAAL,CAAalB,cAA5C;AACD;AACD,YAAIK,KAAK2D,cAAT,EAAyB;AACvB,iBAAO3D,KAAK2D,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,aAAlC,CAAP;AACD;AACF,OA3SiC;AA4SlC6D,wBAAkB/L,IA5SgB;AA6SlCgM,wBAAkBhM,IA7SgB;AA8SlCiM,uBAAiBjM,IA9SiB;AA+SlCkM,qBAAelM,IA/SmB;AAgTlCmM,kBAAYnM;AAhTsB,KAApC;;AAmTAoC,aAAS,kBAAW;AAClB,UAAIZ,CAAJ,EAAOlB,GAAP,EAAYmB,GAAZ,EAAiB2K,MAAjB,EAAyBC,OAAzB,EAAkCC,MAAlC,EAA0CC,GAA1C;AACAD,eAAS5K,UAAU,CAAV,CAAT,EAAuB2K,UAAU,KAAK3K,UAAUC,MAAf,GAAwBzB,MAAMM,IAAN,CAAWkB,SAAX,EAAsB,CAAtB,CAAxB,GAAmD,EAApF;AACA,WAAKF,IAAI,CAAJ,EAAOC,MAAM4K,QAAQ1K,MAA1B,EAAkCH,IAAIC,GAAtC,EAA2CD,GAA3C,EAAgD;AAC9C4K,iBAASC,QAAQ7K,CAAR,CAAT;AACA,aAAKlB,GAAL,IAAY8L,MAAZ,EAAoB;AAClBG,gBAAMH,OAAO9L,GAAP,CAAN;AACAgM,iBAAOhM,GAAP,IAAciM,GAAd;AACD;AACF;AACD,aAAOD,MAAP;AACD,KAXD;;AAaA,aAAS7M,QAAT,CAAkB+M,QAAlB,EAA4BpG,OAA5B,EAAqC;AACnC,UAAIqG,cAAJ,EAAoBhH,QAApB,EAA8BE,GAA9B;AACA,WAAKE,OAAL,GAAe2G,QAAf;AACA,WAAKE,OAAL,GAAejN,SAASiN,OAAxB;AACA,WAAKnK,cAAL,CAAoBmF,eAApB,GAAsC,KAAKnF,cAAL,CAAoBmF,eAApB,CAAoCiF,OAApC,CAA4C,MAA5C,EAAoD,EAApD,CAAtC;AACA,WAAKC,iBAAL,GAAyB,EAAzB;AACA,WAAKC,SAAL,GAAiB,EAAjB;AACA,WAAKC,KAAL,GAAa,EAAb;AACA,UAAI,OAAO,KAAKjH,OAAZ,KAAwB,QAA5B,EAAsC;AACpC,aAAKA,OAAL,GAAekH,SAASC,aAAT,CAAuB,KAAKnH,OAA5B,CAAf;AACD;AACD,UAAI,EAAE,KAAKA,OAAL,IAAiB,KAAKA,OAAL,CAAaoH,QAAb,IAAyB,IAA5C,CAAJ,EAAwD;AACtD,cAAM,IAAI9F,KAAJ,CAAU,2BAAV,CAAN;AACD;AACD,UAAI,KAAKtB,OAAL,CAAaqH,QAAjB,EAA2B;AACzB,cAAM,IAAI/F,KAAJ,CAAU,4BAAV,CAAN;AACD;AACD1H,eAAS0N,SAAT,CAAmBhM,IAAnB,CAAwB,IAAxB;AACA,WAAK0E,OAAL,CAAaqH,QAAb,GAAwB,IAAxB;AACAT,uBAAiB,CAAC9G,MAAMlG,SAAS2N,iBAAT,CAA2B,KAAKvH,OAAhC,CAAP,KAAoD,IAApD,GAA2DF,GAA3D,GAAiE,EAAlF;AACA,WAAKS,OAAL,GAAehE,OAAO,EAAP,EAAW,KAAKG,cAAhB,EAAgCkK,cAAhC,EAAgDrG,WAAW,IAAX,GAAkBA,OAAlB,GAA4B,EAA5E,CAAf;AACA,UAAI,KAAKA,OAAL,CAAa3B,aAAb,IAA8B,CAAChF,SAAS4N,kBAAT,EAAnC,EAAkE;AAChE,eAAO,KAAKjH,OAAL,CAAaX,QAAb,CAAsBjF,IAAtB,CAA2B,IAA3B,CAAP;AACD;AACD,UAAI,KAAK4F,OAAL,CAAa5D,GAAb,IAAoB,IAAxB,EAA8B;AAC5B,aAAK4D,OAAL,CAAa5D,GAAb,GAAmB,KAAKqD,OAAL,CAAayH,YAAb,CAA0B,QAA1B,CAAnB;AACD;AACD,UAAI,CAAC,KAAKlH,OAAL,CAAa5D,GAAlB,EAAuB;AACrB,cAAM,IAAI2E,KAAJ,CAAU,kBAAV,CAAN;AACD;AACD,UAAI,KAAKf,OAAL,CAAapC,aAAb,IAA8B,KAAKoC,OAAL,CAAanC,iBAA/C,EAAkE;AAChE,cAAM,IAAIkD,KAAJ,CAAU,oGAAV,CAAN;AACD;AACD,UAAI,KAAKf,OAAL,CAAanC,iBAAjB,EAAoC;AAClC,aAAKmC,OAAL,CAAapC,aAAb,GAA6B,KAAKoC,OAAL,CAAanC,iBAA1C;AACA,eAAO,KAAKmC,OAAL,CAAanC,iBAApB;AACD;AACD,WAAKmC,OAAL,CAAa3D,MAAb,GAAsB,KAAK2D,OAAL,CAAa3D,MAAb,CAAoB8K,WAApB,EAAtB;AACA,UAAI,CAAC9H,WAAW,KAAK+H,mBAAL,EAAZ,KAA2C/H,SAAS0E,UAAxD,EAAoE;AAClE1E,iBAAS0E,UAAT,CAAoBC,WAApB,CAAgC3E,QAAhC;AACD;AACD,UAAI,KAAKW,OAAL,CAAa/B,iBAAb,KAAmC,KAAvC,EAA8C;AAC5C,YAAI,KAAK+B,OAAL,CAAa/B,iBAAjB,EAAoC;AAClC,eAAKA,iBAAL,GAAyB5E,SAASgO,UAAT,CAAoB,KAAKrH,OAAL,CAAa/B,iBAAjC,EAAoD,mBAApD,CAAzB;AACD,SAFD,MAEO;AACL,eAAKA,iBAAL,GAAyB,KAAKwB,OAA9B;AACD;AACF;AACD,UAAI,KAAKO,OAAL,CAAatC,SAAjB,EAA4B;AAC1B,YAAI,KAAKsC,OAAL,CAAatC,SAAb,KAA2B,IAA/B,EAAqC;AACnC,eAAK8I,iBAAL,GAAyB,CAAC,KAAK/G,OAAN,CAAzB;AACD,SAFD,MAEO;AACL,eAAK+G,iBAAL,GAAyBnN,SAASiO,WAAT,CAAqB,KAAKtH,OAAL,CAAatC,SAAlC,EAA6C,WAA7C,CAAzB;AACD;AACF;AACD,WAAKuB,IAAL;AACD;;AAED5F,aAASkB,SAAT,CAAmBgN,gBAAnB,GAAsC,YAAW;AAC/C,UAAIpI,IAAJ,EAAU/D,CAAV,EAAaC,GAAb,EAAkBkE,GAAlB,EAAuBsD,OAAvB;AACAtD,YAAM,KAAKmH,KAAX;AACA7D,gBAAU,EAAV;AACA,WAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C+D,eAAOI,IAAInE,CAAJ,CAAP;AACA,YAAI+D,KAAKqI,QAAT,EAAmB;AACjB3E,kBAAQ9H,IAAR,CAAaoE,IAAb;AACD;AACF;AACD,aAAO0D,OAAP;AACD,KAXD;;AAaAxJ,aAASkB,SAAT,CAAmBkN,gBAAnB,GAAsC,YAAW;AAC/C,UAAItI,IAAJ,EAAU/D,CAAV,EAAaC,GAAb,EAAkBkE,GAAlB,EAAuBsD,OAAvB;AACAtD,YAAM,KAAKmH,KAAX;AACA7D,gBAAU,EAAV;AACA,WAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C+D,eAAOI,IAAInE,CAAJ,CAAP;AACA,YAAI,CAAC+D,KAAKqI,QAAV,EAAoB;AAClB3E,kBAAQ9H,IAAR,CAAaoE,IAAb;AACD;AACF;AACD,aAAO0D,OAAP;AACD,KAXD;;AAaAxJ,aAASkB,SAAT,CAAmBmN,kBAAnB,GAAwC,UAAShE,MAAT,EAAiB;AACvD,UAAIvE,IAAJ,EAAU/D,CAAV,EAAaC,GAAb,EAAkBkE,GAAlB,EAAuBsD,OAAvB;AACAtD,YAAM,KAAKmH,KAAX;AACA7D,gBAAU,EAAV;AACA,WAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C+D,eAAOI,IAAInE,CAAJ,CAAP;AACA,YAAI+D,KAAKuE,MAAL,KAAgBA,MAApB,EAA4B;AAC1Bb,kBAAQ9H,IAAR,CAAaoE,IAAb;AACD;AACF;AACD,aAAO0D,OAAP;AACD,KAXD;;AAaAxJ,aAASkB,SAAT,CAAmBoN,cAAnB,GAAoC,YAAW;AAC7C,aAAO,KAAKD,kBAAL,CAAwBrO,SAASuO,MAAjC,CAAP;AACD,KAFD;;AAIAvO,aAASkB,SAAT,CAAmBsN,iBAAnB,GAAuC,YAAW;AAChD,aAAO,KAAKH,kBAAL,CAAwBrO,SAASsK,SAAjC,CAAP;AACD,KAFD;;AAIAtK,aAASkB,SAAT,CAAmBuN,aAAnB,GAAmC,YAAW;AAC5C,aAAO,KAAKJ,kBAAL,CAAwBrO,SAAS0O,KAAjC,CAAP;AACD,KAFD;;AAIA1O,aAASkB,SAAT,CAAmByN,cAAnB,GAAoC,YAAW;AAC7C,UAAI7I,IAAJ,EAAU/D,CAAV,EAAaC,GAAb,EAAkBkE,GAAlB,EAAuBsD,OAAvB;AACAtD,YAAM,KAAKmH,KAAX;AACA7D,gBAAU,EAAV;AACA,WAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C+D,eAAOI,IAAInE,CAAJ,CAAP;AACA,YAAI+D,KAAKuE,MAAL,KAAgBrK,SAASsK,SAAzB,IAAsCxE,KAAKuE,MAAL,KAAgBrK,SAASuO,MAAnE,EAA2E;AACzE/E,kBAAQ9H,IAAR,CAAaoE,IAAb;AACD;AACF;AACD,aAAO0D,OAAP;AACD,KAXD;;AAaAxJ,aAASkB,SAAT,CAAmB0E,IAAnB,GAA0B,YAAW;AACnC,UAAIgJ,SAAJ,EAAe7M,CAAf,EAAkBC,GAAlB,EAAuB6M,aAAvB,EAAsC3I,GAAtC,EAA2CkD,IAA3C,EAAiD0F,oBAAjD;AACA,UAAI,KAAK1I,OAAL,CAAa2I,OAAb,KAAyB,MAA7B,EAAqC;AACnC,aAAK3I,OAAL,CAAa4I,YAAb,CAA0B,SAA1B,EAAqC,qBAArC;AACD;AACD,UAAI,KAAK5I,OAAL,CAAagC,SAAb,CAAuB6G,QAAvB,CAAgC,UAAhC,KAA+C,CAAC,KAAK7I,OAAL,CAAamH,aAAb,CAA2B,aAA3B,CAApD,EAA+F;AAC7F,aAAKnH,OAAL,CAAaK,WAAb,CAAyBzG,SAASwG,aAAT,CAAuB,gDAAgD,KAAKG,OAAL,CAAa1B,kBAA7D,GAAkF,eAAzG,CAAzB;AACD;AACD,UAAI,KAAKkI,iBAAL,CAAuBjL,MAA3B,EAAmC;AACjC4M,+BAAwB,UAAS5E,KAAT,EAAgB;AACtC,iBAAO,YAAW;AAChB,gBAAIA,MAAMgF,eAAV,EAA2B;AACzBhF,oBAAMgF,eAAN,CAAsBxE,UAAtB,CAAiCC,WAAjC,CAA6CT,MAAMgF,eAAnD;AACD;AACDhF,kBAAMgF,eAAN,GAAwB5B,SAAS9G,aAAT,CAAuB,OAAvB,CAAxB;AACA0D,kBAAMgF,eAAN,CAAsBF,YAAtB,CAAmC,MAAnC,EAA2C,MAA3C;AACA,gBAAK9E,MAAMvD,OAAN,CAAczC,QAAd,IAA0B,IAA3B,IAAoCgG,MAAMvD,OAAN,CAAczC,QAAd,GAAyB,CAAjE,EAAoE;AAClEgG,oBAAMgF,eAAN,CAAsBF,YAAtB,CAAmC,UAAnC,EAA+C,UAA/C;AACD;AACD9E,kBAAMgF,eAAN,CAAsB7I,SAAtB,GAAkC,iBAAlC;AACA,gBAAI6D,MAAMvD,OAAN,CAAcpC,aAAd,IAA+B,IAAnC,EAAyC;AACvC2F,oBAAMgF,eAAN,CAAsBF,YAAtB,CAAmC,QAAnC,EAA6C9E,MAAMvD,OAAN,CAAcpC,aAA3D;AACD;AACD,gBAAI2F,MAAMvD,OAAN,CAAc7B,OAAd,IAAyB,IAA7B,EAAmC;AACjCoF,oBAAMgF,eAAN,CAAsBF,YAAtB,CAAmC,SAAnC,EAA8C9E,MAAMvD,OAAN,CAAc7B,OAA5D;AACD;AACDoF,kBAAMgF,eAAN,CAAsBrD,KAAtB,CAA4BsD,UAA5B,GAAyC,QAAzC;AACAjF,kBAAMgF,eAAN,CAAsBrD,KAAtB,CAA4BuD,QAA5B,GAAuC,UAAvC;AACAlF,kBAAMgF,eAAN,CAAsBrD,KAAtB,CAA4BwD,GAA5B,GAAkC,GAAlC;AACAnF,kBAAMgF,eAAN,CAAsBrD,KAAtB,CAA4ByD,IAA5B,GAAmC,GAAnC;AACApF,kBAAMgF,eAAN,CAAsBrD,KAAtB,CAA4B7E,MAA5B,GAAqC,GAArC;AACAkD,kBAAMgF,eAAN,CAAsBrD,KAAtB,CAA4B9E,KAA5B,GAAoC,GAApC;AACAuG,qBAASC,aAAT,CAAuBrD,MAAMvD,OAAN,CAAc9B,oBAArC,EAA2D4B,WAA3D,CAAuEyD,MAAMgF,eAA7E;AACA,mBAAOhF,MAAMgF,eAAN,CAAsB7N,gBAAtB,CAAuC,QAAvC,EAAiD,YAAW;AACjE,kBAAIyE,IAAJ,EAAUuH,KAAV,EAAiBtL,CAAjB,EAAoBC,GAApB;AACAqL,sBAAQnD,MAAMgF,eAAN,CAAsB7B,KAA9B;AACA,kBAAIA,MAAMnL,MAAV,EAAkB;AAChB,qBAAKH,IAAI,CAAJ,EAAOC,MAAMqL,MAAMnL,MAAxB,EAAgCH,IAAIC,GAApC,EAAyCD,GAAzC,EAA8C;AAC5C+D,yBAAOuH,MAAMtL,CAAN,CAAP;AACAmI,wBAAMqF,OAAN,CAAczJ,IAAd;AACD;AACF;AACDoE,oBAAMvI,IAAN,CAAW,YAAX,EAAyB0L,KAAzB;AACA,qBAAOyB,sBAAP;AACD,aAXM,CAAP;AAYD,WAnCD;AAoCD,SArCsB,CAqCpB,IArCoB,CAAvB;AAsCAA;AACD;AACD,WAAKU,GAAL,GAAW,CAACtJ,MAAMuJ,OAAOD,GAAd,KAAsB,IAAtB,GAA6BtJ,GAA7B,GAAmCuJ,OAAOC,SAArD;AACAtG,aAAO,KAAKvG,MAAZ;AACA,WAAKd,IAAI,CAAJ,EAAOC,MAAMoH,KAAKlH,MAAvB,EAA+BH,IAAIC,GAAnC,EAAwCD,GAAxC,EAA6C;AAC3C6M,oBAAYxF,KAAKrH,CAAL,CAAZ;AACA,aAAKT,EAAL,CAAQsN,SAAR,EAAmB,KAAKjI,OAAL,CAAaiI,SAAb,CAAnB;AACD;AACD,WAAKtN,EAAL,CAAQ,gBAAR,EAA2B,UAAS4I,KAAT,EAAgB;AACzC,eAAO,YAAW;AAChB,iBAAOA,MAAMyF,yBAAN,EAAP;AACD,SAFD;AAGD,OAJyB,CAIvB,IAJuB,CAA1B;AAKA,WAAKrO,EAAL,CAAQ,aAAR,EAAwB,UAAS4I,KAAT,EAAgB;AACtC,eAAO,YAAW;AAChB,iBAAOA,MAAMyF,yBAAN,EAAP;AACD,SAFD;AAGD,OAJsB,CAIpB,IAJoB,CAAvB;AAKA,WAAKrO,EAAL,CAAQ,UAAR,EAAqB,UAAS4I,KAAT,EAAgB;AACnC,eAAO,UAASpE,IAAT,EAAe;AACpB,iBAAOoE,MAAMvI,IAAN,CAAW,UAAX,EAAuBmE,IAAvB,CAAP;AACD,SAFD;AAGD,OAJmB,CAIjB,IAJiB,CAApB;AAKA,WAAKxE,EAAL,CAAQ,UAAR,EAAqB,UAAS4I,KAAT,EAAgB;AACnC,eAAO,UAASpE,IAAT,EAAe;AACpB,cAAIoE,MAAMuE,aAAN,GAAsBvM,MAAtB,KAAiC,CAAjC,IAAsCgI,MAAMsE,iBAAN,GAA0BtM,MAA1B,KAAqC,CAA3E,IAAgFgI,MAAMoE,cAAN,GAAuBpM,MAAvB,KAAkC,CAAtH,EAAyH;AACvH,mBAAOgJ,WAAY,YAAW;AAC5B,qBAAOhB,MAAMvI,IAAN,CAAW,eAAX,CAAP;AACD,aAFM,EAEH,CAFG,CAAP;AAGD;AACF,SAND;AAOD,OARmB,CAQjB,IARiB,CAApB;AASAkN,sBAAgB,uBAAS1G,CAAT,EAAY;AAC1BA,UAAEiC,eAAF;AACA,YAAIjC,EAAEgC,cAAN,EAAsB;AACpB,iBAAOhC,EAAEgC,cAAF,EAAP;AACD,SAFD,MAEO;AACL,iBAAOhC,EAAEyH,WAAF,GAAgB,KAAvB;AACD;AACF,OAPD;AAQA,WAAKxC,SAAL,GAAiB,CACf;AACEhH,iBAAS,KAAKA,OADhB;AAEEvD,gBAAQ;AACN,uBAAc,UAASqH,KAAT,EAAgB;AAC5B,mBAAO,UAAS/B,CAAT,EAAY;AACjB,qBAAO+B,MAAMvI,IAAN,CAAW,WAAX,EAAwBwG,CAAxB,CAAP;AACD,aAFD;AAGD,WAJY,CAIV,IAJU,CADP;AAMN,uBAAc,UAAS+B,KAAT,EAAgB;AAC5B,mBAAO,UAAS/B,CAAT,EAAY;AACjB0G,4BAAc1G,CAAd;AACA,qBAAO+B,MAAMvI,IAAN,CAAW,WAAX,EAAwBwG,CAAxB,CAAP;AACD,aAHD;AAID,WALY,CAKV,IALU,CANP;AAYN,sBAAa,UAAS+B,KAAT,EAAgB;AAC3B,mBAAO,UAAS/B,CAAT,EAAY;AACjB,kBAAI0H,IAAJ;AACA,kBAAI;AACFA,uBAAO1H,EAAE2H,YAAF,CAAeC,aAAtB;AACD,eAFD,CAEE,OAAOC,SAAP,EAAkB,CAAE;AACtB7H,gBAAE2H,YAAF,CAAeG,UAAf,GAA4B,WAAWJ,IAAX,IAAmB,eAAeA,IAAlC,GAAyC,MAAzC,GAAkD,MAA9E;AACAhB,4BAAc1G,CAAd;AACA,qBAAO+B,MAAMvI,IAAN,CAAW,UAAX,EAAuBwG,CAAvB,CAAP;AACD,aARD;AASD,WAVW,CAUT,IAVS,CAZN;AAuBN,uBAAc,UAAS+B,KAAT,EAAgB;AAC5B,mBAAO,UAAS/B,CAAT,EAAY;AACjB,qBAAO+B,MAAMvI,IAAN,CAAW,WAAX,EAAwBwG,CAAxB,CAAP;AACD,aAFD;AAGD,WAJY,CAIV,IAJU,CAvBP;AA4BN,kBAAS,UAAS+B,KAAT,EAAgB;AACvB,mBAAO,UAAS/B,CAAT,EAAY;AACjB0G,4BAAc1G,CAAd;AACA,qBAAO+B,MAAMhC,IAAN,CAAWC,CAAX,CAAP;AACD,aAHD;AAID,WALO,CAKL,IALK,CA5BF;AAkCN,qBAAY,UAAS+B,KAAT,EAAgB;AAC1B,mBAAO,UAAS/B,CAAT,EAAY;AACjB,qBAAO+B,MAAMvI,IAAN,CAAW,SAAX,EAAsBwG,CAAtB,CAAP;AACD,aAFD;AAGD,WAJU,CAIR,IAJQ;AAlCL;AAFV,OADe,CAAjB;AA6CA,WAAKgF,iBAAL,CAAuB+C,OAAvB,CAAgC,UAAShG,KAAT,EAAgB;AAC9C,eAAO,UAASiG,gBAAT,EAA2B;AAChC,iBAAOjG,MAAMkD,SAAN,CAAgB1L,IAAhB,CAAqB;AAC1B0E,qBAAS+J,gBADiB;AAE1BtN,oBAAQ;AACN,uBAAS,eAASuN,GAAT,EAAc;AACrB,oBAAKD,qBAAqBjG,MAAM9D,OAA5B,IAAyCgK,IAAIvD,MAAJ,KAAe3C,MAAM9D,OAArB,IAAgCpG,SAASqQ,aAAT,CAAuBD,IAAIvD,MAA3B,EAAmC3C,MAAM9D,OAAN,CAAcmH,aAAd,CAA4B,aAA5B,CAAnC,CAA7E,EAA8J;AAC5JrD,wBAAMgF,eAAN,CAAsBoB,KAAtB;AACD;AACD,uBAAO,IAAP;AACD;AANK;AAFkB,WAArB,CAAP;AAWD,SAZD;AAaD,OAd8B,CAc5B,IAd4B,CAA/B;AAeA,WAAKC,MAAL;AACA,aAAO,KAAK5J,OAAL,CAAaf,IAAb,CAAkB7E,IAAlB,CAAuB,IAAvB,CAAP;AACD,KArJD;;AAuJAf,aAASkB,SAAT,CAAmBsP,OAAnB,GAA6B,YAAW;AACtC,UAAItK,GAAJ;AACA,WAAKuK,OAAL;AACA,WAAKC,cAAL,CAAoB,IAApB;AACA,UAAI,CAACxK,MAAM,KAAKgJ,eAAZ,KAAgC,IAAhC,GAAuChJ,IAAIwE,UAA3C,GAAwD,KAAK,CAAjE,EAAoE;AAClE,aAAKwE,eAAL,CAAqBxE,UAArB,CAAgCC,WAAhC,CAA4C,KAAKuE,eAAjD;AACA,aAAKA,eAAL,GAAuB,IAAvB;AACD;AACD,aAAO,KAAK9I,OAAL,CAAaqH,QAApB;AACA,aAAOzN,SAAS0N,SAAT,CAAmBjL,MAAnB,CAA0BzC,SAAS0N,SAAT,CAAmBiD,OAAnB,CAA2B,IAA3B,CAA1B,EAA4D,CAA5D,CAAP;AACD,KAVD;;AAYA3Q,aAASkB,SAAT,CAAmByO,yBAAnB,GAA+C,YAAW;AACxD,UAAIiB,WAAJ,EAAiB9K,IAAjB,EAAuB/D,CAAvB,EAA0BC,GAA1B,EAA+BkE,GAA/B,EAAoC2K,UAApC,EAAgDC,cAAhD,EAAgEC,mBAAhE;AACAD,uBAAiB,CAAjB;AACAD,mBAAa,CAAb;AACAD,oBAAc,KAAKjC,cAAL,EAAd;AACA,UAAIiC,YAAY1O,MAAhB,EAAwB;AACtBgE,cAAM,KAAKyI,cAAL,EAAN;AACA,aAAK5M,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C+D,iBAAOI,IAAInE,CAAJ,CAAP;AACA+O,4BAAkBhL,KAAKkL,MAAL,CAAYtF,SAA9B;AACAmF,wBAAc/K,KAAKkL,MAAL,CAAYC,KAA1B;AACD;AACDF,8BAAsB,MAAMD,cAAN,GAAuBD,UAA7C;AACD,OARD,MAQO;AACLE,8BAAsB,GAAtB;AACD;AACD,aAAO,KAAKpP,IAAL,CAAU,qBAAV,EAAiCoP,mBAAjC,EAAsDF,UAAtD,EAAkEC,cAAlE,CAAP;AACD,KAjBD;;AAmBA9Q,aAASkB,SAAT,CAAmBgQ,aAAnB,GAAmC,UAASC,CAAT,EAAY;AAC7C,UAAI,OAAO,KAAKxK,OAAL,CAAarD,SAApB,KAAkC,UAAtC,EAAkD;AAChD,eAAO,KAAKqD,OAAL,CAAarD,SAAb,CAAuB6N,CAAvB,CAAP;AACD,OAFD,MAEO;AACL,eAAO,KAAK,KAAKxK,OAAL,CAAarD,SAAlB,IAA+B,KAAKqD,OAAL,CAAavD,cAAb,GAA8B,MAAM+N,CAAN,GAAU,GAAxC,GAA8C,EAA7E,CAAP;AACD;AACF,KAND;;AAQAnR,aAASkB,SAAT,CAAmB0I,eAAnB,GAAqC,UAASC,IAAT,EAAe/D,IAAf,EAAqB;AACxD,UAAI,OAAO,KAAKa,OAAL,CAAa5B,cAApB,KAAuC,UAA3C,EAAuD;AACrD,eAAO8E,IAAP;AACD;AACD,aAAO,KAAKlD,OAAL,CAAa5B,cAAb,CAA4B8E,IAA5B,EAAkC/D,IAAlC,CAAP;AACD,KALD;;AAOA9F,aAASkB,SAAT,CAAmB2F,eAAnB,GAAqC,YAAW;AAC9C,UAAIuK,gBAAJ,EAAsBC,MAAtB,EAA8BC,YAA9B,EAA4CC,IAA5C;AACA,UAAIH,mBAAmB,KAAKrD,mBAAL,EAAvB,EAAmD;AACjD,eAAOqD,gBAAP;AACD;AACDE,qBAAe,6BAAf;AACA,UAAI,KAAK3K,OAAL,CAAaxB,gBAAjB,EAAmC;AACjCmM,wBAAgB,QAAQ,KAAK3K,OAAL,CAAaxB,gBAArB,GAAwC,MAAxD;AACD;AACDmM,sBAAgB,iCAAkC,KAAKJ,aAAL,CAAmB,CAAnB,CAAlC,GAA2D,KAA3D,IAAoE,KAAKvK,OAAL,CAAavD,cAAb,GAA8B,qBAA9B,GAAsD,KAAK,CAA/H,IAAoI,oDAApJ;AACAiO,eAASrR,SAASwG,aAAT,CAAuB8K,YAAvB,CAAT;AACA,UAAI,KAAKlL,OAAL,CAAa2I,OAAb,KAAyB,MAA7B,EAAqC;AACnCwC,eAAOvR,SAASwG,aAAT,CAAuB,oBAAoB,KAAKG,OAAL,CAAa5D,GAAjC,GAAuC,8CAAvC,GAAwF,KAAK4D,OAAL,CAAa3D,MAArG,GAA8G,YAArI,CAAP;AACAuO,aAAK9K,WAAL,CAAiB4K,MAAjB;AACD,OAHD,MAGO;AACL,aAAKjL,OAAL,CAAa4I,YAAb,CAA0B,SAA1B,EAAqC,qBAArC;AACA,aAAK5I,OAAL,CAAa4I,YAAb,CAA0B,QAA1B,EAAoC,KAAKrI,OAAL,CAAa3D,MAAjD;AACD;AACD,aAAOuO,QAAQ,IAAR,GAAeA,IAAf,GAAsBF,MAA7B;AACD,KAnBD;;AAqBArR,aAASkB,SAAT,CAAmB6M,mBAAnB,GAAyC,YAAW;AAClD,UAAI/H,QAAJ,EAAcwL,WAAd,EAA2BzP,CAA3B,EAA8BC,GAA9B,EAAmCkE,GAAnC,EAAwC6I,OAAxC;AACAyC,oBAAc,qBAASC,QAAT,EAAmB;AAC/B,YAAIC,EAAJ,EAAQ3P,CAAR,EAAWC,GAAX;AACA,aAAKD,IAAI,CAAJ,EAAOC,MAAMyP,SAASvP,MAA3B,EAAmCH,IAAIC,GAAvC,EAA4CD,GAA5C,EAAiD;AAC/C2P,eAAKD,SAAS1P,CAAT,CAAL;AACA,cAAI,qBAAqBwE,IAArB,CAA0BmL,GAAGrL,SAA7B,CAAJ,EAA6C;AAC3C,mBAAOqL,EAAP;AACD;AACF;AACF,OARD;AASAxL,YAAM,CAAC,KAAD,EAAQ,MAAR,CAAN;AACA,WAAKnE,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1CgN,kBAAU7I,IAAInE,CAAJ,CAAV;AACA,YAAIiE,WAAWwL,YAAY,KAAKpL,OAAL,CAAaE,oBAAb,CAAkCyI,OAAlC,CAAZ,CAAf,EAAwE;AACtE,iBAAO/I,QAAP;AACD;AACF;AACF,KAlBD;;AAoBAhG,aAASkB,SAAT,CAAmByQ,mBAAnB,GAAyC,YAAW;AAClD,UAAIC,gBAAJ,EAAsBrQ,KAAtB,EAA6BQ,CAA7B,EAAgCC,GAAhC,EAAqC6P,QAArC,EAA+C3L,GAA/C,EAAoDsD,OAApD;AACAtD,YAAM,KAAKkH,SAAX;AACA5D,gBAAU,EAAV;AACA,WAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C6P,2BAAmB1L,IAAInE,CAAJ,CAAnB;AACAyH,gBAAQ9H,IAAR,CAAc,YAAW;AACvB,cAAI0H,IAAJ,EAAU0I,QAAV;AACA1I,iBAAOwI,iBAAiB/O,MAAxB;AACAiP,qBAAW,EAAX;AACA,eAAKvQ,KAAL,IAAc6H,IAAd,EAAoB;AAClByI,uBAAWzI,KAAK7H,KAAL,CAAX;AACAuQ,qBAASpQ,IAAT,CAAckQ,iBAAiBxL,OAAjB,CAAyB/E,gBAAzB,CAA0CE,KAA1C,EAAiDsQ,QAAjD,EAA2D,KAA3D,CAAd;AACD;AACD,iBAAOC,QAAP;AACD,SATY,EAAb;AAUD;AACD,aAAOtI,OAAP;AACD,KAlBD;;AAoBAxJ,aAASkB,SAAT,CAAmB6Q,oBAAnB,GAA0C,YAAW;AACnD,UAAIH,gBAAJ,EAAsBrQ,KAAtB,EAA6BQ,CAA7B,EAAgCC,GAAhC,EAAqC6P,QAArC,EAA+C3L,GAA/C,EAAoDsD,OAApD;AACAtD,YAAM,KAAKkH,SAAX;AACA5D,gBAAU,EAAV;AACA,WAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C6P,2BAAmB1L,IAAInE,CAAJ,CAAnB;AACAyH,gBAAQ9H,IAAR,CAAc,YAAW;AACvB,cAAI0H,IAAJ,EAAU0I,QAAV;AACA1I,iBAAOwI,iBAAiB/O,MAAxB;AACAiP,qBAAW,EAAX;AACA,eAAKvQ,KAAL,IAAc6H,IAAd,EAAoB;AAClByI,uBAAWzI,KAAK7H,KAAL,CAAX;AACAuQ,qBAASpQ,IAAT,CAAckQ,iBAAiBxL,OAAjB,CAAyB7D,mBAAzB,CAA6ChB,KAA7C,EAAoDsQ,QAApD,EAA8D,KAA9D,CAAd;AACD;AACD,iBAAOC,QAAP;AACD,SATY,EAAb;AAUD;AACD,aAAOtI,OAAP;AACD,KAlBD;;AAoBAxJ,aAASkB,SAAT,CAAmBuP,OAAnB,GAA6B,YAAW;AACtC,UAAI3K,IAAJ,EAAU/D,CAAV,EAAaC,GAAb,EAAkBkE,GAAlB,EAAuBsD,OAAvB;AACA,WAAK2D,iBAAL,CAAuB+C,OAAvB,CAA+B,UAAS9J,OAAT,EAAkB;AAC/C,eAAOA,QAAQgC,SAAR,CAAkBC,MAAlB,CAAyB,cAAzB,CAAP;AACD,OAFD;AAGA,WAAK0J,oBAAL;AACA7L,YAAM,KAAKmH,KAAX;AACA7D,gBAAU,EAAV;AACA,WAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C+D,eAAOI,IAAInE,CAAJ,CAAP;AACAyH,gBAAQ9H,IAAR,CAAa,KAAKsQ,YAAL,CAAkBlM,IAAlB,CAAb;AACD;AACD,aAAO0D,OAAP;AACD,KAbD;;AAeAxJ,aAASkB,SAAT,CAAmBqP,MAAnB,GAA4B,YAAW;AACrC,WAAKpD,iBAAL,CAAuB+C,OAAvB,CAA+B,UAAS9J,OAAT,EAAkB;AAC/C,eAAOA,QAAQgC,SAAR,CAAkBK,GAAlB,CAAsB,cAAtB,CAAP;AACD,OAFD;AAGA,aAAO,KAAKkJ,mBAAL,EAAP;AACD,KALD;;AAOA3R,aAASkB,SAAT,CAAmB6I,QAAnB,GAA8B,UAASC,IAAT,EAAe;AAC3C,UAAIiI,MAAJ,EAAYzP,CAAZ,EAAeT,CAAf,EAAkBC,GAAlB,EAAuBkQ,YAAvB,EAAqCC,YAArC,EAAmDC,IAAnD,EAAyDC,KAAzD;AACAH,qBAAe,CAAf;AACAC,qBAAe,GAAf;AACA,UAAInI,OAAO,CAAX,EAAc;AACZqI,gBAAQ,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,GAAzB,CAAR;AACA,aAAK7P,IAAIT,IAAI,CAAR,EAAWC,MAAMqQ,MAAMnQ,MAA5B,EAAoCH,IAAIC,GAAxC,EAA6CQ,IAAI,EAAET,CAAnD,EAAsD;AACpDqQ,iBAAOC,MAAM7P,CAAN,CAAP;AACAyP,mBAASzK,KAAK8K,GAAL,CAAS,KAAK3L,OAAL,CAAa1C,YAAtB,EAAoC,IAAIzB,CAAxC,IAA6C,EAAtD;AACA,cAAIwH,QAAQiI,MAAZ,EAAoB;AAClBC,2BAAelI,OAAOxC,KAAK8K,GAAL,CAAS,KAAK3L,OAAL,CAAa1C,YAAtB,EAAoC,IAAIzB,CAAxC,CAAtB;AACA2P,2BAAeC,IAAf;AACA;AACD;AACF;AACDF,uBAAe1K,KAAK+K,KAAL,CAAW,KAAKL,YAAhB,IAAgC,EAA/C;AACD;AACD,aAAO,aAAaA,YAAb,GAA4B,YAA5B,GAA2CC,YAAlD;AACD,KAlBD;;AAoBAnS,aAASkB,SAAT,CAAmB0J,2BAAnB,GAAiD,YAAW;AAC1D,UAAK,KAAKjE,OAAL,CAAazC,QAAb,IAAyB,IAA1B,IAAmC,KAAKgK,gBAAL,GAAwBhM,MAAxB,IAAkC,KAAKyE,OAAL,CAAazC,QAAtF,EAAgG;AAC9F,YAAI,KAAKgK,gBAAL,GAAwBhM,MAAxB,KAAmC,KAAKyE,OAAL,CAAazC,QAApD,EAA8D;AAC5D,eAAKvC,IAAL,CAAU,iBAAV,EAA6B,KAAK0L,KAAlC;AACD;AACD,eAAO,KAAKjH,OAAL,CAAagC,SAAb,CAAuBK,GAAvB,CAA2B,sBAA3B,CAAP;AACD,OALD,MAKO;AACL,eAAO,KAAKrC,OAAL,CAAagC,SAAb,CAAuBC,MAAvB,CAA8B,sBAA9B,CAAP;AACD;AACF,KATD;;AAWArI,aAASkB,SAAT,CAAmBgH,IAAnB,GAA0B,UAASC,CAAT,EAAY;AACpC,UAAIkF,KAAJ,EAAWmF,KAAX;AACA,UAAI,CAACrK,EAAE2H,YAAP,EAAqB;AACnB;AACD;AACD,WAAKnO,IAAL,CAAU,MAAV,EAAkBwG,CAAlB;AACAkF,cAAQlF,EAAE2H,YAAF,CAAezC,KAAvB;AACA,WAAK1L,IAAL,CAAU,YAAV,EAAwB0L,KAAxB;AACA,UAAIA,MAAMnL,MAAV,EAAkB;AAChBsQ,gBAAQrK,EAAE2H,YAAF,CAAe0C,KAAvB;AACA,YAAIA,SAASA,MAAMtQ,MAAf,IAA0BsQ,MAAM,CAAN,EAASC,gBAAT,IAA6B,IAA3D,EAAkE;AAChE,eAAKC,kBAAL,CAAwBF,KAAxB;AACD,SAFD,MAEO;AACL,eAAKG,WAAL,CAAiBtF,KAAjB;AACD;AACF;AACF,KAhBD;;AAkBArN,aAASkB,SAAT,CAAmB0H,KAAnB,GAA2B,UAAST,CAAT,EAAY;AACrC,UAAIqK,KAAJ,EAAWtM,GAAX;AACA,UAAI,CAACiC,KAAK,IAAL,GAAY,CAACjC,MAAMiC,EAAEyK,aAAT,KAA2B,IAA3B,GAAkC1M,IAAIsM,KAAtC,GAA8C,KAAK,CAA/D,GAAmE,KAAK,CAAzE,KAA+E,IAAnF,EAAyF;AACvF;AACD;AACD,WAAK7Q,IAAL,CAAU,OAAV,EAAmBwG,CAAnB;AACAqK,cAAQrK,EAAEyK,aAAF,CAAgBJ,KAAxB;AACA,UAAIA,MAAMtQ,MAAV,EAAkB;AAChB,eAAO,KAAKwQ,kBAAL,CAAwBF,KAAxB,CAAP;AACD;AACF,KAVD;;AAYAxS,aAASkB,SAAT,CAAmByR,WAAnB,GAAiC,UAAStF,KAAT,EAAgB;AAC/C,UAAIvH,IAAJ,EAAU/D,CAAV,EAAaC,GAAb,EAAkBwH,OAAlB;AACAA,gBAAU,EAAV;AACA,WAAKzH,IAAI,CAAJ,EAAOC,MAAMqL,MAAMnL,MAAxB,EAAgCH,IAAIC,GAApC,EAAyCD,GAAzC,EAA8C;AAC5C+D,eAAOuH,MAAMtL,CAAN,CAAP;AACAyH,gBAAQ9H,IAAR,CAAa,KAAK6N,OAAL,CAAazJ,IAAb,CAAb;AACD;AACD,aAAO0D,OAAP;AACD,KARD;;AAUAxJ,aAASkB,SAAT,CAAmBwR,kBAAnB,GAAwC,UAASF,KAAT,EAAgB;AACtD,UAAIK,KAAJ,EAAWC,IAAX,EAAiB/Q,CAAjB,EAAoBC,GAApB,EAAyBwH,OAAzB;AACAA,gBAAU,EAAV;AACA,WAAKzH,IAAI,CAAJ,EAAOC,MAAMwQ,MAAMtQ,MAAxB,EAAgCH,IAAIC,GAApC,EAAyCD,GAAzC,EAA8C;AAC5C+Q,eAAON,MAAMzQ,CAAN,CAAP;AACA,YAAK+Q,KAAKL,gBAAL,IAAyB,IAA1B,KAAoCI,QAAQC,KAAKL,gBAAL,EAA5C,CAAJ,EAA0E;AACxE,cAAII,MAAME,MAAV,EAAkB;AAChBvJ,oBAAQ9H,IAAR,CAAa,KAAK6N,OAAL,CAAauD,KAAKE,SAAL,EAAb,CAAb;AACD,WAFD,MAEO,IAAIH,MAAMI,WAAV,EAAuB;AAC5BzJ,oBAAQ9H,IAAR,CAAa,KAAKwR,sBAAL,CAA4BL,KAA5B,EAAmCA,MAAMhJ,IAAzC,CAAb;AACD,WAFM,MAEA;AACLL,oBAAQ9H,IAAR,CAAa,KAAK,CAAlB;AACD;AACF,SARD,MAQO,IAAIoR,KAAKE,SAAL,IAAkB,IAAtB,EAA4B;AACjC,cAAKF,KAAKK,IAAL,IAAa,IAAd,IAAuBL,KAAKK,IAAL,KAAc,MAAzC,EAAiD;AAC/C3J,oBAAQ9H,IAAR,CAAa,KAAK6N,OAAL,CAAauD,KAAKE,SAAL,EAAb,CAAb;AACD,WAFD,MAEO;AACLxJ,oBAAQ9H,IAAR,CAAa,KAAK,CAAlB;AACD;AACF,SANM,MAMA;AACL8H,kBAAQ9H,IAAR,CAAa,KAAK,CAAlB;AACD;AACF;AACD,aAAO8H,OAAP;AACD,KAxBD;;AA0BAxJ,aAASkB,SAAT,CAAmBgS,sBAAnB,GAA4C,UAASE,SAAT,EAAoBC,IAApB,EAA0B;AACpE,UAAIC,SAAJ,EAAeC,YAAf,EAA6BC,WAA7B;AACAF,kBAAYF,UAAUK,YAAV,EAAZ;AACAF,qBAAe,sBAASpI,KAAT,EAAgB;AAC7B,eAAO,OAAOuI,OAAP,KAAmB,WAAnB,IAAkCA,YAAY,IAA9C,GAAqD,OAAOA,QAAQC,GAAf,KAAuB,UAAvB,GAAoCD,QAAQC,GAAR,CAAYxI,KAAZ,CAApC,GAAyD,KAAK,CAAnH,GAAuH,KAAK,CAAnI;AACD,OAFD;AAGAqI,oBAAe,UAAStJ,KAAT,EAAgB;AAC7B,eAAO,YAAW;AAChB,iBAAOoJ,UAAUE,WAAV,CAAsB,UAASI,OAAT,EAAkB;AAC7C,gBAAIf,KAAJ,EAAW9Q,CAAX,EAAcC,GAAd;AACA,gBAAI4R,QAAQ1R,MAAR,GAAiB,CAArB,EAAwB;AACtB,mBAAKH,IAAI,CAAJ,EAAOC,MAAM4R,QAAQ1R,MAA1B,EAAkCH,IAAIC,GAAtC,EAA2CD,GAA3C,EAAgD;AAC9C8Q,wBAAQe,QAAQ7R,CAAR,CAAR;AACA,oBAAI8Q,MAAME,MAAV,EAAkB;AAChBF,wBAAM/M,IAAN,CAAW,UAASA,IAAT,EAAe;AACxB,wBAAIoE,MAAMvD,OAAN,CAAcrC,iBAAd,IAAmCwB,KAAK+D,IAAL,CAAUgK,SAAV,CAAoB,CAApB,EAAuB,CAAvB,MAA8B,GAArE,EAA0E;AACxE;AACD;AACD/N,yBAAKgO,QAAL,GAAgBT,OAAO,GAAP,GAAavN,KAAK+D,IAAlC;AACA,2BAAOK,MAAMqF,OAAN,CAAczJ,IAAd,CAAP;AACD,mBAND;AAOD,iBARD,MAQO,IAAI+M,MAAMI,WAAV,EAAuB;AAC5B/I,wBAAMgJ,sBAAN,CAA6BL,KAA7B,EAAoCQ,OAAO,GAAP,GAAaR,MAAMhJ,IAAvD;AACD;AACF;AACD2J;AACD;AACD,mBAAO,IAAP;AACD,WApBM,EAoBJD,YApBI,CAAP;AAqBD,SAtBD;AAuBD,OAxBa,CAwBX,IAxBW,CAAd;AAyBA,aAAOC,aAAP;AACD,KAhCD;;AAkCAxT,aAASkB,SAAT,CAAmB2E,MAAnB,GAA4B,UAASC,IAAT,EAAeC,IAAf,EAAqB;AAC/C,UAAID,KAAKkE,IAAL,GAAY,KAAKrD,OAAL,CAAatD,WAAb,GAA2B,IAA3B,GAAkC,IAAlD,EAAwD;AACtD,eAAO0C,KAAK,KAAKY,OAAL,CAAavB,cAAb,CAA4B8H,OAA5B,CAAoC,cAApC,EAAoD1F,KAAK+K,KAAL,CAAWzM,KAAKkE,IAAL,GAAY,IAAZ,GAAmB,KAA9B,IAAuC,GAA3F,EAAgGkD,OAAhG,CAAwG,iBAAxG,EAA2H,KAAKvG,OAAL,CAAatD,WAAxI,CAAL,CAAP;AACD,OAFD,MAEO,IAAI,CAACrD,SAAS+T,WAAT,CAAqBjO,IAArB,EAA2B,KAAKa,OAAL,CAAapC,aAAxC,CAAL,EAA6D;AAClE,eAAOwB,KAAK,KAAKY,OAAL,CAAatB,mBAAlB,CAAP;AACD,OAFM,MAEA,IAAK,KAAKsB,OAAL,CAAazC,QAAb,IAAyB,IAA1B,IAAmC,KAAKgK,gBAAL,GAAwBhM,MAAxB,IAAkC,KAAKyE,OAAL,CAAazC,QAAtF,EAAgG;AACrG6B,aAAK,KAAKY,OAAL,CAAahB,oBAAb,CAAkCuH,OAAlC,CAA0C,cAA1C,EAA0D,KAAKvG,OAAL,CAAazC,QAAvE,CAAL;AACA,eAAO,KAAKvC,IAAL,CAAU,kBAAV,EAA8BmE,IAA9B,CAAP;AACD,OAHM,MAGA;AACL,eAAO,KAAKa,OAAL,CAAad,MAAb,CAAoB9E,IAApB,CAAyB,IAAzB,EAA+B+E,IAA/B,EAAqCC,IAArC,CAAP;AACD;AACF,KAXD;;AAaA/F,aAASkB,SAAT,CAAmBqO,OAAnB,GAA6B,UAASzJ,IAAT,EAAe;AAC1CA,WAAKkL,MAAL,GAAc;AACZvF,kBAAU,CADE;AAEZwF,eAAOnL,KAAKkE,IAFA;AAGZ0B,mBAAW;AAHC,OAAd;AAKA,WAAK2B,KAAL,CAAW3L,IAAX,CAAgBoE,IAAhB;AACAA,WAAKuE,MAAL,GAAcrK,SAAS0O,KAAvB;AACA,WAAK/M,IAAL,CAAU,WAAV,EAAuBmE,IAAvB;AACA,WAAKkO,iBAAL,CAAuBlO,IAAvB;AACA,aAAO,KAAKD,MAAL,CAAYC,IAAZ,EAAmB,UAASoE,KAAT,EAAgB;AACxC,eAAO,UAASiB,KAAT,EAAgB;AACrB,cAAIA,KAAJ,EAAW;AACTrF,iBAAKqI,QAAL,GAAgB,KAAhB;AACAjE,kBAAM+J,gBAAN,CAAuB,CAACnO,IAAD,CAAvB,EAA+BqF,KAA/B;AACD,WAHD,MAGO;AACLrF,iBAAKqI,QAAL,GAAgB,IAAhB;AACA,gBAAIjE,MAAMvD,OAAN,CAAcjC,SAAlB,EAA6B;AAC3BwF,oBAAMgK,WAAN,CAAkBpO,IAAlB;AACD;AACF;AACD,iBAAOoE,MAAMU,2BAAN,EAAP;AACD,SAXD;AAYD,OAbwB,CAatB,IAbsB,CAAlB,CAAP;AAcD,KAxBD;;AA0BA5K,aAASkB,SAAT,CAAmBiT,YAAnB,GAAkC,UAAS9G,KAAT,EAAgB;AAChD,UAAIvH,IAAJ,EAAU/D,CAAV,EAAaC,GAAb;AACA,WAAKD,IAAI,CAAJ,EAAOC,MAAMqL,MAAMnL,MAAxB,EAAgCH,IAAIC,GAApC,EAAyCD,GAAzC,EAA8C;AAC5C+D,eAAOuH,MAAMtL,CAAN,CAAP;AACA,aAAKmS,WAAL,CAAiBpO,IAAjB;AACD;AACD,aAAO,IAAP;AACD,KAPD;;AASA9F,aAASkB,SAAT,CAAmBgT,WAAnB,GAAiC,UAASpO,IAAT,EAAe;AAC9C,UAAIA,KAAKuE,MAAL,KAAgBrK,SAAS0O,KAAzB,IAAkC5I,KAAKqI,QAAL,KAAkB,IAAxD,EAA8D;AAC5DrI,aAAKuE,MAAL,GAAcrK,SAASuO,MAAvB;AACA,YAAI,KAAK5H,OAAL,CAAalC,gBAAjB,EAAmC;AACjC,iBAAOyG,WAAa,UAAShB,KAAT,EAAgB;AAClC,mBAAO,YAAW;AAChB,qBAAOA,MAAMkK,YAAN,EAAP;AACD,aAFD;AAGD,WAJkB,CAIhB,IAJgB,CAAZ,EAII,CAJJ,CAAP;AAKD;AACF,OATD,MASO;AACL,cAAM,IAAI1M,KAAJ,CAAU,kFAAV,CAAN;AACD;AACF,KAbD;;AAeA1H,aAASkB,SAAT,CAAmBmT,eAAnB,GAAqC,EAArC;;AAEArU,aAASkB,SAAT,CAAmBoT,oBAAnB,GAA0C,KAA1C;;AAEAtU,aAASkB,SAAT,CAAmB8S,iBAAnB,GAAuC,UAASlO,IAAT,EAAe;AACpD,UAAI,KAAKa,OAAL,CAAapD,qBAAb,IAAsCuC,KAAKgC,IAAL,CAAUC,KAAV,CAAgB,SAAhB,CAAtC,IAAoEjC,KAAKkE,IAAL,IAAa,KAAKrD,OAAL,CAAanD,oBAAb,GAAoC,IAApC,GAA2C,IAAhI,EAAsI;AACpI,aAAK6Q,eAAL,CAAqB3S,IAArB,CAA0BoE,IAA1B;AACA,eAAOoF,WAAa,UAAShB,KAAT,EAAgB;AAClC,iBAAO,YAAW;AAChB,mBAAOA,MAAMqK,sBAAN,EAAP;AACD,WAFD;AAGD,SAJkB,CAIhB,IAJgB,CAAZ,EAII,CAJJ,CAAP;AAKD;AACF,KATD;;AAWAvU,aAASkB,SAAT,CAAmBqT,sBAAnB,GAA4C,YAAW;AACrD,UAAIzO,IAAJ;AACA,UAAI,KAAKwO,oBAAL,IAA6B,KAAKD,eAAL,CAAqBnS,MAArB,KAAgC,CAAjE,EAAoE;AAClE;AACD;AACD,WAAKoS,oBAAL,GAA4B,IAA5B;AACAxO,aAAO,KAAKuO,eAAL,CAAqBG,KAArB,EAAP;AACA,aAAO,KAAKC,eAAL,CAAqB3O,IAArB,EAA2B,KAAKa,OAAL,CAAalD,cAAxC,EAAwD,KAAKkD,OAAL,CAAajD,eAArE,EAAsF,KAAKiD,OAAL,CAAahD,eAAnG,EAAoH,IAApH,EAA2H,UAASuG,KAAT,EAAgB;AAChJ,eAAO,UAASY,OAAT,EAAkB;AACvBZ,gBAAMvI,IAAN,CAAW,WAAX,EAAwBmE,IAAxB,EAA8BgF,OAA9B;AACAZ,gBAAMoK,oBAAN,GAA6B,KAA7B;AACA,iBAAOpK,MAAMqK,sBAAN,EAAP;AACD,SAJD;AAKD,OANgI,CAM9H,IAN8H,CAA1H,CAAP;AAOD,KAdD;;AAgBAvU,aAASkB,SAAT,CAAmBsJ,UAAnB,GAAgC,UAAS1E,IAAT,EAAe;AAC7C,UAAIA,KAAKuE,MAAL,KAAgBrK,SAASsK,SAA7B,EAAwC;AACtC,aAAK0H,YAAL,CAAkBlM,IAAlB;AACD;AACD,WAAKuH,KAAL,GAAa7M,QAAQ,KAAK6M,KAAb,EAAoBvH,IAApB,CAAb;AACA,WAAKnE,IAAL,CAAU,aAAV,EAAyBmE,IAAzB;AACA,UAAI,KAAKuH,KAAL,CAAWnL,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,eAAO,KAAKP,IAAL,CAAU,OAAV,CAAP;AACD;AACF,KATD;;AAWA3B,aAASkB,SAAT,CAAmBwP,cAAnB,GAAoC,UAASgE,iBAAT,EAA4B;AAC9D,UAAI5O,IAAJ,EAAU/D,CAAV,EAAaC,GAAb,EAAkBkE,GAAlB;AACA,UAAIwO,qBAAqB,IAAzB,EAA+B;AAC7BA,4BAAoB,KAApB;AACD;AACDxO,YAAM,KAAKmH,KAAL,CAAW5M,KAAX,EAAN;AACA,WAAKsB,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C+D,eAAOI,IAAInE,CAAJ,CAAP;AACA,YAAI+D,KAAKuE,MAAL,KAAgBrK,SAASsK,SAAzB,IAAsCoK,iBAA1C,EAA6D;AAC3D,eAAKlK,UAAL,CAAgB1E,IAAhB;AACD;AACF;AACD,aAAO,IAAP;AACD,KAbD;;AAeA9F,aAASkB,SAAT,CAAmB8G,WAAnB,GAAiC,UAASlC,IAAT,EAAeiB,KAAf,EAAsBC,MAAtB,EAA8BhD,YAA9B,EAA4CnC,QAA5C,EAAsD;AACrF,aAAO,KAAK4S,eAAL,CAAqB3O,IAArB,EAA2BiB,KAA3B,EAAkCC,MAAlC,EAA0ChD,YAA1C,EAAwD,KAAxD,EAAgE,UAASkG,KAAT,EAAgB;AACrF,eAAO,UAASY,OAAT,EAAkB6J,MAAlB,EAA0B;AAC/B,cAAI7Q,cAAJ,EAAoB8Q,cAApB;AACA,cAAID,WAAW,IAAf,EAAqB;AACnB,mBAAO9S,SAASiE,IAAT,CAAP;AACD,WAFD,MAEO;AACLhC,6BAAiBoG,MAAMvD,OAAN,CAAc7C,cAA/B;AACA,gBAAIA,kBAAkB,IAAtB,EAA4B;AAC1BA,+BAAiBgC,KAAKgC,IAAtB;AACD;AACD8M,6BAAiBD,OAAOE,SAAP,CAAiB/Q,cAAjB,EAAiCoG,MAAMvD,OAAN,CAAc5C,aAA/C,CAAjB;AACA,gBAAID,mBAAmB,YAAnB,IAAmCA,mBAAmB,WAA1D,EAAuE;AACrE8Q,+BAAiB1U,YAAY4U,OAAZ,CAAoBhP,KAAKiP,OAAzB,EAAkCH,cAAlC,CAAjB;AACD;AACD,mBAAO/S,SAAS7B,SAASgV,aAAT,CAAuBJ,cAAvB,CAAT,CAAP;AACD;AACF,SAfD;AAgBD,OAjBqE,CAiBnE,IAjBmE,CAA/D,CAAP;AAkBD,KAnBD;;AAqBA5U,aAASkB,SAAT,CAAmBuT,eAAnB,GAAqC,UAAS3O,IAAT,EAAeiB,KAAf,EAAsBC,MAAtB,EAA8BhD,YAA9B,EAA4CiR,cAA5C,EAA4DpT,QAA5D,EAAsE;AACzG,UAAIqT,UAAJ;AACAA,mBAAa,IAAIC,UAAJ,EAAb;AACAD,iBAAWE,MAAX,GAAqB,UAASlL,KAAT,EAAgB;AACnC,eAAO,YAAW;AAChBpE,eAAKiP,OAAL,GAAeG,WAAWG,MAA1B;AACA,cAAIvP,KAAKgC,IAAL,KAAc,eAAlB,EAAmC;AACjC,gBAAIjG,YAAY,IAAhB,EAAsB;AACpBA,uBAASqT,WAAWG,MAApB;AACD;AACD;AACD;AACD,iBAAOnL,MAAMoL,sBAAN,CAA6BxP,IAA7B,EAAmCiB,KAAnC,EAA0CC,MAA1C,EAAkDhD,YAAlD,EAAgEiR,cAAhE,EAAgFpT,QAAhF,CAAP;AACD,SATD;AAUD,OAXmB,CAWjB,IAXiB,CAApB;AAYA,aAAOqT,WAAWK,aAAX,CAAyBzP,IAAzB,CAAP;AACD,KAhBD;;AAkBA9F,aAASkB,SAAT,CAAmBoU,sBAAnB,GAA4C,UAASxP,IAAT,EAAeiB,KAAf,EAAsBC,MAAtB,EAA8BhD,YAA9B,EAA4CiR,cAA5C,EAA4DpT,QAA5D,EAAsE2T,WAAtE,EAAmF;AAC7H,UAAIC,GAAJ;AACAA,YAAMnI,SAAS9G,aAAT,CAAuB,KAAvB,CAAN;AACA,UAAIgP,WAAJ,EAAiB;AACfC,YAAID,WAAJ,GAAkBA,WAAlB;AACD;AACDC,UAAIL,MAAJ,GAAc,UAASlL,KAAT,EAAgB;AAC5B,eAAO,YAAW;AAChB,cAAIwL,QAAJ;AACAA,qBAAW,kBAAS7T,QAAT,EAAmB;AAC5B,mBAAOA,SAAS,CAAT,CAAP;AACD,WAFD;AAGA,cAAK,OAAO8T,IAAP,KAAgB,WAAhB,IAA+BA,SAAS,IAAzC,IAAkDV,cAAtD,EAAsE;AACpES,uBAAW,kBAAS7T,QAAT,EAAmB;AAC5B,qBAAO8T,KAAKC,OAAL,CAAaH,GAAb,EAAkB,YAAW;AAClC,uBAAO5T,SAAS8T,KAAKE,MAAL,CAAY,IAAZ,EAAkB,aAAlB,CAAT,CAAP;AACD,eAFM,CAAP;AAGD,aAJD;AAKD;AACD,iBAAOH,SAAS,UAASI,WAAT,EAAsB;AACpC,gBAAInB,MAAJ,EAAYoB,GAAZ,EAAiB7P,GAAjB,EAAsBkD,IAAtB,EAA4BC,IAA5B,EAAkC2M,IAAlC,EAAwCC,UAAxC,EAAoDpL,SAApD;AACA/E,iBAAKiB,KAAL,GAAa0O,IAAI1O,KAAjB;AACAjB,iBAAKkB,MAAL,GAAcyO,IAAIzO,MAAlB;AACAiP,yBAAa/L,MAAMvD,OAAN,CAAcG,MAAd,CAAqB/F,IAArB,CAA0BmJ,KAA1B,EAAiCpE,IAAjC,EAAuCiB,KAAvC,EAA8CC,MAA9C,EAAsDhD,YAAtD,CAAb;AACA2Q,qBAASrH,SAAS9G,aAAT,CAAuB,QAAvB,CAAT;AACAuP,kBAAMpB,OAAOuB,UAAP,CAAkB,IAAlB,CAAN;AACAvB,mBAAO5N,KAAP,GAAekP,WAAWtO,QAA1B;AACAgN,mBAAO3N,MAAP,GAAgBiP,WAAWrO,SAA3B;AACA,gBAAIkO,cAAc,CAAlB,EAAqB;AACnBnB,qBAAO5N,KAAP,GAAekP,WAAWrO,SAA1B;AACA+M,qBAAO3N,MAAP,GAAgBiP,WAAWtO,QAA3B;AACD;AACD,oBAAQmO,WAAR;AACE,mBAAK,CAAL;AACEC,oBAAII,SAAJ,CAAcxB,OAAO5N,KAArB,EAA4B,CAA5B;AACAgP,oBAAIK,KAAJ,CAAU,CAAC,CAAX,EAAc,CAAd;AACA;AACF,mBAAK,CAAL;AACEL,oBAAII,SAAJ,CAAcxB,OAAO5N,KAArB,EAA4B4N,OAAO3N,MAAnC;AACA+O,oBAAIM,MAAJ,CAAW7O,KAAK8O,EAAhB;AACA;AACF,mBAAK,CAAL;AACEP,oBAAII,SAAJ,CAAc,CAAd,EAAiBxB,OAAO3N,MAAxB;AACA+O,oBAAIK,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd;AACA;AACF,mBAAK,CAAL;AACEL,oBAAIM,MAAJ,CAAW,MAAM7O,KAAK8O,EAAtB;AACAP,oBAAIK,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd;AACA;AACF,mBAAK,CAAL;AACEL,oBAAIM,MAAJ,CAAW,MAAM7O,KAAK8O,EAAtB;AACAP,oBAAII,SAAJ,CAAc,CAAd,EAAiB,CAACxB,OAAO3N,MAAzB;AACA;AACF,mBAAK,CAAL;AACE+O,oBAAIM,MAAJ,CAAW,MAAM7O,KAAK8O,EAAtB;AACAP,oBAAII,SAAJ,CAAcxB,OAAO5N,KAArB,EAA4B,CAAC4N,OAAO3N,MAApC;AACA+O,oBAAIK,KAAJ,CAAU,CAAC,CAAX,EAAc,CAAd;AACA;AACF,mBAAK,CAAL;AACEL,oBAAIM,MAAJ,CAAW,CAAC,GAAD,GAAO7O,KAAK8O,EAAvB;AACAP,oBAAII,SAAJ,CAAc,CAACxB,OAAO5N,KAAtB,EAA6B,CAA7B;AA5BJ;AA8BAzG,4BAAgByV,GAAhB,EAAqBN,GAArB,EAA0B,CAACvP,MAAM+P,WAAW7O,IAAlB,KAA2B,IAA3B,GAAkClB,GAAlC,GAAwC,CAAlE,EAAqE,CAACkD,OAAO6M,WAAW5O,IAAnB,KAA4B,IAA5B,GAAmC+B,IAAnC,GAA0C,CAA/G,EAAkH6M,WAAW3O,QAA7H,EAAuI2O,WAAW1O,SAAlJ,EAA6J,CAAC8B,OAAO4M,WAAWM,IAAnB,KAA4B,IAA5B,GAAmClN,IAAnC,GAA0C,CAAvM,EAA0M,CAAC2M,OAAOC,WAAWO,IAAnB,KAA4B,IAA5B,GAAmCR,IAAnC,GAA0C,CAApP,EAAuPC,WAAWtO,QAAlQ,EAA4QsO,WAAWrO,SAAvR;AACAiD,wBAAY8J,OAAOE,SAAP,CAAiB,WAAjB,CAAZ;AACA,gBAAIhT,YAAY,IAAhB,EAAsB;AACpB,qBAAOA,SAASgJ,SAAT,EAAoB8J,MAApB,CAAP;AACD;AACF,WAhDM,CAAP;AAiDD,SA7DD;AA8DD,OA/DY,CA+DV,IA/DU,CAAb;AAgEA,UAAI9S,YAAY,IAAhB,EAAsB;AACpB4T,YAAIgB,OAAJ,GAAc5U,QAAd;AACD;AACD,aAAO4T,IAAIxK,GAAJ,GAAUnF,KAAKiP,OAAtB;AACD,KA1ED;;AA4EA/U,aAASkB,SAAT,CAAmBkT,YAAnB,GAAkC,YAAW;AAC3C,UAAI5R,CAAJ,EAAOW,eAAP,EAAwBuT,gBAAxB,EAA0CC,WAA1C;AACAxT,wBAAkB,KAAKwD,OAAL,CAAaxD,eAA/B;AACAuT,yBAAmB,KAAKlI,iBAAL,GAAyBtM,MAA5C;AACAM,UAAIkU,gBAAJ;AACA,UAAIA,oBAAoBvT,eAAxB,EAAyC;AACvC;AACD;AACDwT,oBAAc,KAAKrI,cAAL,EAAd;AACA,UAAI,EAAEqI,YAAYzU,MAAZ,GAAqB,CAAvB,CAAJ,EAA+B;AAC7B;AACD;AACD,UAAI,KAAKyE,OAAL,CAAavD,cAAjB,EAAiC;AAC/B,eAAO,KAAKwT,YAAL,CAAkBD,YAAYlW,KAAZ,CAAkB,CAAlB,EAAqB0C,kBAAkBuT,gBAAvC,CAAlB,CAAP;AACD,OAFD,MAEO;AACL,eAAOlU,IAAIW,eAAX,EAA4B;AAC1B,cAAI,CAACwT,YAAYzU,MAAjB,EAAyB;AACvB;AACD;AACD,eAAK2U,WAAL,CAAiBF,YAAYnC,KAAZ,EAAjB;AACAhS;AACD;AACF;AACF,KAvBD;;AAyBAxC,aAASkB,SAAT,CAAmB2V,WAAnB,GAAiC,UAAS/Q,IAAT,EAAe;AAC9C,aAAO,KAAK8Q,YAAL,CAAkB,CAAC9Q,IAAD,CAAlB,CAAP;AACD,KAFD;;AAIA9F,aAASkB,SAAT,CAAmB0V,YAAnB,GAAkC,UAASvJ,KAAT,EAAgB;AAChD,UAAIvH,IAAJ,EAAU/D,CAAV,EAAaC,GAAb;AACA,WAAKD,IAAI,CAAJ,EAAOC,MAAMqL,MAAMnL,MAAxB,EAAgCH,IAAIC,GAApC,EAAyCD,GAAzC,EAA8C;AAC5C+D,eAAOuH,MAAMtL,CAAN,CAAP;AACA+D,aAAKwF,UAAL,GAAkB,IAAlB;AACAxF,aAAKuE,MAAL,GAAcrK,SAASsK,SAAvB;AACA,aAAK3I,IAAL,CAAU,YAAV,EAAwBmE,IAAxB;AACD;AACD,UAAI,KAAKa,OAAL,CAAavD,cAAjB,EAAiC;AAC/B,aAAKzB,IAAL,CAAU,oBAAV,EAAgC0L,KAAhC;AACD;AACD,aAAO,KAAKyJ,WAAL,CAAiBzJ,KAAjB,CAAP;AACD,KAZD;;AAcArN,aAASkB,SAAT,CAAmB6V,gBAAnB,GAAsC,UAASC,GAAT,EAAc;AAClD,UAAIlR,IAAJ,EAAUuH,KAAV;AACA,aAAOA,QAAS,YAAW;AACzB,YAAItL,CAAJ,EAAOC,GAAP,EAAYkE,GAAZ,EAAiBsD,OAAjB;AACAtD,cAAM,KAAKmH,KAAX;AACA7D,kBAAU,EAAV;AACA,aAAKzH,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C+D,iBAAOI,IAAInE,CAAJ,CAAP;AACA,cAAI+D,KAAKkR,GAAL,KAAaA,GAAjB,EAAsB;AACpBxN,oBAAQ9H,IAAR,CAAaoE,IAAb;AACD;AACF;AACD,eAAO0D,OAAP;AACD,OAXc,CAWZzI,IAXY,CAWP,IAXO,CAAf;AAYD,KAdD;;AAgBAf,aAASkB,SAAT,CAAmB8Q,YAAnB,GAAkC,UAASlM,IAAT,EAAe;AAC/C,UAAImR,WAAJ,EAAiBC,YAAjB,EAA+BnV,CAA/B,EAAkCgH,CAAlC,EAAqC/G,GAArC,EAA0CiH,IAA1C,EAAgD/C,GAAhD;AACA,UAAIJ,KAAKuE,MAAL,KAAgBrK,SAASsK,SAA7B,EAAwC;AACtC4M,uBAAe,KAAKH,gBAAL,CAAsBjR,KAAKkR,GAA3B,CAAf;AACA,aAAKjV,IAAI,CAAJ,EAAOC,MAAMkV,aAAahV,MAA/B,EAAuCH,IAAIC,GAA3C,EAAgDD,GAAhD,EAAqD;AACnDkV,wBAAcC,aAAanV,CAAb,CAAd;AACAkV,sBAAY5M,MAAZ,GAAqBrK,SAASmX,QAA9B;AACD;AACDrR,aAAKkR,GAAL,CAASI,KAAT;AACA,aAAKrO,IAAI,CAAJ,EAAOE,OAAOiO,aAAahV,MAAhC,EAAwC6G,IAAIE,IAA5C,EAAkDF,GAAlD,EAAuD;AACrDkO,wBAAcC,aAAanO,CAAb,CAAd;AACA,eAAKpH,IAAL,CAAU,UAAV,EAAsBsV,WAAtB;AACD;AACD,YAAI,KAAKtQ,OAAL,CAAavD,cAAjB,EAAiC;AAC/B,eAAKzB,IAAL,CAAU,kBAAV,EAA8BuV,YAA9B;AACD;AACF,OAdD,MAcO,IAAI,CAAChR,MAAMJ,KAAKuE,MAAZ,MAAwBrK,SAAS0O,KAAjC,IAA0CxI,QAAQlG,SAASuO,MAA/D,EAAuE;AAC5EzI,aAAKuE,MAAL,GAAcrK,SAASmX,QAAvB;AACA,aAAKxV,IAAL,CAAU,UAAV,EAAsBmE,IAAtB;AACA,YAAI,KAAKa,OAAL,CAAavD,cAAjB,EAAiC;AAC/B,eAAKzB,IAAL,CAAU,kBAAV,EAA8B,CAACmE,IAAD,CAA9B;AACD;AACF;AACD,UAAI,KAAKa,OAAL,CAAalC,gBAAjB,EAAmC;AACjC,eAAO,KAAK2P,YAAL,EAAP;AACD;AACF,KA1BD;;AA4BAxR,oBAAgB,yBAAW;AACzB,UAAIhB,IAAJ,EAAUyV,MAAV;AACAA,eAASpV,UAAU,CAAV,CAAT,EAAuBL,OAAO,KAAKK,UAAUC,MAAf,GAAwBzB,MAAMM,IAAN,CAAWkB,SAAX,EAAsB,CAAtB,CAAxB,GAAmD,EAAjF;AACA,UAAI,OAAOoV,MAAP,KAAkB,UAAtB,EAAkC;AAChC,eAAOA,OAAOlV,KAAP,CAAa,IAAb,EAAmBP,IAAnB,CAAP;AACD;AACD,aAAOyV,MAAP;AACD,KAPD;;AASArX,aAASkB,SAAT,CAAmBoW,UAAnB,GAAgC,UAASxR,IAAT,EAAe;AAC7C,aAAO,KAAKgR,WAAL,CAAiB,CAAChR,IAAD,CAAjB,CAAP;AACD,KAFD;;AAIA9F,aAASkB,SAAT,CAAmB4V,WAAnB,GAAiC,UAASzJ,KAAT,EAAgB;AAC/C,UAAIkK,WAAJ,EAAiBC,YAAjB,EAA+B1R,IAA/B,EAAqC2R,QAArC,EAA+CC,WAA/C,EAA4DC,UAA5D,EAAwEC,WAAxE,EAAqFxT,OAArF,EAA8F5B,CAA9F,EAAiGqV,KAAjG,EAAwGC,SAAxG,EAAmHC,SAAnH,EAA8HhW,CAA9H,EAAiIgH,CAAjI,EAAoIlI,GAApI,EAAyImI,CAAzI,EAA4IhH,GAA5I,EAAiJiH,IAAjJ,EAAuJC,IAAvJ,EAA6J8O,IAA7J,EAAmKC,CAAnK,EAAsKjV,MAAtK,EAA8KkV,CAA9K,EAAiLb,MAAjL,EAAyLc,WAAzL,EAAsMjS,GAAtM,EAA2MkD,IAA3M,EAAiNC,IAAjN,EAAuN2M,IAAvN,EAA6NoC,IAA7N,EAAmOC,IAAnO,EAAyOC,QAAzO,EAAmP9O,OAAnP,EAA4P+O,cAA5P,EAA4QxV,GAA5Q,EAAiR6I,KAAjR,EAAwRoL,GAAxR;AACAA,YAAM,IAAIwB,cAAJ,EAAN;AACA,WAAKzW,IAAI,CAAJ,EAAOC,MAAMqL,MAAMnL,MAAxB,EAAgCH,IAAIC,GAApC,EAAyCD,GAAzC,EAA8C;AAC5C+D,eAAOuH,MAAMtL,CAAN,CAAP;AACA+D,aAAKkR,GAAL,GAAWA,GAAX;AACD;AACDhU,eAASJ,cAAc,KAAK+D,OAAL,CAAa3D,MAA3B,EAAmCqK,KAAnC,CAAT;AACAtK,YAAMH,cAAc,KAAK+D,OAAL,CAAa5D,GAA3B,EAAgCsK,KAAhC,CAAN;AACA2J,UAAIyB,IAAJ,CAASzV,MAAT,EAAiBD,GAAjB,EAAsB,IAAtB;AACAiU,UAAI9T,OAAJ,GAAcN,cAAc,KAAK+D,OAAL,CAAazD,OAA3B,EAAoCmK,KAApC,CAAd;AACA2J,UAAI/T,eAAJ,GAAsB,CAAC,CAAC,KAAK0D,OAAL,CAAa1D,eAArC;AACAqV,iBAAW,IAAX;AACAZ,oBAAe,UAASxN,KAAT,EAAgB;AAC7B,eAAO,YAAW;AAChB,cAAInB,CAAJ,EAAOE,IAAP,EAAaO,OAAb;AACAA,oBAAU,EAAV;AACA,eAAKT,IAAI,CAAJ,EAAOE,OAAOoE,MAAMnL,MAAzB,EAAiC6G,IAAIE,IAArC,EAA2CF,GAA3C,EAAgD;AAC9CjD,mBAAOuH,MAAMtE,CAAN,CAAP;AACAS,oBAAQ9H,IAAR,CAAawI,MAAM+J,gBAAN,CAAuB5G,KAAvB,EAA8BiL,YAAYpO,MAAMvD,OAAN,CAAcrB,iBAAd,CAAgC4H,OAAhC,CAAwC,gBAAxC,EAA0D8J,IAAI3M,MAA9D,CAA1C,EAAiH2M,GAAjH,CAAb;AACD;AACD,iBAAOxN,OAAP;AACD,SARD;AASD,OAVa,CAUX,IAVW,CAAd;AAWA+O,uBAAkB,UAASrO,KAAT,EAAgB;AAChC,eAAO,UAAS/B,CAAT,EAAY;AACjB,cAAIuQ,gBAAJ,EAAsB3P,CAAtB,EAAyBC,CAAzB,EAA4BC,IAA5B,EAAkCC,IAAlC,EAAwC8O,IAAxC,EAA8CC,CAA9C,EAAiDxM,QAAjD,EAA2DjC,OAA3D;AACA,cAAIrB,KAAK,IAAT,EAAe;AACbsD,uBAAW,MAAMtD,EAAEwQ,MAAR,GAAiBxQ,EAAE8I,KAA9B;AACA,iBAAKlI,IAAI,CAAJ,EAAOE,OAAOoE,MAAMnL,MAAzB,EAAiC6G,IAAIE,IAArC,EAA2CF,GAA3C,EAAgD;AAC9CjD,qBAAOuH,MAAMtE,CAAN,CAAP;AACAjD,mBAAKkL,MAAL,GAAc;AACZvF,0BAAUA,QADE;AAEZwF,uBAAO9I,EAAE8I,KAFG;AAGZvF,2BAAWvD,EAAEwQ;AAHD,eAAd;AAKD;AACF,WAVD,MAUO;AACLD,+BAAmB,IAAnB;AACAjN,uBAAW,GAAX;AACA,iBAAKzC,IAAI,CAAJ,EAAOE,OAAOmE,MAAMnL,MAAzB,EAAiC8G,IAAIE,IAArC,EAA2CF,GAA3C,EAAgD;AAC9ClD,qBAAOuH,MAAMrE,CAAN,CAAP;AACA,kBAAI,EAAElD,KAAKkL,MAAL,CAAYvF,QAAZ,KAAyB,GAAzB,IAAgC3F,KAAKkL,MAAL,CAAYtF,SAAZ,KAA0B5F,KAAKkL,MAAL,CAAYC,KAAxE,CAAJ,EAAoF;AAClFyH,mCAAmB,KAAnB;AACD;AACD5S,mBAAKkL,MAAL,CAAYvF,QAAZ,GAAuBA,QAAvB;AACA3F,mBAAKkL,MAAL,CAAYtF,SAAZ,GAAwB5F,KAAKkL,MAAL,CAAYC,KAApC;AACD;AACD,gBAAIyH,gBAAJ,EAAsB;AACpB;AACD;AACF;AACDlP,oBAAU,EAAV;AACA,eAAKyO,IAAI,CAAJ,EAAOD,OAAO3K,MAAMnL,MAAzB,EAAiC+V,IAAID,IAArC,EAA2CC,GAA3C,EAAgD;AAC9CnS,mBAAOuH,MAAM4K,CAAN,CAAP;AACAzO,oBAAQ9H,IAAR,CAAawI,MAAMvI,IAAN,CAAW,gBAAX,EAA6BmE,IAA7B,EAAmC2F,QAAnC,EAA6C3F,KAAKkL,MAAL,CAAYtF,SAAzD,CAAb;AACD;AACD,iBAAOlC,OAAP;AACD,SAjCD;AAkCD,OAnCgB,CAmCd,IAnCc,CAAjB;AAoCAwN,UAAI5B,MAAJ,GAAc,UAASlL,KAAT,EAAgB;AAC5B,eAAO,UAAS/B,CAAT,EAAY;AACjB,cAAIyQ,MAAJ,EAAY1S,GAAZ;AACA,cAAImH,MAAM,CAAN,EAAShD,MAAT,KAAoBrK,SAASmX,QAAjC,EAA2C;AACzC;AACD;AACD,cAAIH,IAAI6B,UAAJ,KAAmB,CAAvB,EAA0B;AACxB;AACD;AACDP,qBAAWtB,IAAI8B,YAAf;AACA,cAAI9B,IAAI+B,iBAAJ,CAAsB,cAAtB,KAAyC,CAAC/B,IAAI+B,iBAAJ,CAAsB,cAAtB,EAAsCpI,OAAtC,CAA8C,kBAA9C,CAA9C,EAAiH;AAC/G,gBAAI;AACF2H,yBAAWU,KAAKC,KAAL,CAAWX,QAAX,CAAX;AACD,aAFD,CAEE,OAAOM,MAAP,EAAe;AACfzQ,kBAAIyQ,MAAJ;AACAN,yBAAW,oCAAX;AACD;AACF;AACDC;AACA,cAAI,EAAG,QAAQrS,MAAM8Q,IAAI3M,MAAlB,KAA6BnE,MAAM,GAAtC,CAAJ,EAAiD;AAC/C,mBAAOwR,aAAP;AACD,WAFD,MAEO;AACL,mBAAOxN,MAAMgP,SAAN,CAAgB7L,KAAhB,EAAuBiL,QAAvB,EAAiCnQ,CAAjC,CAAP;AACD;AACF,SAvBD;AAwBD,OAzBY,CAyBV,IAzBU,CAAb;AA0BA6O,UAAIP,OAAJ,GAAe,UAASvM,KAAT,EAAgB;AAC7B,eAAO,YAAW;AAChB,cAAImD,MAAM,CAAN,EAAShD,MAAT,KAAoBrK,SAASmX,QAAjC,EAA2C;AACzC;AACD;AACD,iBAAOO,aAAP;AACD,SALD;AAMD,OAPa,CAOX,IAPW,CAAd;AAQAS,oBAAc,CAACjS,MAAM8Q,IAAIhG,MAAX,KAAsB,IAAtB,GAA6B9K,GAA7B,GAAmC8Q,GAAjD;AACAmB,kBAAYgB,UAAZ,GAAyBZ,cAAzB;AACAnU,gBAAU;AACR,kBAAU,kBADF;AAER,yBAAiB,UAFT;AAGR,4BAAoB;AAHZ,OAAV;AAKA,UAAI,KAAKuC,OAAL,CAAavC,OAAjB,EAA0B;AACxBzB,eAAOyB,OAAP,EAAgB,KAAKuC,OAAL,CAAavC,OAA7B;AACD;AACD,WAAKuT,UAAL,IAAmBvT,OAAnB,EAA4B;AAC1BwT,sBAAcxT,QAAQuT,UAAR,CAAd;AACA,YAAIC,WAAJ,EAAiB;AACfZ,cAAIoC,gBAAJ,CAAqBzB,UAArB,EAAiCC,WAAjC;AACD;AACF;AACDH,iBAAW,IAAI4B,QAAJ,EAAX;AACA,UAAI,KAAK1S,OAAL,CAAaxC,MAAjB,EAAyB;AACvBiF,eAAO,KAAKzC,OAAL,CAAaxC,MAApB;AACA,aAAKtD,GAAL,IAAYuI,IAAZ,EAAkB;AAChBwC,kBAAQxC,KAAKvI,GAAL,CAAR;AACA4W,mBAAS6B,MAAT,CAAgBzY,GAAhB,EAAqB+K,KAArB;AACD;AACF;AACD,WAAK7C,IAAI,CAAJ,EAAOE,OAAOoE,MAAMnL,MAAzB,EAAiC6G,IAAIE,IAArC,EAA2CF,GAA3C,EAAgD;AAC9CjD,eAAOuH,MAAMtE,CAAN,CAAP;AACA,aAAKpH,IAAL,CAAU,SAAV,EAAqBmE,IAArB,EAA2BkR,GAA3B,EAAgCS,QAAhC;AACD;AACD,UAAI,KAAK9Q,OAAL,CAAavD,cAAjB,EAAiC;AAC/B,aAAKzB,IAAL,CAAU,iBAAV,EAA6B0L,KAA7B,EAAoC2J,GAApC,EAAyCS,QAAzC;AACD;AACD,UAAI,KAAKrR,OAAL,CAAa2I,OAAb,KAAyB,MAA7B,EAAqC;AACnC1F,eAAO,KAAKjD,OAAL,CAAauD,gBAAb,CAA8B,iCAA9B,CAAP;AACA,aAAKX,IAAI,CAAJ,EAAOE,OAAOG,KAAKnH,MAAxB,EAAgC8G,IAAIE,IAApC,EAA0CF,GAA1C,EAA+C;AAC7C6O,kBAAQxO,KAAKL,CAAL,CAAR;AACA8O,sBAAYD,MAAMhK,YAAN,CAAmB,MAAnB,CAAZ;AACAkK,sBAAYF,MAAMhK,YAAN,CAAmB,MAAnB,CAAZ;AACA,cAAIgK,MAAM9I,OAAN,KAAkB,QAAlB,IAA8B8I,MAAM0B,YAAN,CAAmB,UAAnB,CAAlC,EAAkE;AAChEvD,mBAAO6B,MAAMlR,OAAb;AACA,iBAAKsR,IAAI,CAAJ,EAAOD,OAAOhC,KAAK9T,MAAxB,EAAgC+V,IAAID,IAApC,EAA0CC,GAA1C,EAA+C;AAC7CZ,uBAASrB,KAAKiC,CAAL,CAAT;AACA,kBAAIZ,OAAOmC,QAAX,EAAqB;AACnB/B,yBAAS6B,MAAT,CAAgBxB,SAAhB,EAA2BT,OAAOzL,KAAlC;AACD;AACF;AACF,WARD,MAQO,IAAI,CAACmM,SAAD,IAAe,CAACK,OAAOL,UAAU0B,WAAV,EAAR,MAAqC,UAArC,IAAmDrB,SAAS,OAA3E,IAAuFP,MAAM6B,OAAjG,EAA0G;AAC/GjC,qBAAS6B,MAAT,CAAgBxB,SAAhB,EAA2BD,MAAMjM,KAAjC;AACD;AACF;AACF;AACD2L,oBAAc,CAAd;AACA/N,gBAAU,EAAV;AACA,WAAKhH,IAAI0V,IAAI,CAAR,EAAWG,OAAOhL,MAAMnL,MAAN,GAAe,CAAtC,EAAyC,KAAKmW,IAAL,GAAYH,KAAKG,IAAjB,GAAwBH,KAAKG,IAAtE,EAA4E7V,IAAI,KAAK6V,IAAL,GAAY,EAAEH,CAAd,GAAkB,EAAEA,CAApG,EAAuG;AACrGV,uBAAgB,UAAStN,KAAT,EAAgB;AAC9B,iBAAO,UAASpE,IAAT,EAAexC,SAAf,EAA0BqW,QAA1B,EAAoC;AACzC,mBAAO,UAASC,eAAT,EAA0B;AAC/BnC,uBAAS6B,MAAT,CAAgBhW,SAAhB,EAA2BsW,eAA3B,EAA4CD,QAA5C;AACA,kBAAI,EAAEpC,WAAF,KAAkBlK,MAAMnL,MAA5B,EAAoC;AAClC,uBAAOgI,MAAM2P,aAAN,CAAoB7C,GAApB,EAAyBS,QAAzB,EAAmCpK,KAAnC,CAAP;AACD;AACF,aALD;AAMD,WAPD;AAQD,SATc,CASZ,IATY,CAAf;AAUA7D,gBAAQ9H,IAAR,CAAa,KAAKiF,OAAL,CAAakB,aAAb,CAA2B9G,IAA3B,CAAgC,IAAhC,EAAsCsM,MAAM7K,CAAN,CAAtC,EAAgDgV,aAAanK,MAAM7K,CAAN,CAAb,EAAuB,KAAK0O,aAAL,CAAmB1O,CAAnB,CAAvB,EAA8C,KAAKoH,eAAL,CAAqB9D,KAAK+D,IAA1B,EAAgC/D,IAAhC,CAA9C,CAAhD,CAAb;AACD;AACD,aAAO0D,OAAP;AACD,KAhKD;;AAkKAxJ,aAASkB,SAAT,CAAmB2Y,aAAnB,GAAmC,UAAS7C,GAAT,EAAcS,QAAd,EAAwBpK,KAAxB,EAA+B;AAChE,aAAO2J,IAAI8C,IAAJ,CAASrC,QAAT,CAAP;AACD,KAFD;;AAIAzX,aAASkB,SAAT,CAAmBgY,SAAnB,GAA+B,UAAS7L,KAAT,EAAgByL,YAAhB,EAA8B3Q,CAA9B,EAAiC;AAC9D,UAAIrC,IAAJ,EAAU/D,CAAV,EAAaC,GAAb;AACA,WAAKD,IAAI,CAAJ,EAAOC,MAAMqL,MAAMnL,MAAxB,EAAgCH,IAAIC,GAApC,EAAyCD,GAAzC,EAA8C;AAC5C+D,eAAOuH,MAAMtL,CAAN,CAAP;AACA+D,aAAKuE,MAAL,GAAcrK,SAAS+Z,OAAvB;AACA,aAAKpY,IAAL,CAAU,SAAV,EAAqBmE,IAArB,EAA2BgT,YAA3B,EAAyC3Q,CAAzC;AACA,aAAKxG,IAAL,CAAU,UAAV,EAAsBmE,IAAtB;AACD;AACD,UAAI,KAAKa,OAAL,CAAavD,cAAjB,EAAiC;AAC/B,aAAKzB,IAAL,CAAU,iBAAV,EAA6B0L,KAA7B,EAAoCyL,YAApC,EAAkD3Q,CAAlD;AACA,aAAKxG,IAAL,CAAU,kBAAV,EAA8B0L,KAA9B;AACD;AACD,UAAI,KAAK1G,OAAL,CAAalC,gBAAjB,EAAmC;AACjC,eAAO,KAAK2P,YAAL,EAAP;AACD;AACF,KAfD;;AAiBApU,aAASkB,SAAT,CAAmB+S,gBAAnB,GAAsC,UAAS5G,KAAT,EAAgBjC,OAAhB,EAAyB4L,GAAzB,EAA8B;AAClE,UAAIlR,IAAJ,EAAU/D,CAAV,EAAaC,GAAb;AACA,WAAKD,IAAI,CAAJ,EAAOC,MAAMqL,MAAMnL,MAAxB,EAAgCH,IAAIC,GAApC,EAAyCD,GAAzC,EAA8C;AAC5C+D,eAAOuH,MAAMtL,CAAN,CAAP;AACA+D,aAAKuE,MAAL,GAAcrK,SAASga,KAAvB;AACA,aAAKrY,IAAL,CAAU,OAAV,EAAmBmE,IAAnB,EAAyBsF,OAAzB,EAAkC4L,GAAlC;AACA,aAAKrV,IAAL,CAAU,UAAV,EAAsBmE,IAAtB;AACD;AACD,UAAI,KAAKa,OAAL,CAAavD,cAAjB,EAAiC;AAC/B,aAAKzB,IAAL,CAAU,eAAV,EAA2B0L,KAA3B,EAAkCjC,OAAlC,EAA2C4L,GAA3C;AACA,aAAKrV,IAAL,CAAU,kBAAV,EAA8B0L,KAA9B;AACD;AACD,UAAI,KAAK1G,OAAL,CAAalC,gBAAjB,EAAmC;AACjC,eAAO,KAAK2P,YAAL,EAAP;AACD;AACF,KAfD;;AAiBA,WAAOpU,QAAP;AAED,GAp5CU,CAo5CRC,OAp5CQ,CAAX;;AAs5CAD,WAASiN,OAAT,GAAmB,OAAnB;;AAEAjN,WAAS2G,OAAT,GAAmB,EAAnB;;AAEA3G,WAAS2N,iBAAT,GAA6B,UAASvH,OAAT,EAAkB;AAC7C,QAAIA,QAAQyH,YAAR,CAAqB,IAArB,CAAJ,EAAgC;AAC9B,aAAO7N,SAAS2G,OAAT,CAAiBxG,SAASiG,QAAQyH,YAAR,CAAqB,IAArB,CAAT,CAAjB,CAAP;AACD,KAFD,MAEO;AACL,aAAO,KAAK,CAAZ;AACD;AACF,GAND;;AAQA7N,WAAS0N,SAAT,GAAqB,EAArB;;AAEA1N,WAASia,UAAT,GAAsB,UAAS7T,OAAT,EAAkB;AACtC,QAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;AAC/BA,gBAAUkH,SAASC,aAAT,CAAuBnH,OAAvB,CAAV;AACD;AACD,QAAI,CAACA,WAAW,IAAX,GAAkBA,QAAQqH,QAA1B,GAAqC,KAAK,CAA3C,KAAiD,IAArD,EAA2D;AACzD,YAAM,IAAI/F,KAAJ,CAAU,gNAAV,CAAN;AACD;AACD,WAAOtB,QAAQqH,QAAf;AACD,GARD;;AAUAzN,WAASka,YAAT,GAAwB,IAAxB;;AAEAla,WAASma,QAAT,GAAoB,YAAW;AAC7B,QAAIC,aAAJ,EAAmB3M,QAAnB,EAA6B4M,SAA7B,EAAwCtY,CAAxC,EAA2CC,GAA3C,EAAgDwH,OAAhD;AACA,QAAI8D,SAAS3D,gBAAb,EAA+B;AAC7B0Q,kBAAY/M,SAAS3D,gBAAT,CAA0B,WAA1B,CAAZ;AACD,KAFD,MAEO;AACL0Q,kBAAY,EAAZ;AACAD,sBAAgB,uBAAS3I,QAAT,EAAmB;AACjC,YAAIC,EAAJ,EAAQ3P,CAAR,EAAWC,GAAX,EAAgBwH,OAAhB;AACAA,kBAAU,EAAV;AACA,aAAKzH,IAAI,CAAJ,EAAOC,MAAMyP,SAASvP,MAA3B,EAAmCH,IAAIC,GAAvC,EAA4CD,GAA5C,EAAiD;AAC/C2P,eAAKD,SAAS1P,CAAT,CAAL;AACA,cAAI,qBAAqBwE,IAArB,CAA0BmL,GAAGrL,SAA7B,CAAJ,EAA6C;AAC3CmD,oBAAQ9H,IAAR,CAAa2Y,UAAU3Y,IAAV,CAAegQ,EAAf,CAAb;AACD,WAFD,MAEO;AACLlI,oBAAQ9H,IAAR,CAAa,KAAK,CAAlB;AACD;AACF;AACD,eAAO8H,OAAP;AACD,OAZD;AAaA4Q,oBAAc9M,SAAShH,oBAAT,CAA8B,KAA9B,CAAd;AACA8T,oBAAc9M,SAAShH,oBAAT,CAA8B,MAA9B,CAAd;AACD;AACDkD,cAAU,EAAV;AACA,SAAKzH,IAAI,CAAJ,EAAOC,MAAMqY,UAAUnY,MAA5B,EAAoCH,IAAIC,GAAxC,EAA6CD,GAA7C,EAAkD;AAChD0L,iBAAW4M,UAAUtY,CAAV,CAAX;AACA,UAAI/B,SAAS2N,iBAAT,CAA2BF,QAA3B,MAAyC,KAA7C,EAAoD;AAClDjE,gBAAQ9H,IAAR,CAAa,IAAI1B,QAAJ,CAAayN,QAAb,CAAb;AACD,OAFD,MAEO;AACLjE,gBAAQ9H,IAAR,CAAa,KAAK,CAAlB;AACD;AACF;AACD,WAAO8H,OAAP;AACD,GAhCD;;AAkCAxJ,WAASsa,mBAAT,GAA+B,CAAC,gCAAD,CAA/B;;AAEAta,WAAS4N,kBAAT,GAA8B,YAAW;AACvC,QAAI2M,cAAJ,EAAoBxY,CAApB,EAAuBC,GAAvB,EAA4BkE,GAA5B,EAAiCsU,KAAjC;AACAD,qBAAiB,IAAjB;AACA,QAAI9K,OAAOgL,IAAP,IAAehL,OAAO0F,UAAtB,IAAoC1F,OAAOiL,QAA3C,IAAuDjL,OAAOkL,IAA9D,IAAsElL,OAAO4J,QAA7E,IAAyF/L,SAASC,aAAtG,EAAqH;AACnH,UAAI,EAAE,eAAeD,SAAS9G,aAAT,CAAuB,GAAvB,CAAjB,CAAJ,EAAmD;AACjD+T,yBAAiB,KAAjB;AACD,OAFD,MAEO;AACLrU,cAAMlG,SAASsa,mBAAf;AACA,aAAKvY,IAAI,CAAJ,EAAOC,MAAMkE,IAAIhE,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1CyY,kBAAQtU,IAAInE,CAAJ,CAAR;AACA,cAAIyY,MAAMjU,IAAN,CAAWqU,UAAUC,SAArB,CAAJ,EAAqC;AACnCN,6BAAiB,KAAjB;AACA;AACD;AACF;AACF;AACF,KAbD,MAaO;AACLA,uBAAiB,KAAjB;AACD;AACD,WAAOA,cAAP;AACD,GApBD;;AAsBAva,WAASgV,aAAT,GAAyB,UAAS8F,OAAT,EAAkB;AACzC,QAAIC,EAAJ,EAAQC,UAAR,EAAoBxY,CAApB,EAAuByY,EAAvB,EAA2BlZ,CAA3B,EAA8BmZ,UAA9B,EAA0ChV,GAA1C;AACA8U,iBAAaG,KAAKL,QAAQM,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAL,CAAb;AACAF,iBAAaJ,QAAQM,KAAR,CAAc,GAAd,EAAmB,CAAnB,EAAsBA,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,EAAoCA,KAApC,CAA0C,GAA1C,EAA+C,CAA/C,CAAb;AACAL,SAAK,IAAIM,WAAJ,CAAgBL,WAAW9Y,MAA3B,CAAL;AACA+Y,SAAK,IAAIK,UAAJ,CAAeP,EAAf,CAAL;AACA,SAAKvY,IAAIT,IAAI,CAAR,EAAWmE,MAAM8U,WAAW9Y,MAAjC,EAAyC,KAAKgE,GAAL,GAAWnE,KAAKmE,GAAhB,GAAsBnE,KAAKmE,GAApE,EAAyE1D,IAAI,KAAK0D,GAAL,GAAW,EAAEnE,CAAb,GAAiB,EAAEA,CAAhG,EAAmG;AACjGkZ,SAAGzY,CAAH,IAAQwY,WAAWO,UAAX,CAAsB/Y,CAAtB,CAAR;AACD;AACD,WAAO,IAAImY,IAAJ,CAAS,CAACI,EAAD,CAAT,EAAe;AACpBjT,YAAMoT;AADc,KAAf,CAAP;AAGD,GAZD;;AAcA1a,YAAU,iBAASgb,IAAT,EAAeC,YAAf,EAA6B;AACrC,QAAI3I,IAAJ,EAAU/Q,CAAV,EAAaC,GAAb,EAAkBwH,OAAlB;AACAA,cAAU,EAAV;AACA,SAAKzH,IAAI,CAAJ,EAAOC,MAAMwZ,KAAKtZ,MAAvB,EAA+BH,IAAIC,GAAnC,EAAwCD,GAAxC,EAA6C;AAC3C+Q,aAAO0I,KAAKzZ,CAAL,CAAP;AACA,UAAI+Q,SAAS2I,YAAb,EAA2B;AACzBjS,gBAAQ9H,IAAR,CAAaoR,IAAb;AACD;AACF;AACD,WAAOtJ,OAAP;AACD,GAVD;;AAYArJ,aAAW,kBAASub,GAAT,EAAc;AACvB,WAAOA,IAAIxO,OAAJ,CAAY,YAAZ,EAA0B,UAASnF,KAAT,EAAgB;AAC/C,aAAOA,MAAM4T,MAAN,CAAa,CAAb,EAAgB7N,WAAhB,EAAP;AACD,KAFM,CAAP;AAGD,GAJD;;AAMA9N,WAASwG,aAAT,GAAyB,UAASoV,MAAT,EAAiB;AACxC,QAAIC,GAAJ;AACAA,UAAMvO,SAAS9G,aAAT,CAAuB,KAAvB,CAAN;AACAqV,QAAI/R,SAAJ,GAAgB8R,MAAhB;AACA,WAAOC,IAAIC,UAAJ,CAAe,CAAf,CAAP;AACD,GALD;;AAOA9b,WAASqQ,aAAT,GAAyB,UAASjK,OAAT,EAAkB2V,SAAlB,EAA6B;AACpD,QAAI3V,YAAY2V,SAAhB,EAA2B;AACzB,aAAO,IAAP;AACD;AACD,WAAO3V,UAAUA,QAAQsE,UAAzB,EAAqC;AACnC,UAAItE,YAAY2V,SAAhB,EAA2B;AACzB,eAAO,IAAP;AACD;AACF;AACD,WAAO,KAAP;AACD,GAVD;;AAYA/b,WAASgO,UAAT,GAAsB,UAAS0D,EAAT,EAAa7H,IAAb,EAAmB;AACvC,QAAIzD,OAAJ;AACA,QAAI,OAAOsL,EAAP,KAAc,QAAlB,EAA4B;AAC1BtL,gBAAUkH,SAASC,aAAT,CAAuBmE,EAAvB,CAAV;AACD,KAFD,MAEO,IAAIA,GAAGlE,QAAH,IAAe,IAAnB,EAAyB;AAC9BpH,gBAAUsL,EAAV;AACD;AACD,QAAItL,WAAW,IAAf,EAAqB;AACnB,YAAM,IAAIsB,KAAJ,CAAU,cAAcmC,IAAd,GAAqB,2EAA/B,CAAN;AACD;AACD,WAAOzD,OAAP;AACD,GAXD;;AAaApG,WAASiO,WAAT,GAAuB,UAAS+N,GAAT,EAAcnS,IAAd,EAAoB;AACzC,QAAI1B,CAAJ,EAAOuJ,EAAP,EAAWD,QAAX,EAAqBmH,MAArB,EAA6B7W,CAA7B,EAAgCgH,CAAhC,EAAmC/G,GAAnC,EAAwCiH,IAAxC,EAA8C/C,GAA9C;AACA,QAAI8V,eAAeC,KAAnB,EAA0B;AACxBxK,iBAAW,EAAX;AACA,UAAI;AACF,aAAK1P,IAAI,CAAJ,EAAOC,MAAMga,IAAI9Z,MAAtB,EAA8BH,IAAIC,GAAlC,EAAuCD,GAAvC,EAA4C;AAC1C2P,eAAKsK,IAAIja,CAAJ,CAAL;AACA0P,mBAAS/P,IAAT,CAAc,KAAKsM,UAAL,CAAgB0D,EAAhB,EAAoB7H,IAApB,CAAd;AACD;AACF,OALD,CAKE,OAAO+O,MAAP,EAAe;AACfzQ,YAAIyQ,MAAJ;AACAnH,mBAAW,IAAX;AACD;AACF,KAXD,MAWO,IAAI,OAAOuK,GAAP,KAAe,QAAnB,EAA6B;AAClCvK,iBAAW,EAAX;AACAvL,YAAMoH,SAAS3D,gBAAT,CAA0BqS,GAA1B,CAAN;AACA,WAAKjT,IAAI,CAAJ,EAAOE,OAAO/C,IAAIhE,MAAvB,EAA+B6G,IAAIE,IAAnC,EAAyCF,GAAzC,EAA8C;AAC5C2I,aAAKxL,IAAI6C,CAAJ,CAAL;AACA0I,iBAAS/P,IAAT,CAAcgQ,EAAd;AACD;AACF,KAPM,MAOA,IAAIsK,IAAIxO,QAAJ,IAAgB,IAApB,EAA0B;AAC/BiE,iBAAW,CAACuK,GAAD,CAAX;AACD;AACD,QAAI,EAAGvK,YAAY,IAAb,IAAsBA,SAASvP,MAAjC,CAAJ,EAA8C;AAC5C,YAAM,IAAIwF,KAAJ,CAAU,cAAcmC,IAAd,GAAqB,4FAA/B,CAAN;AACD;AACD,WAAO4H,QAAP;AACD,GA3BD;;AA6BAzR,WAASuK,OAAT,GAAmB,UAAS2R,QAAT,EAAmB/N,QAAnB,EAA6BgO,QAA7B,EAAuC;AACxD,QAAI1M,OAAOlF,OAAP,CAAe2R,QAAf,CAAJ,EAA8B;AAC5B,aAAO/N,UAAP;AACD,KAFD,MAEO,IAAIgO,YAAY,IAAhB,EAAsB;AAC3B,aAAOA,UAAP;AACD;AACF,GAND;;AAQAnc,WAAS+T,WAAT,GAAuB,UAASjO,IAAT,EAAevB,aAAf,EAA8B;AACnD,QAAI6X,YAAJ,EAAkBra,CAAlB,EAAqBC,GAArB,EAA0Bqa,QAA1B,EAAoCC,SAApC;AACA,QAAI,CAAC/X,aAAL,EAAoB;AAClB,aAAO,IAAP;AACD;AACDA,oBAAgBA,cAAc6W,KAAd,CAAoB,GAApB,CAAhB;AACAiB,eAAWvW,KAAKgC,IAAhB;AACAsU,mBAAeC,SAASnP,OAAT,CAAiB,OAAjB,EAA0B,EAA1B,CAAf;AACA,SAAKnL,IAAI,CAAJ,EAAOC,MAAMuC,cAAcrC,MAAhC,EAAwCH,IAAIC,GAA5C,EAAiDD,GAAjD,EAAsD;AACpDua,kBAAY/X,cAAcxC,CAAd,CAAZ;AACAua,kBAAYA,UAAU5S,IAAV,EAAZ;AACA,UAAI4S,UAAUX,MAAV,CAAiB,CAAjB,MAAwB,GAA5B,EAAiC;AAC/B,YAAI7V,KAAK+D,IAAL,CAAU4P,WAAV,GAAwB9I,OAAxB,CAAgC2L,UAAU7C,WAAV,EAAhC,EAAyD3T,KAAK+D,IAAL,CAAU3H,MAAV,GAAmBoa,UAAUpa,MAAtF,MAAkG,CAAC,CAAvG,EAA0G;AACxG,iBAAO,IAAP;AACD;AACF,OAJD,MAIO,IAAI,QAAQqE,IAAR,CAAa+V,SAAb,CAAJ,EAA6B;AAClC,YAAIF,iBAAiBE,UAAUpP,OAAV,CAAkB,OAAlB,EAA2B,EAA3B,CAArB,EAAqD;AACnD,iBAAO,IAAP;AACD;AACF,OAJM,MAIA;AACL,YAAImP,aAAaC,SAAjB,EAA4B;AAC1B,iBAAO,IAAP;AACD;AACF;AACF;AACD,WAAO,KAAP;AACD,GA1BD;;AA4BA,MAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,WAAW,IAAhD,EAAsD;AACpDA,WAAO/a,EAAP,CAAUiM,QAAV,GAAqB,UAAS9G,OAAT,EAAkB;AACrC,aAAO,KAAK6V,IAAL,CAAU,YAAW;AAC1B,eAAO,IAAIxc,QAAJ,CAAa,IAAb,EAAmB2G,OAAnB,CAAP;AACD,OAFM,CAAP;AAGD,KAJD;AAKD;;AAED,MAAI,OAAO8V,MAAP,KAAkB,WAAlB,IAAiCA,WAAW,IAAhD,EAAsD;AACpDA,WAAOC,OAAP,GAAiB1c,QAAjB;AACD,GAFD,MAEO;AACLyP,WAAOzP,QAAP,GAAkBA,QAAlB;AACD;;AAEDA,WAAS0O,KAAT,GAAiB,OAAjB;;AAEA1O,WAASuO,MAAT,GAAkB,QAAlB;;AAEAvO,WAAS2c,QAAT,GAAoB3c,SAASuO,MAA7B;;AAEAvO,WAASsK,SAAT,GAAqB,WAArB;;AAEAtK,WAAS4c,UAAT,GAAsB5c,SAASsK,SAA/B;;AAEAtK,WAASmX,QAAT,GAAoB,UAApB;;AAEAnX,WAASga,KAAT,GAAiB,OAAjB;;AAEAha,WAAS+Z,OAAT,GAAmB,SAAnB;;AAGA;;;;;;;AAOA1Z,yBAAuB,8BAASoV,GAAT,EAAc;AACnC,QAAIoH,KAAJ,EAAWlI,MAAX,EAAmBoB,GAAnB,EAAwB+G,IAAxB,EAA8BC,EAA9B,EAAkCC,EAAlC,EAAsCC,EAAtC,EAA0CC,EAA1C,EAA8CC,KAA9C,EAAqDC,EAArD;AACAH,SAAKxH,IAAI4H,YAAT;AACAL,SAAKvH,IAAI6H,aAAT;AACA3I,aAASrH,SAAS9G,aAAT,CAAuB,QAAvB,CAAT;AACAmO,WAAO5N,KAAP,GAAe,CAAf;AACA4N,WAAO3N,MAAP,GAAgBgW,EAAhB;AACAjH,UAAMpB,OAAOuB,UAAP,CAAkB,IAAlB,CAAN;AACAH,QAAIwH,SAAJ,CAAc9H,GAAd,EAAmB,CAAnB,EAAsB,CAAtB;AACAqH,WAAO/G,IAAIyH,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0BR,EAA1B,EAA8BF,IAArC;AACAM,SAAK,CAAL;AACAL,SAAKC,EAAL;AACAE,SAAKF,EAAL;AACA,WAAOE,KAAKE,EAAZ,EAAgB;AACdP,cAAQC,KAAK,CAACI,KAAK,CAAN,IAAW,CAAX,GAAe,CAApB,CAAR;AACA,UAAIL,UAAU,CAAd,EAAiB;AACfE,aAAKG,EAAL;AACD,OAFD,MAEO;AACLE,aAAKF,EAAL;AACD;AACDA,WAAMH,KAAKK,EAAN,IAAa,CAAlB;AACD;AACDD,YAAQD,KAAKF,EAAb;AACA,QAAIG,UAAU,CAAd,EAAiB;AACf,aAAO,CAAP;AACD,KAFD,MAEO;AACL,aAAOA,KAAP;AACD;AACF,GA5BD;;AA8BA7c,oBAAkB,yBAASyV,GAAT,EAAcN,GAAd,EAAmBgI,EAAnB,EAAuBL,EAAvB,EAA2BM,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2CC,EAA3C,EAA+CC,EAA/C,EAAmD;AACnE,QAAIC,eAAJ;AACAA,sBAAkB3d,qBAAqBoV,GAArB,CAAlB;AACA,WAAOM,IAAIwH,SAAJ,CAAc9H,GAAd,EAAmBgI,EAAnB,EAAuBL,EAAvB,EAA2BM,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2CC,EAA3C,EAA+CC,KAAKC,eAApD,CAAP;AACD,GAJD;;AAMA9d,gBAAe,YAAW;AACxB,aAASA,WAAT,GAAuB,CAAE;;AAEzBA,gBAAY+d,OAAZ,GAAsB,mEAAtB;;AAEA/d,gBAAYge,QAAZ,GAAuB,UAASrG,KAAT,EAAgB;AACrC,UAAIsG,IAAJ,EAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,IAAtB,EAA4BC,IAA5B,EAAkCC,IAAlC,EAAwCC,IAAxC,EAA8Cjc,CAA9C,EAAiDkc,MAAjD;AACAA,eAAS,EAAT;AACAP,aAAO,KAAK,CAAZ;AACAC,aAAO,KAAK,CAAZ;AACAC,aAAO,EAAP;AACAC,aAAO,KAAK,CAAZ;AACAC,aAAO,KAAK,CAAZ;AACAC,aAAO,KAAK,CAAZ;AACAC,aAAO,EAAP;AACAjc,UAAI,CAAJ;AACA,aAAO,IAAP,EAAa;AACX2b,eAAOtG,MAAMrV,GAAN,CAAP;AACA4b,eAAOvG,MAAMrV,GAAN,CAAP;AACA6b,eAAOxG,MAAMrV,GAAN,CAAP;AACA8b,eAAOH,QAAQ,CAAf;AACAI,eAAO,CAACJ,OAAO,CAAR,KAAc,CAAd,GAAkBC,QAAQ,CAAjC;AACAI,eAAO,CAACJ,OAAO,EAAR,KAAe,CAAf,GAAmBC,QAAQ,CAAlC;AACAI,eAAOJ,OAAO,EAAd;AACA,YAAIM,MAAMP,IAAN,CAAJ,EAAiB;AACfI,iBAAOC,OAAO,EAAd;AACD,SAFD,MAEO,IAAIE,MAAMN,IAAN,CAAJ,EAAiB;AACtBI,iBAAO,EAAP;AACD;AACDC,iBAASA,SAAS,KAAKT,OAAL,CAAatC,MAAb,CAAoB2C,IAApB,CAAT,GAAqC,KAAKL,OAAL,CAAatC,MAAb,CAAoB4C,IAApB,CAArC,GAAiE,KAAKN,OAAL,CAAatC,MAAb,CAAoB6C,IAApB,CAAjE,GAA6F,KAAKP,OAAL,CAAatC,MAAb,CAAoB8C,IAApB,CAAtG;AACAN,eAAOC,OAAOC,OAAO,EAArB;AACAC,eAAOC,OAAOC,OAAOC,OAAO,EAA5B;AACA,YAAI,EAAEjc,IAAIqV,MAAM3V,MAAZ,CAAJ,EAAyB;AACvB;AACD;AACF;AACD,aAAOwc,MAAP;AACD,KAhCD;;AAkCAxe,gBAAY4U,OAAZ,GAAsB,UAAS8J,cAAT,EAAyBC,iBAAzB,EAA4C;AAChE,UAAIC,KAAJ,EAAWC,QAAX,EAAqBC,QAArB;AACA,UAAI,CAACJ,eAAe7W,KAAf,CAAqB,yBAArB,CAAL,EAAsD;AACpD,eAAO8W,iBAAP;AACD;AACDE,iBAAW,KAAKE,QAAL,CAAcL,eAAe1R,OAAf,CAAuB,yBAAvB,EAAkD,EAAlD,CAAd,CAAX;AACA8R,iBAAW,KAAKE,cAAL,CAAoBH,QAApB,CAAX;AACAD,cAAQ,KAAKK,gBAAL,CAAsBN,iBAAtB,EAAyCG,QAAzC,CAAR;AACA,aAAO,4BAA4B,KAAKd,QAAL,CAAcY,KAAd,CAAnC;AACD,KATD;;AAWA5e,gBAAYif,gBAAZ,GAA+B,UAASN,iBAAT,EAA4BG,QAA5B,EAAsC;AACnE,UAAII,OAAJ,EAAaC,SAAb,EAAwBC,aAAxB;AACAD,kBAAY,KAAKE,YAAL,CAAkBP,QAAlB,CAAZ;AACAM,sBAAgB,KAAKE,UAAL,CAAgBX,iBAAhB,EAAmCQ,SAAnC,CAAhB;AACAD,gBAAU,IAAI9D,UAAJ,CAAegE,aAAf,CAAV;AACA,aAAOF,OAAP;AACD,KAND;;AAQAlf,gBAAYqf,YAAZ,GAA2B,UAASP,QAAT,EAAmB;AAC5C,UAAIS,GAAJ,EAASC,CAAT;AACAD,YAAM,KAAK,CAAX;AACAC,UAAI,CAAJ;AACA,aAAOA,IAAIV,SAAS9c,MAApB,EAA4B;AAC1Bud,cAAMT,SAASU,CAAT,CAAN;AACA,YAAID,IAAI,CAAJ,MAAW,GAAX,GAAiBA,IAAI,CAAJ,MAAW,GAAhC,EAAqC;AACnC,iBAAOA,GAAP;AACD;AACDC;AACD;AACD,aAAO,EAAP;AACD,KAZD;;AAcAxf,gBAAYsf,UAAZ,GAAyB,UAASX,iBAAT,EAA4BQ,SAA5B,EAAuC;AAC9D,UAAIM,KAAJ,EAAWC,GAAX,EAAgBC,GAAhB,EAAqBC,SAArB,EAAgCC,GAAhC,EAAqCC,aAArC;AACAF,kBAAYjB,kBAAkB3R,OAAlB,CAA0B,yBAA1B,EAAqD,EAArD,CAAZ;AACA2S,YAAM,KAAKZ,QAAL,CAAca,SAAd,CAAN;AACAE,sBAAgBH,IAAIlP,OAAJ,CAAY,GAAZ,EAAiB,CAAjB,CAAhB;AACAoP,YAAMF,IAAIpf,KAAJ,CAAU,CAAV,EAAauf,aAAb,CAAN;AACAJ,YAAMC,IAAIpf,KAAJ,CAAUuf,aAAV,CAAN;AACAL,cAAQI,GAAR;AACAJ,cAAQA,MAAMM,MAAN,CAAaZ,SAAb,CAAR;AACAM,cAAQA,MAAMM,MAAN,CAAaL,GAAb,CAAR;AACA,aAAOD,KAAP;AACD,KAXD;;AAaAzf,gBAAYgf,cAAZ,GAA6B,UAASgB,aAAT,EAAwB;AACnD,UAAIC,QAAJ,EAAcC,IAAd,EAAoBle,MAApB,EAA4Bud,GAA5B,EAAiCT,QAAjC;AACAoB,aAAO,CAAP;AACApB,iBAAW,EAAX;AACA,aAAO,IAAP,EAAa;AACX,YAAIkB,cAAcE,IAAd,MAAwB,GAAxB,GAA8BF,cAAcE,OAAO,CAArB,MAA4B,GAA9D,EAAmE;AACjE;AACD;AACD,YAAIF,cAAcE,IAAd,MAAwB,GAAxB,GAA8BF,cAAcE,OAAO,CAArB,MAA4B,GAA9D,EAAmE;AACjEA,kBAAQ,CAAR;AACD,SAFD,MAEO;AACLle,mBAASge,cAAcE,OAAO,CAArB,IAA0B,GAA1B,GAAgCF,cAAcE,OAAO,CAArB,CAAzC;AACAD,qBAAWC,OAAOle,MAAP,GAAgB,CAA3B;AACAud,gBAAMS,cAAczf,KAAd,CAAoB2f,IAApB,EAA0BD,QAA1B,CAAN;AACAnB,mBAAStd,IAAT,CAAc+d,GAAd;AACAW,iBAAOD,QAAP;AACD;AACD,YAAIC,OAAOF,cAAche,MAAzB,EAAiC;AAC/B;AACD;AACF;AACD,aAAO8c,QAAP;AACD,KAtBD;;AAwBA9e,gBAAY+e,QAAZ,GAAuB,UAASpH,KAAT,EAAgB;AACrC,UAAIwI,UAAJ,EAAgBR,GAAhB,EAAqB1B,IAArB,EAA2BC,IAA3B,EAAiCC,IAAjC,EAAuCC,IAAvC,EAA6CC,IAA7C,EAAmDC,IAAnD,EAAyDC,IAAzD,EAA+Djc,CAA/D,EAAkEkc,MAAlE;AACAA,eAAS,EAAT;AACAP,aAAO,KAAK,CAAZ;AACAC,aAAO,KAAK,CAAZ;AACAC,aAAO,EAAP;AACAC,aAAO,KAAK,CAAZ;AACAC,aAAO,KAAK,CAAZ;AACAC,aAAO,KAAK,CAAZ;AACAC,aAAO,EAAP;AACAjc,UAAI,CAAJ;AACAqd,YAAM,EAAN;AACAQ,mBAAa,qBAAb;AACA,UAAIA,WAAWC,IAAX,CAAgBzI,KAAhB,CAAJ,EAA4B;AAC1BnE,gBAAQ6M,OAAR,CAAgB,8DAA8D,qEAA9D,GAAsI,4BAAtJ;AACD;AACD1I,cAAQA,MAAM3K,OAAN,CAAc,qBAAd,EAAqC,EAArC,CAAR;AACA,aAAO,IAAP,EAAa;AACXoR,eAAO,KAAKL,OAAL,CAAatN,OAAb,CAAqBkH,MAAM8D,MAAN,CAAanZ,GAAb,CAArB,CAAP;AACA+b,eAAO,KAAKN,OAAL,CAAatN,OAAb,CAAqBkH,MAAM8D,MAAN,CAAanZ,GAAb,CAArB,CAAP;AACAgc,eAAO,KAAKP,OAAL,CAAatN,OAAb,CAAqBkH,MAAM8D,MAAN,CAAanZ,GAAb,CAArB,CAAP;AACAic,eAAO,KAAKR,OAAL,CAAatN,OAAb,CAAqBkH,MAAM8D,MAAN,CAAanZ,GAAb,CAArB,CAAP;AACA2b,eAAOG,QAAQ,CAAR,GAAYC,QAAQ,CAA3B;AACAH,eAAO,CAACG,OAAO,EAAR,KAAe,CAAf,GAAmBC,QAAQ,CAAlC;AACAH,eAAO,CAACG,OAAO,CAAR,KAAc,CAAd,GAAkBC,IAAzB;AACAoB,YAAIne,IAAJ,CAASyc,IAAT;AACA,YAAIK,SAAS,EAAb,EAAiB;AACfqB,cAAIne,IAAJ,CAAS0c,IAAT;AACD;AACD,YAAIK,SAAS,EAAb,EAAiB;AACfoB,cAAIne,IAAJ,CAAS2c,IAAT;AACD;AACDF,eAAOC,OAAOC,OAAO,EAArB;AACAC,eAAOC,OAAOC,OAAOC,OAAO,EAA5B;AACA,YAAI,EAAEjc,IAAIqV,MAAM3V,MAAZ,CAAJ,EAAyB;AACvB;AACD;AACF;AACD,aAAO2d,GAAP;AACD,KAvCD;;AAyCA,WAAO3f,WAAP;AAED,GAxJa,EAAd;;AA2JA;;;;;;;;;;;;;;AAcAE,kBAAgB,uBAASogB,GAAT,EAAchf,EAAd,EAAkB;AAChC,QAAIiH,GAAJ,EAASgY,GAAT,EAAc1a,IAAd,EAAoBH,KAApB,EAA0B8a,KAA1B,EAAgCC,GAAhC,EAAqCC,GAArC,EAA0CC,IAA1C,EAAgDxR,GAAhD;AACAtJ,WAAO,KAAP;AACAsJ,UAAM,IAAN;AACAoR,UAAMD,IAAIlT,QAAV;AACAuT,WAAOJ,IAAIK,eAAX;AACArY,UAAOgY,IAAIpf,gBAAJ,GAAuB,kBAAvB,GAA4C,aAAnD;AACAuf,UAAOH,IAAIpf,gBAAJ,GAAuB,qBAAvB,GAA+C,aAAtD;AACAsf,UAAOF,IAAIpf,gBAAJ,GAAuB,EAAvB,GAA4B,IAAnC;AACAuE,YAAO,cAASuC,CAAT,EAAY;AACjB,UAAIA,EAAEL,IAAF,KAAW,kBAAX,IAAiC2Y,IAAI5H,UAAJ,KAAmB,UAAxD,EAAoE;AAClE;AACD;AACD,OAAC1Q,EAAEL,IAAF,KAAW,MAAX,GAAoB0Y,GAApB,GAA0BC,GAA3B,EAAgCG,GAAhC,EAAqCD,MAAMxY,EAAEL,IAA7C,EAAmDlC,KAAnD,EAAyD,KAAzD;AACA,UAAI,CAACG,IAAD,KAAUA,OAAO,IAAjB,CAAJ,EAA4B;AAC1B,eAAOvE,GAAGT,IAAH,CAAQyf,GAAR,EAAarY,EAAEL,IAAF,IAAUK,CAAvB,CAAP;AACD;AACF,KARD;AASAuY,YAAO,gBAAW;AAChB,UAAIvY,CAAJ,EAAOyQ,MAAP;AACA,UAAI;AACFiI,aAAKE,QAAL,CAAc,MAAd;AACD,OAFD,CAEE,OAAOnI,MAAP,EAAe;AACfzQ,YAAIyQ,MAAJ;AACA1N,mBAAWwV,KAAX,EAAiB,EAAjB;AACA;AACD;AACD,aAAO9a,MAAK,MAAL,CAAP;AACD,KAVD;AAWA,QAAI6a,IAAI5H,UAAJ,KAAmB,UAAvB,EAAmC;AACjC,UAAI4H,IAAIO,iBAAJ,IAAyBH,KAAKE,QAAlC,EAA4C;AAC1C,YAAI;AACF1R,gBAAM,CAACmR,IAAIS,YAAX;AACD,SAFD,CAEE,OAAOjR,SAAP,EAAkB,CAAE;AACtB,YAAIX,GAAJ,EAAS;AACPqR;AACD;AACF;AACDD,UAAIhY,GAAJ,EAASkY,MAAM,kBAAf,EAAmC/a,KAAnC,EAAyC,KAAzC;AACA6a,UAAIhY,GAAJ,EAASkY,MAAM,kBAAf,EAAmC/a,KAAnC,EAAyC,KAAzC;AACA,aAAO4a,IAAI/X,GAAJ,EAASkY,MAAM,MAAf,EAAuB/a,KAAvB,EAA6B,KAA7B,CAAP;AACD;AACF,GA1CD;;AA4CA5F,WAASkhB,qBAAT,GAAiC,YAAW;AAC1C,QAAIlhB,SAASka,YAAb,EAA2B;AACzB,aAAOla,SAASma,QAAT,EAAP;AACD;AACF,GAJD;;AAMA/Z,gBAAcqP,MAAd,EAAsBzP,SAASkhB,qBAA/B;AAED,CAx9DD,EAw9DGngB,IAx9DH","file":"dropzone.js","sourcesContent":["\r\n/*\r\n *\r\n * More info at [www.dropzonejs.com](http://www.dropzonejs.com)\r\n *\r\n * Copyright (c) 2012, Matias Meno\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\n\r\n(function() {\r\n  var Dropzone, Emitter, ExifRestore, camelize, contentLoaded, detectVerticalSquash, drawImageIOSFix, noop, without,\r\n    slice = [].slice,\r\n    extend1 = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  noop = function() {};\r\n\r\n  Emitter = (function() {\r\n    function Emitter() {}\r\n\r\n    Emitter.prototype.addEventListener = Emitter.prototype.on;\r\n\r\n    Emitter.prototype.on = function(event, fn) {\r\n      this._callbacks = this._callbacks || {};\r\n      if (!this._callbacks[event]) {\r\n        this._callbacks[event] = [];\r\n      }\r\n      this._callbacks[event].push(fn);\r\n      return this;\r\n    };\r\n\r\n    Emitter.prototype.emit = function() {\r\n      var args, callback, callbacks, event, j, len;\r\n      event = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\r\n      this._callbacks = this._callbacks || {};\r\n      callbacks = this._callbacks[event];\r\n      if (callbacks) {\r\n        for (j = 0, len = callbacks.length; j < len; j++) {\r\n          callback = callbacks[j];\r\n          callback.apply(this, args);\r\n        }\r\n      }\r\n      return this;\r\n    };\r\n\r\n    Emitter.prototype.removeListener = Emitter.prototype.off;\r\n\r\n    Emitter.prototype.removeAllListeners = Emitter.prototype.off;\r\n\r\n    Emitter.prototype.removeEventListener = Emitter.prototype.off;\r\n\r\n    Emitter.prototype.off = function(event, fn) {\r\n      var callback, callbacks, i, j, len;\r\n      if (!this._callbacks || arguments.length === 0) {\r\n        this._callbacks = {};\r\n        return this;\r\n      }\r\n      callbacks = this._callbacks[event];\r\n      if (!callbacks) {\r\n        return this;\r\n      }\r\n      if (arguments.length === 1) {\r\n        delete this._callbacks[event];\r\n        return this;\r\n      }\r\n      for (i = j = 0, len = callbacks.length; j < len; i = ++j) {\r\n        callback = callbacks[i];\r\n        if (callback === fn) {\r\n          callbacks.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n      return this;\r\n    };\r\n\r\n    return Emitter;\r\n\r\n  })();\r\n\r\n  Dropzone = (function(superClass) {\r\n    var extend, resolveOption;\r\n\r\n    extend1(Dropzone, superClass);\r\n\r\n    Dropzone.prototype.Emitter = Emitter;\r\n\r\n\r\n    /*\r\n    This is a list of all available events you can register on a dropzone object.\r\n    \r\n    You can register an event handler like this:\r\n    \r\n        dropzone.on(\"dragEnter\", function() { });\r\n     */\r\n\r\n    Dropzone.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"addedfiles\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\r\n\r\n    Dropzone.prototype.defaultOptions = {\r\n      url: null,\r\n      method: \"post\",\r\n      withCredentials: false,\r\n      timeout: 30000,\r\n      parallelUploads: 2,\r\n      uploadMultiple: false,\r\n      maxFilesize: 256,\r\n      paramName: \"file\",\r\n      createImageThumbnails: true,\r\n      maxThumbnailFilesize: 10,\r\n      thumbnailWidth: 120,\r\n      thumbnailHeight: 120,\r\n      thumbnailMethod: 'crop',\r\n      resizeWidth: null,\r\n      resizeHeight: null,\r\n      resizeMimeType: null,\r\n      resizeQuality: 0.8,\r\n      resizeMethod: 'contain',\r\n      filesizeBase: 1000,\r\n      maxFiles: null,\r\n      params: {},\r\n      headers: null,\r\n      clickable: true,\r\n      ignoreHiddenFiles: true,\r\n      acceptedFiles: null,\r\n      acceptedMimeTypes: null,\r\n      autoProcessQueue: true,\r\n      autoQueue: true,\r\n      addRemoveLinks: false,\r\n      previewsContainer: null,\r\n      hiddenInputContainer: \"body\",\r\n      capture: null,\r\n      renameFilename: null,\r\n      forceFallback: false,\r\n      dictDefaultMessage: \"Drop files here to upload\",\r\n      dictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\r\n      dictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\r\n      dictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\r\n      dictInvalidFileType: \"You can't upload files of this type.\",\r\n      dictResponseError: \"Server responded with {{statusCode}} code.\",\r\n      dictCancelUpload: \"Cancel upload\",\r\n      dictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\r\n      dictRemoveFile: \"Remove file\",\r\n      dictRemoveFileConfirmation: null,\r\n      dictMaxFilesExceeded: \"You can not upload any more files.\",\r\n      init: function() {\r\n        return noop;\r\n      },\r\n      accept: function(file, done) {\r\n        return done();\r\n      },\r\n      fallback: function() {\r\n        var child, j, len, messageElement, ref, span;\r\n        this.element.className = this.element.className + \" dz-browser-not-supported\";\r\n        ref = this.element.getElementsByTagName(\"div\");\r\n        for (j = 0, len = ref.length; j < len; j++) {\r\n          child = ref[j];\r\n          if (/(^| )dz-message($| )/.test(child.className)) {\r\n            messageElement = child;\r\n            child.className = \"dz-message\";\r\n            continue;\r\n          }\r\n        }\r\n        if (!messageElement) {\r\n          messageElement = Dropzone.createElement(\"<div class=\\\"dz-message\\\"><span></span></div>\");\r\n          this.element.appendChild(messageElement);\r\n        }\r\n        span = messageElement.getElementsByTagName(\"span\")[0];\r\n        if (span) {\r\n          if (span.textContent != null) {\r\n            span.textContent = this.options.dictFallbackMessage;\r\n          } else if (span.innerText != null) {\r\n            span.innerText = this.options.dictFallbackMessage;\r\n          }\r\n        }\r\n        return this.element.appendChild(this.getFallbackForm());\r\n      },\r\n      resize: function(file, width, height, resizeMethod) {\r\n        var info, srcRatio, trgRatio;\r\n        info = {\r\n          srcX: 0,\r\n          srcY: 0,\r\n          srcWidth: file.width,\r\n          srcHeight: file.height\r\n        };\r\n        srcRatio = file.width / file.height;\r\n        if ((width == null) && (height == null)) {\r\n          width = info.srcWidth;\r\n          height = info.srcHeight;\r\n        } else if (width == null) {\r\n          width = height * srcRatio;\r\n        } else if (height == null) {\r\n          height = width / srcRatio;\r\n        }\r\n        width = Math.min(width, info.srcWidth);\r\n        height = Math.min(height, info.srcHeight);\r\n        trgRatio = width / height;\r\n        if (info.srcWidth > width || info.srcHeight > height) {\r\n          if (resizeMethod === 'crop') {\r\n            if (srcRatio > trgRatio) {\r\n              info.srcHeight = file.height;\r\n              info.srcWidth = info.srcHeight * trgRatio;\r\n            } else {\r\n              info.srcWidth = file.width;\r\n              info.srcHeight = info.srcWidth / trgRatio;\r\n            }\r\n          } else if (resizeMethod === 'contain') {\r\n            if (srcRatio > trgRatio) {\r\n              height = width / srcRatio;\r\n            } else {\r\n              width = height * srcRatio;\r\n            }\r\n          } else {\r\n            throw new Error(\"Unknown resizeMethod '\" + resizeMethod + \"'\");\r\n          }\r\n        }\r\n        info.srcX = (file.width - info.srcWidth) / 2;\r\n        info.srcY = (file.height - info.srcHeight) / 2;\r\n        info.trgWidth = width;\r\n        info.trgHeight = height;\r\n        return info;\r\n      },\r\n      transformFile: function(file, done) {\r\n        if ((this.options.resizeWidth || this.options.resizeHeight) && file.type.match(/image.*/)) {\r\n          return this.resizeImage(file, this.options.resizeWidth, this.options.resizeHeight, this.options.resizeMethod, done);\r\n        } else {\r\n          return done(file);\r\n        }\r\n      },\r\n      previewTemplate: \"<div class=\\\"dz-preview dz-file-preview\\\">\\n  <div class=\\\"dz-image\\\"><img data-dz-thumbnail /></div>\\n  <div class=\\\"dz-details\\\">\\n    <div class=\\\"dz-size\\\"><span data-dz-size></span></div>\\n    <div class=\\\"dz-filename\\\"><span data-dz-name></span></div>\\n  </div>\\n  <div class=\\\"dz-progress\\\"><span class=\\\"dz-upload\\\" data-dz-uploadprogress></span></div>\\n  <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div>\\n  <div class=\\\"dz-success-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Check</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\\\"dz-error-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Error</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <g id=\\\"Check-+-Oval-2\\\" sketch:type=\\\"MSLayerGroup\\\" stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\">\\n          <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n        </g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\",\r\n\r\n      /*\r\n      Those functions register themselves to the events on init and handle all\r\n      the user interface specific stuff. Overwriting them won't break the upload\r\n      but can break the way it's displayed.\r\n      You can overwrite them if you don't like the default behavior. If you just\r\n      want to add an additional event handler, register it on the dropzone object\r\n      and don't overwrite those options.\r\n       */\r\n      drop: function(e) {\r\n        return this.element.classList.remove(\"dz-drag-hover\");\r\n      },\r\n      dragstart: noop,\r\n      dragend: function(e) {\r\n        return this.element.classList.remove(\"dz-drag-hover\");\r\n      },\r\n      dragenter: function(e) {\r\n        return this.element.classList.add(\"dz-drag-hover\");\r\n      },\r\n      dragover: function(e) {\r\n        return this.element.classList.add(\"dz-drag-hover\");\r\n      },\r\n      dragleave: function(e) {\r\n        return this.element.classList.remove(\"dz-drag-hover\");\r\n      },\r\n      paste: noop,\r\n      reset: function() {\r\n        return this.element.classList.remove(\"dz-started\");\r\n      },\r\n      addedfile: function(file) {\r\n        var j, k, l, len, len1, len2, node, ref, ref1, ref2, removeFileEvent, removeLink, results;\r\n        if (this.element === this.previewsContainer) {\r\n          this.element.classList.add(\"dz-started\");\r\n        }\r\n        if (this.previewsContainer) {\r\n          file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\r\n          file.previewTemplate = file.previewElement;\r\n          this.previewsContainer.appendChild(file.previewElement);\r\n          ref = file.previewElement.querySelectorAll(\"[data-dz-name]\");\r\n          for (j = 0, len = ref.length; j < len; j++) {\r\n            node = ref[j];\r\n            node.textContent = this._renameFilename(file.name, file);\r\n          }\r\n          ref1 = file.previewElement.querySelectorAll(\"[data-dz-size]\");\r\n          for (k = 0, len1 = ref1.length; k < len1; k++) {\r\n            node = ref1[k];\r\n            node.innerHTML = this.filesize(file.size);\r\n          }\r\n          if (this.options.addRemoveLinks) {\r\n            file._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\" + this.options.dictRemoveFile + \"</a>\");\r\n            file.previewElement.appendChild(file._removeLink);\r\n          }\r\n          removeFileEvent = (function(_this) {\r\n            return function(e) {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n              if (file.status === Dropzone.UPLOADING) {\r\n                return Dropzone.confirm(_this.options.dictCancelUploadConfirmation, function() {\r\n                  return _this.removeFile(file);\r\n                });\r\n              } else {\r\n                if (_this.options.dictRemoveFileConfirmation) {\r\n                  return Dropzone.confirm(_this.options.dictRemoveFileConfirmation, function() {\r\n                    return _this.removeFile(file);\r\n                  });\r\n                } else {\r\n                  return _this.removeFile(file);\r\n                }\r\n              }\r\n            };\r\n          })(this);\r\n          ref2 = file.previewElement.querySelectorAll(\"[data-dz-remove]\");\r\n          results = [];\r\n          for (l = 0, len2 = ref2.length; l < len2; l++) {\r\n            removeLink = ref2[l];\r\n            results.push(removeLink.addEventListener(\"click\", removeFileEvent));\r\n          }\r\n          return results;\r\n        }\r\n      },\r\n      removedfile: function(file) {\r\n        var ref;\r\n        if (file.previewElement) {\r\n          if ((ref = file.previewElement) != null) {\r\n            ref.parentNode.removeChild(file.previewElement);\r\n          }\r\n        }\r\n        return this._updateMaxFilesReachedClass();\r\n      },\r\n      thumbnail: function(file, dataUrl) {\r\n        var j, len, ref, thumbnailElement;\r\n        if (file.previewElement) {\r\n          file.previewElement.classList.remove(\"dz-file-preview\");\r\n          ref = file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\");\r\n          for (j = 0, len = ref.length; j < len; j++) {\r\n            thumbnailElement = ref[j];\r\n            thumbnailElement.alt = file.name;\r\n            thumbnailElement.src = dataUrl;\r\n          }\r\n          return setTimeout(((function(_this) {\r\n            return function() {\r\n              return file.previewElement.classList.add(\"dz-image-preview\");\r\n            };\r\n          })(this)), 1);\r\n        }\r\n      },\r\n      error: function(file, message) {\r\n        var j, len, node, ref, results;\r\n        if (file.previewElement) {\r\n          file.previewElement.classList.add(\"dz-error\");\r\n          if (typeof message !== \"String\" && message.error) {\r\n            message = message.error;\r\n          }\r\n          ref = file.previewElement.querySelectorAll(\"[data-dz-errormessage]\");\r\n          results = [];\r\n          for (j = 0, len = ref.length; j < len; j++) {\r\n            node = ref[j];\r\n            results.push(node.textContent = message);\r\n          }\r\n          return results;\r\n        }\r\n      },\r\n      errormultiple: noop,\r\n      processing: function(file) {\r\n        if (file.previewElement) {\r\n          file.previewElement.classList.add(\"dz-processing\");\r\n          if (file._removeLink) {\r\n            return file._removeLink.textContent = this.options.dictCancelUpload;\r\n          }\r\n        }\r\n      },\r\n      processingmultiple: noop,\r\n      uploadprogress: function(file, progress, bytesSent) {\r\n        var j, len, node, ref, results;\r\n        if (file.previewElement) {\r\n          ref = file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\");\r\n          results = [];\r\n          for (j = 0, len = ref.length; j < len; j++) {\r\n            node = ref[j];\r\n            if (node.nodeName === 'PROGRESS') {\r\n              results.push(node.value = progress);\r\n            } else {\r\n              results.push(node.style.width = progress + \"%\");\r\n            }\r\n          }\r\n          return results;\r\n        }\r\n      },\r\n      totaluploadprogress: noop,\r\n      sending: noop,\r\n      sendingmultiple: noop,\r\n      success: function(file) {\r\n        if (file.previewElement) {\r\n          return file.previewElement.classList.add(\"dz-success\");\r\n        }\r\n      },\r\n      successmultiple: noop,\r\n      canceled: function(file) {\r\n        return this.emit(\"error\", file, \"Upload canceled.\");\r\n      },\r\n      canceledmultiple: noop,\r\n      complete: function(file) {\r\n        if (file._removeLink) {\r\n          file._removeLink.textContent = this.options.dictRemoveFile;\r\n        }\r\n        if (file.previewElement) {\r\n          return file.previewElement.classList.add(\"dz-complete\");\r\n        }\r\n      },\r\n      completemultiple: noop,\r\n      maxfilesexceeded: noop,\r\n      maxfilesreached: noop,\r\n      queuecomplete: noop,\r\n      addedfiles: noop\r\n    };\r\n\r\n    extend = function() {\r\n      var j, key, len, object, objects, target, val;\r\n      target = arguments[0], objects = 2 <= arguments.length ? slice.call(arguments, 1) : [];\r\n      for (j = 0, len = objects.length; j < len; j++) {\r\n        object = objects[j];\r\n        for (key in object) {\r\n          val = object[key];\r\n          target[key] = val;\r\n        }\r\n      }\r\n      return target;\r\n    };\r\n\r\n    function Dropzone(element1, options) {\r\n      var elementOptions, fallback, ref;\r\n      this.element = element1;\r\n      this.version = Dropzone.version;\r\n      this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\r\n      this.clickableElements = [];\r\n      this.listeners = [];\r\n      this.files = [];\r\n      if (typeof this.element === \"string\") {\r\n        this.element = document.querySelector(this.element);\r\n      }\r\n      if (!(this.element && (this.element.nodeType != null))) {\r\n        throw new Error(\"Invalid dropzone element.\");\r\n      }\r\n      if (this.element.dropzone) {\r\n        throw new Error(\"Dropzone already attached.\");\r\n      }\r\n      Dropzone.instances.push(this);\r\n      this.element.dropzone = this;\r\n      elementOptions = (ref = Dropzone.optionsForElement(this.element)) != null ? ref : {};\r\n      this.options = extend({}, this.defaultOptions, elementOptions, options != null ? options : {});\r\n      if (this.options.forceFallback || !Dropzone.isBrowserSupported()) {\r\n        return this.options.fallback.call(this);\r\n      }\r\n      if (this.options.url == null) {\r\n        this.options.url = this.element.getAttribute(\"action\");\r\n      }\r\n      if (!this.options.url) {\r\n        throw new Error(\"No URL provided.\");\r\n      }\r\n      if (this.options.acceptedFiles && this.options.acceptedMimeTypes) {\r\n        throw new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\r\n      }\r\n      if (this.options.acceptedMimeTypes) {\r\n        this.options.acceptedFiles = this.options.acceptedMimeTypes;\r\n        delete this.options.acceptedMimeTypes;\r\n      }\r\n      this.options.method = this.options.method.toUpperCase();\r\n      if ((fallback = this.getExistingFallback()) && fallback.parentNode) {\r\n        fallback.parentNode.removeChild(fallback);\r\n      }\r\n      if (this.options.previewsContainer !== false) {\r\n        if (this.options.previewsContainer) {\r\n          this.previewsContainer = Dropzone.getElement(this.options.previewsContainer, \"previewsContainer\");\r\n        } else {\r\n          this.previewsContainer = this.element;\r\n        }\r\n      }\r\n      if (this.options.clickable) {\r\n        if (this.options.clickable === true) {\r\n          this.clickableElements = [this.element];\r\n        } else {\r\n          this.clickableElements = Dropzone.getElements(this.options.clickable, \"clickable\");\r\n        }\r\n      }\r\n      this.init();\r\n    }\r\n\r\n    Dropzone.prototype.getAcceptedFiles = function() {\r\n      var file, j, len, ref, results;\r\n      ref = this.files;\r\n      results = [];\r\n      for (j = 0, len = ref.length; j < len; j++) {\r\n        file = ref[j];\r\n        if (file.accepted) {\r\n          results.push(file);\r\n        }\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype.getRejectedFiles = function() {\r\n      var file, j, len, ref, results;\r\n      ref = this.files;\r\n      results = [];\r\n      for (j = 0, len = ref.length; j < len; j++) {\r\n        file = ref[j];\r\n        if (!file.accepted) {\r\n          results.push(file);\r\n        }\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype.getFilesWithStatus = function(status) {\r\n      var file, j, len, ref, results;\r\n      ref = this.files;\r\n      results = [];\r\n      for (j = 0, len = ref.length; j < len; j++) {\r\n        file = ref[j];\r\n        if (file.status === status) {\r\n          results.push(file);\r\n        }\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype.getQueuedFiles = function() {\r\n      return this.getFilesWithStatus(Dropzone.QUEUED);\r\n    };\r\n\r\n    Dropzone.prototype.getUploadingFiles = function() {\r\n      return this.getFilesWithStatus(Dropzone.UPLOADING);\r\n    };\r\n\r\n    Dropzone.prototype.getAddedFiles = function() {\r\n      return this.getFilesWithStatus(Dropzone.ADDED);\r\n    };\r\n\r\n    Dropzone.prototype.getActiveFiles = function() {\r\n      var file, j, len, ref, results;\r\n      ref = this.files;\r\n      results = [];\r\n      for (j = 0, len = ref.length; j < len; j++) {\r\n        file = ref[j];\r\n        if (file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED) {\r\n          results.push(file);\r\n        }\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype.init = function() {\r\n      var eventName, j, len, noPropagation, ref, ref1, setupHiddenFileInput;\r\n      if (this.element.tagName === \"form\") {\r\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\r\n      }\r\n      if (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\r\n        this.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><span>\" + this.options.dictDefaultMessage + \"</span></div>\"));\r\n      }\r\n      if (this.clickableElements.length) {\r\n        setupHiddenFileInput = (function(_this) {\r\n          return function() {\r\n            if (_this.hiddenFileInput) {\r\n              _this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput);\r\n            }\r\n            _this.hiddenFileInput = document.createElement(\"input\");\r\n            _this.hiddenFileInput.setAttribute(\"type\", \"file\");\r\n            if ((_this.options.maxFiles == null) || _this.options.maxFiles > 1) {\r\n              _this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\r\n            }\r\n            _this.hiddenFileInput.className = \"dz-hidden-input\";\r\n            if (_this.options.acceptedFiles != null) {\r\n              _this.hiddenFileInput.setAttribute(\"accept\", _this.options.acceptedFiles);\r\n            }\r\n            if (_this.options.capture != null) {\r\n              _this.hiddenFileInput.setAttribute(\"capture\", _this.options.capture);\r\n            }\r\n            _this.hiddenFileInput.style.visibility = \"hidden\";\r\n            _this.hiddenFileInput.style.position = \"absolute\";\r\n            _this.hiddenFileInput.style.top = \"0\";\r\n            _this.hiddenFileInput.style.left = \"0\";\r\n            _this.hiddenFileInput.style.height = \"0\";\r\n            _this.hiddenFileInput.style.width = \"0\";\r\n            document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput);\r\n            return _this.hiddenFileInput.addEventListener(\"change\", function() {\r\n              var file, files, j, len;\r\n              files = _this.hiddenFileInput.files;\r\n              if (files.length) {\r\n                for (j = 0, len = files.length; j < len; j++) {\r\n                  file = files[j];\r\n                  _this.addFile(file);\r\n                }\r\n              }\r\n              _this.emit(\"addedfiles\", files);\r\n              return setupHiddenFileInput();\r\n            });\r\n          };\r\n        })(this);\r\n        setupHiddenFileInput();\r\n      }\r\n      this.URL = (ref = window.URL) != null ? ref : window.webkitURL;\r\n      ref1 = this.events;\r\n      for (j = 0, len = ref1.length; j < len; j++) {\r\n        eventName = ref1[j];\r\n        this.on(eventName, this.options[eventName]);\r\n      }\r\n      this.on(\"uploadprogress\", (function(_this) {\r\n        return function() {\r\n          return _this.updateTotalUploadProgress();\r\n        };\r\n      })(this));\r\n      this.on(\"removedfile\", (function(_this) {\r\n        return function() {\r\n          return _this.updateTotalUploadProgress();\r\n        };\r\n      })(this));\r\n      this.on(\"canceled\", (function(_this) {\r\n        return function(file) {\r\n          return _this.emit(\"complete\", file);\r\n        };\r\n      })(this));\r\n      this.on(\"complete\", (function(_this) {\r\n        return function(file) {\r\n          if (_this.getAddedFiles().length === 0 && _this.getUploadingFiles().length === 0 && _this.getQueuedFiles().length === 0) {\r\n            return setTimeout((function() {\r\n              return _this.emit(\"queuecomplete\");\r\n            }), 0);\r\n          }\r\n        };\r\n      })(this));\r\n      noPropagation = function(e) {\r\n        e.stopPropagation();\r\n        if (e.preventDefault) {\r\n          return e.preventDefault();\r\n        } else {\r\n          return e.returnValue = false;\r\n        }\r\n      };\r\n      this.listeners = [\r\n        {\r\n          element: this.element,\r\n          events: {\r\n            \"dragstart\": (function(_this) {\r\n              return function(e) {\r\n                return _this.emit(\"dragstart\", e);\r\n              };\r\n            })(this),\r\n            \"dragenter\": (function(_this) {\r\n              return function(e) {\r\n                noPropagation(e);\r\n                return _this.emit(\"dragenter\", e);\r\n              };\r\n            })(this),\r\n            \"dragover\": (function(_this) {\r\n              return function(e) {\r\n                var efct;\r\n                try {\r\n                  efct = e.dataTransfer.effectAllowed;\r\n                } catch (undefined) {}\r\n                e.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';\r\n                noPropagation(e);\r\n                return _this.emit(\"dragover\", e);\r\n              };\r\n            })(this),\r\n            \"dragleave\": (function(_this) {\r\n              return function(e) {\r\n                return _this.emit(\"dragleave\", e);\r\n              };\r\n            })(this),\r\n            \"drop\": (function(_this) {\r\n              return function(e) {\r\n                noPropagation(e);\r\n                return _this.drop(e);\r\n              };\r\n            })(this),\r\n            \"dragend\": (function(_this) {\r\n              return function(e) {\r\n                return _this.emit(\"dragend\", e);\r\n              };\r\n            })(this)\r\n          }\r\n        }\r\n      ];\r\n      this.clickableElements.forEach((function(_this) {\r\n        return function(clickableElement) {\r\n          return _this.listeners.push({\r\n            element: clickableElement,\r\n            events: {\r\n              \"click\": function(evt) {\r\n                if ((clickableElement !== _this.element) || (evt.target === _this.element || Dropzone.elementInside(evt.target, _this.element.querySelector(\".dz-message\")))) {\r\n                  _this.hiddenFileInput.click();\r\n                }\r\n                return true;\r\n              }\r\n            }\r\n          });\r\n        };\r\n      })(this));\r\n      this.enable();\r\n      return this.options.init.call(this);\r\n    };\r\n\r\n    Dropzone.prototype.destroy = function() {\r\n      var ref;\r\n      this.disable();\r\n      this.removeAllFiles(true);\r\n      if ((ref = this.hiddenFileInput) != null ? ref.parentNode : void 0) {\r\n        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\r\n        this.hiddenFileInput = null;\r\n      }\r\n      delete this.element.dropzone;\r\n      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\r\n    };\r\n\r\n    Dropzone.prototype.updateTotalUploadProgress = function() {\r\n      var activeFiles, file, j, len, ref, totalBytes, totalBytesSent, totalUploadProgress;\r\n      totalBytesSent = 0;\r\n      totalBytes = 0;\r\n      activeFiles = this.getActiveFiles();\r\n      if (activeFiles.length) {\r\n        ref = this.getActiveFiles();\r\n        for (j = 0, len = ref.length; j < len; j++) {\r\n          file = ref[j];\r\n          totalBytesSent += file.upload.bytesSent;\r\n          totalBytes += file.upload.total;\r\n        }\r\n        totalUploadProgress = 100 * totalBytesSent / totalBytes;\r\n      } else {\r\n        totalUploadProgress = 100;\r\n      }\r\n      return this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\r\n    };\r\n\r\n    Dropzone.prototype._getParamName = function(n) {\r\n      if (typeof this.options.paramName === \"function\") {\r\n        return this.options.paramName(n);\r\n      } else {\r\n        return \"\" + this.options.paramName + (this.options.uploadMultiple ? \"[\" + n + \"]\" : \"\");\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype._renameFilename = function(name, file) {\r\n      if (typeof this.options.renameFilename !== \"function\") {\r\n        return name;\r\n      }\r\n      return this.options.renameFilename(name, file);\r\n    };\r\n\r\n    Dropzone.prototype.getFallbackForm = function() {\r\n      var existingFallback, fields, fieldsString, form;\r\n      if (existingFallback = this.getExistingFallback()) {\r\n        return existingFallback;\r\n      }\r\n      fieldsString = \"<div class=\\\"dz-fallback\\\">\";\r\n      if (this.options.dictFallbackText) {\r\n        fieldsString += \"<p>\" + this.options.dictFallbackText + \"</p>\";\r\n      }\r\n      fieldsString += \"<input type=\\\"file\\\" name=\\\"\" + (this._getParamName(0)) + \"\\\" \" + (this.options.uploadMultiple ? 'multiple=\"multiple\"' : void 0) + \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\";\r\n      fields = Dropzone.createElement(fieldsString);\r\n      if (this.element.tagName !== \"FORM\") {\r\n        form = Dropzone.createElement(\"<form action=\\\"\" + this.options.url + \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\" + this.options.method + \"\\\"></form>\");\r\n        form.appendChild(fields);\r\n      } else {\r\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\r\n        this.element.setAttribute(\"method\", this.options.method);\r\n      }\r\n      return form != null ? form : fields;\r\n    };\r\n\r\n    Dropzone.prototype.getExistingFallback = function() {\r\n      var fallback, getFallback, j, len, ref, tagName;\r\n      getFallback = function(elements) {\r\n        var el, j, len;\r\n        for (j = 0, len = elements.length; j < len; j++) {\r\n          el = elements[j];\r\n          if (/(^| )fallback($| )/.test(el.className)) {\r\n            return el;\r\n          }\r\n        }\r\n      };\r\n      ref = [\"div\", \"form\"];\r\n      for (j = 0, len = ref.length; j < len; j++) {\r\n        tagName = ref[j];\r\n        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\r\n          return fallback;\r\n        }\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype.setupEventListeners = function() {\r\n      var elementListeners, event, j, len, listener, ref, results;\r\n      ref = this.listeners;\r\n      results = [];\r\n      for (j = 0, len = ref.length; j < len; j++) {\r\n        elementListeners = ref[j];\r\n        results.push((function() {\r\n          var ref1, results1;\r\n          ref1 = elementListeners.events;\r\n          results1 = [];\r\n          for (event in ref1) {\r\n            listener = ref1[event];\r\n            results1.push(elementListeners.element.addEventListener(event, listener, false));\r\n          }\r\n          return results1;\r\n        })());\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype.removeEventListeners = function() {\r\n      var elementListeners, event, j, len, listener, ref, results;\r\n      ref = this.listeners;\r\n      results = [];\r\n      for (j = 0, len = ref.length; j < len; j++) {\r\n        elementListeners = ref[j];\r\n        results.push((function() {\r\n          var ref1, results1;\r\n          ref1 = elementListeners.events;\r\n          results1 = [];\r\n          for (event in ref1) {\r\n            listener = ref1[event];\r\n            results1.push(elementListeners.element.removeEventListener(event, listener, false));\r\n          }\r\n          return results1;\r\n        })());\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype.disable = function() {\r\n      var file, j, len, ref, results;\r\n      this.clickableElements.forEach(function(element) {\r\n        return element.classList.remove(\"dz-clickable\");\r\n      });\r\n      this.removeEventListeners();\r\n      ref = this.files;\r\n      results = [];\r\n      for (j = 0, len = ref.length; j < len; j++) {\r\n        file = ref[j];\r\n        results.push(this.cancelUpload(file));\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype.enable = function() {\r\n      this.clickableElements.forEach(function(element) {\r\n        return element.classList.add(\"dz-clickable\");\r\n      });\r\n      return this.setupEventListeners();\r\n    };\r\n\r\n    Dropzone.prototype.filesize = function(size) {\r\n      var cutoff, i, j, len, selectedSize, selectedUnit, unit, units;\r\n      selectedSize = 0;\r\n      selectedUnit = \"b\";\r\n      if (size > 0) {\r\n        units = ['TB', 'GB', 'MB', 'KB', 'b'];\r\n        for (i = j = 0, len = units.length; j < len; i = ++j) {\r\n          unit = units[i];\r\n          cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\r\n          if (size >= cutoff) {\r\n            selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\r\n            selectedUnit = unit;\r\n            break;\r\n          }\r\n        }\r\n        selectedSize = Math.round(10 * selectedSize) / 10;\r\n      }\r\n      return \"<strong>\" + selectedSize + \"</strong> \" + selectedUnit;\r\n    };\r\n\r\n    Dropzone.prototype._updateMaxFilesReachedClass = function() {\r\n      if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\r\n        if (this.getAcceptedFiles().length === this.options.maxFiles) {\r\n          this.emit('maxfilesreached', this.files);\r\n        }\r\n        return this.element.classList.add(\"dz-max-files-reached\");\r\n      } else {\r\n        return this.element.classList.remove(\"dz-max-files-reached\");\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype.drop = function(e) {\r\n      var files, items;\r\n      if (!e.dataTransfer) {\r\n        return;\r\n      }\r\n      this.emit(\"drop\", e);\r\n      files = e.dataTransfer.files;\r\n      this.emit(\"addedfiles\", files);\r\n      if (files.length) {\r\n        items = e.dataTransfer.items;\r\n        if (items && items.length && (items[0].webkitGetAsEntry != null)) {\r\n          this._addFilesFromItems(items);\r\n        } else {\r\n          this.handleFiles(files);\r\n        }\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype.paste = function(e) {\r\n      var items, ref;\r\n      if ((e != null ? (ref = e.clipboardData) != null ? ref.items : void 0 : void 0) == null) {\r\n        return;\r\n      }\r\n      this.emit(\"paste\", e);\r\n      items = e.clipboardData.items;\r\n      if (items.length) {\r\n        return this._addFilesFromItems(items);\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype.handleFiles = function(files) {\r\n      var file, j, len, results;\r\n      results = [];\r\n      for (j = 0, len = files.length; j < len; j++) {\r\n        file = files[j];\r\n        results.push(this.addFile(file));\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype._addFilesFromItems = function(items) {\r\n      var entry, item, j, len, results;\r\n      results = [];\r\n      for (j = 0, len = items.length; j < len; j++) {\r\n        item = items[j];\r\n        if ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {\r\n          if (entry.isFile) {\r\n            results.push(this.addFile(item.getAsFile()));\r\n          } else if (entry.isDirectory) {\r\n            results.push(this._addFilesFromDirectory(entry, entry.name));\r\n          } else {\r\n            results.push(void 0);\r\n          }\r\n        } else if (item.getAsFile != null) {\r\n          if ((item.kind == null) || item.kind === \"file\") {\r\n            results.push(this.addFile(item.getAsFile()));\r\n          } else {\r\n            results.push(void 0);\r\n          }\r\n        } else {\r\n          results.push(void 0);\r\n        }\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype._addFilesFromDirectory = function(directory, path) {\r\n      var dirReader, errorHandler, readEntries;\r\n      dirReader = directory.createReader();\r\n      errorHandler = function(error) {\r\n        return typeof console !== \"undefined\" && console !== null ? typeof console.log === \"function\" ? console.log(error) : void 0 : void 0;\r\n      };\r\n      readEntries = (function(_this) {\r\n        return function() {\r\n          return dirReader.readEntries(function(entries) {\r\n            var entry, j, len;\r\n            if (entries.length > 0) {\r\n              for (j = 0, len = entries.length; j < len; j++) {\r\n                entry = entries[j];\r\n                if (entry.isFile) {\r\n                  entry.file(function(file) {\r\n                    if (_this.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {\r\n                      return;\r\n                    }\r\n                    file.fullPath = path + \"/\" + file.name;\r\n                    return _this.addFile(file);\r\n                  });\r\n                } else if (entry.isDirectory) {\r\n                  _this._addFilesFromDirectory(entry, path + \"/\" + entry.name);\r\n                }\r\n              }\r\n              readEntries();\r\n            }\r\n            return null;\r\n          }, errorHandler);\r\n        };\r\n      })(this);\r\n      return readEntries();\r\n    };\r\n\r\n    Dropzone.prototype.accept = function(file, done) {\r\n      if (file.size > this.options.maxFilesize * 1024 * 1024) {\r\n        return done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\r\n      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\r\n        return done(this.options.dictInvalidFileType);\r\n      } else if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\r\n        done(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\r\n        return this.emit(\"maxfilesexceeded\", file);\r\n      } else {\r\n        return this.options.accept.call(this, file, done);\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype.addFile = function(file) {\r\n      file.upload = {\r\n        progress: 0,\r\n        total: file.size,\r\n        bytesSent: 0\r\n      };\r\n      this.files.push(file);\r\n      file.status = Dropzone.ADDED;\r\n      this.emit(\"addedfile\", file);\r\n      this._enqueueThumbnail(file);\r\n      return this.accept(file, (function(_this) {\r\n        return function(error) {\r\n          if (error) {\r\n            file.accepted = false;\r\n            _this._errorProcessing([file], error);\r\n          } else {\r\n            file.accepted = true;\r\n            if (_this.options.autoQueue) {\r\n              _this.enqueueFile(file);\r\n            }\r\n          }\r\n          return _this._updateMaxFilesReachedClass();\r\n        };\r\n      })(this));\r\n    };\r\n\r\n    Dropzone.prototype.enqueueFiles = function(files) {\r\n      var file, j, len;\r\n      for (j = 0, len = files.length; j < len; j++) {\r\n        file = files[j];\r\n        this.enqueueFile(file);\r\n      }\r\n      return null;\r\n    };\r\n\r\n    Dropzone.prototype.enqueueFile = function(file) {\r\n      if (file.status === Dropzone.ADDED && file.accepted === true) {\r\n        file.status = Dropzone.QUEUED;\r\n        if (this.options.autoProcessQueue) {\r\n          return setTimeout(((function(_this) {\r\n            return function() {\r\n              return _this.processQueue();\r\n            };\r\n          })(this)), 0);\r\n        }\r\n      } else {\r\n        throw new Error(\"This file can't be queued because it has already been processed or was rejected.\");\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype._thumbnailQueue = [];\r\n\r\n    Dropzone.prototype._processingThumbnail = false;\r\n\r\n    Dropzone.prototype._enqueueThumbnail = function(file) {\r\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\r\n        this._thumbnailQueue.push(file);\r\n        return setTimeout(((function(_this) {\r\n          return function() {\r\n            return _this._processThumbnailQueue();\r\n          };\r\n        })(this)), 0);\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype._processThumbnailQueue = function() {\r\n      var file;\r\n      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {\r\n        return;\r\n      }\r\n      this._processingThumbnail = true;\r\n      file = this._thumbnailQueue.shift();\r\n      return this.createThumbnail(file, this.options.thumbnailWidth, this.options.thumbnailHeight, this.options.thumbnailMethod, true, (function(_this) {\r\n        return function(dataUrl) {\r\n          _this.emit(\"thumbnail\", file, dataUrl);\r\n          _this._processingThumbnail = false;\r\n          return _this._processThumbnailQueue();\r\n        };\r\n      })(this));\r\n    };\r\n\r\n    Dropzone.prototype.removeFile = function(file) {\r\n      if (file.status === Dropzone.UPLOADING) {\r\n        this.cancelUpload(file);\r\n      }\r\n      this.files = without(this.files, file);\r\n      this.emit(\"removedfile\", file);\r\n      if (this.files.length === 0) {\r\n        return this.emit(\"reset\");\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype.removeAllFiles = function(cancelIfNecessary) {\r\n      var file, j, len, ref;\r\n      if (cancelIfNecessary == null) {\r\n        cancelIfNecessary = false;\r\n      }\r\n      ref = this.files.slice();\r\n      for (j = 0, len = ref.length; j < len; j++) {\r\n        file = ref[j];\r\n        if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\r\n          this.removeFile(file);\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n\r\n    Dropzone.prototype.resizeImage = function(file, width, height, resizeMethod, callback) {\r\n      return this.createThumbnail(file, width, height, resizeMethod, false, (function(_this) {\r\n        return function(dataUrl, canvas) {\r\n          var resizeMimeType, resizedDataURL;\r\n          if (canvas === null) {\r\n            return callback(file);\r\n          } else {\r\n            resizeMimeType = _this.options.resizeMimeType;\r\n            if (resizeMimeType == null) {\r\n              resizeMimeType = file.type;\r\n            }\r\n            resizedDataURL = canvas.toDataURL(resizeMimeType, _this.options.resizeQuality);\r\n            if (resizeMimeType === 'image/jpeg' || resizeMimeType === 'image/jpg') {\r\n              resizedDataURL = ExifRestore.restore(file.dataURL, resizedDataURL);\r\n            }\r\n            return callback(Dropzone.dataURItoBlob(resizedDataURL));\r\n          }\r\n        };\r\n      })(this));\r\n    };\r\n\r\n    Dropzone.prototype.createThumbnail = function(file, width, height, resizeMethod, fixOrientation, callback) {\r\n      var fileReader;\r\n      fileReader = new FileReader;\r\n      fileReader.onload = (function(_this) {\r\n        return function() {\r\n          file.dataURL = fileReader.result;\r\n          if (file.type === \"image/svg+xml\") {\r\n            if (callback != null) {\r\n              callback(fileReader.result);\r\n            }\r\n            return;\r\n          }\r\n          return _this.createThumbnailFromUrl(file, width, height, resizeMethod, fixOrientation, callback);\r\n        };\r\n      })(this);\r\n      return fileReader.readAsDataURL(file);\r\n    };\r\n\r\n    Dropzone.prototype.createThumbnailFromUrl = function(file, width, height, resizeMethod, fixOrientation, callback, crossOrigin) {\r\n      var img;\r\n      img = document.createElement(\"img\");\r\n      if (crossOrigin) {\r\n        img.crossOrigin = crossOrigin;\r\n      }\r\n      img.onload = (function(_this) {\r\n        return function() {\r\n          var loadExif;\r\n          loadExif = function(callback) {\r\n            return callback(1);\r\n          };\r\n          if ((typeof EXIF !== \"undefined\" && EXIF !== null) && fixOrientation) {\r\n            loadExif = function(callback) {\r\n              return EXIF.getData(img, function() {\r\n                return callback(EXIF.getTag(this, 'Orientation'));\r\n              });\r\n            };\r\n          }\r\n          return loadExif(function(orientation) {\r\n            var canvas, ctx, ref, ref1, ref2, ref3, resizeInfo, thumbnail;\r\n            file.width = img.width;\r\n            file.height = img.height;\r\n            resizeInfo = _this.options.resize.call(_this, file, width, height, resizeMethod);\r\n            canvas = document.createElement(\"canvas\");\r\n            ctx = canvas.getContext(\"2d\");\r\n            canvas.width = resizeInfo.trgWidth;\r\n            canvas.height = resizeInfo.trgHeight;\r\n            if (orientation > 4) {\r\n              canvas.width = resizeInfo.trgHeight;\r\n              canvas.height = resizeInfo.trgWidth;\r\n            }\r\n            switch (orientation) {\r\n              case 2:\r\n                ctx.translate(canvas.width, 0);\r\n                ctx.scale(-1, 1);\r\n                break;\r\n              case 3:\r\n                ctx.translate(canvas.width, canvas.height);\r\n                ctx.rotate(Math.PI);\r\n                break;\r\n              case 4:\r\n                ctx.translate(0, canvas.height);\r\n                ctx.scale(1, -1);\r\n                break;\r\n              case 5:\r\n                ctx.rotate(0.5 * Math.PI);\r\n                ctx.scale(1, -1);\r\n                break;\r\n              case 6:\r\n                ctx.rotate(0.5 * Math.PI);\r\n                ctx.translate(0, -canvas.height);\r\n                break;\r\n              case 7:\r\n                ctx.rotate(0.5 * Math.PI);\r\n                ctx.translate(canvas.width, -canvas.height);\r\n                ctx.scale(-1, 1);\r\n                break;\r\n              case 8:\r\n                ctx.rotate(-0.5 * Math.PI);\r\n                ctx.translate(-canvas.width, 0);\r\n            }\r\n            drawImageIOSFix(ctx, img, (ref = resizeInfo.srcX) != null ? ref : 0, (ref1 = resizeInfo.srcY) != null ? ref1 : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, (ref2 = resizeInfo.trgX) != null ? ref2 : 0, (ref3 = resizeInfo.trgY) != null ? ref3 : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\r\n            thumbnail = canvas.toDataURL(\"image/png\");\r\n            if (callback != null) {\r\n              return callback(thumbnail, canvas);\r\n            }\r\n          });\r\n        };\r\n      })(this);\r\n      if (callback != null) {\r\n        img.onerror = callback;\r\n      }\r\n      return img.src = file.dataURL;\r\n    };\r\n\r\n    Dropzone.prototype.processQueue = function() {\r\n      var i, parallelUploads, processingLength, queuedFiles;\r\n      parallelUploads = this.options.parallelUploads;\r\n      processingLength = this.getUploadingFiles().length;\r\n      i = processingLength;\r\n      if (processingLength >= parallelUploads) {\r\n        return;\r\n      }\r\n      queuedFiles = this.getQueuedFiles();\r\n      if (!(queuedFiles.length > 0)) {\r\n        return;\r\n      }\r\n      if (this.options.uploadMultiple) {\r\n        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\r\n      } else {\r\n        while (i < parallelUploads) {\r\n          if (!queuedFiles.length) {\r\n            return;\r\n          }\r\n          this.processFile(queuedFiles.shift());\r\n          i++;\r\n        }\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype.processFile = function(file) {\r\n      return this.processFiles([file]);\r\n    };\r\n\r\n    Dropzone.prototype.processFiles = function(files) {\r\n      var file, j, len;\r\n      for (j = 0, len = files.length; j < len; j++) {\r\n        file = files[j];\r\n        file.processing = true;\r\n        file.status = Dropzone.UPLOADING;\r\n        this.emit(\"processing\", file);\r\n      }\r\n      if (this.options.uploadMultiple) {\r\n        this.emit(\"processingmultiple\", files);\r\n      }\r\n      return this.uploadFiles(files);\r\n    };\r\n\r\n    Dropzone.prototype._getFilesWithXhr = function(xhr) {\r\n      var file, files;\r\n      return files = (function() {\r\n        var j, len, ref, results;\r\n        ref = this.files;\r\n        results = [];\r\n        for (j = 0, len = ref.length; j < len; j++) {\r\n          file = ref[j];\r\n          if (file.xhr === xhr) {\r\n            results.push(file);\r\n          }\r\n        }\r\n        return results;\r\n      }).call(this);\r\n    };\r\n\r\n    Dropzone.prototype.cancelUpload = function(file) {\r\n      var groupedFile, groupedFiles, j, k, len, len1, ref;\r\n      if (file.status === Dropzone.UPLOADING) {\r\n        groupedFiles = this._getFilesWithXhr(file.xhr);\r\n        for (j = 0, len = groupedFiles.length; j < len; j++) {\r\n          groupedFile = groupedFiles[j];\r\n          groupedFile.status = Dropzone.CANCELED;\r\n        }\r\n        file.xhr.abort();\r\n        for (k = 0, len1 = groupedFiles.length; k < len1; k++) {\r\n          groupedFile = groupedFiles[k];\r\n          this.emit(\"canceled\", groupedFile);\r\n        }\r\n        if (this.options.uploadMultiple) {\r\n          this.emit(\"canceledmultiple\", groupedFiles);\r\n        }\r\n      } else if ((ref = file.status) === Dropzone.ADDED || ref === Dropzone.QUEUED) {\r\n        file.status = Dropzone.CANCELED;\r\n        this.emit(\"canceled\", file);\r\n        if (this.options.uploadMultiple) {\r\n          this.emit(\"canceledmultiple\", [file]);\r\n        }\r\n      }\r\n      if (this.options.autoProcessQueue) {\r\n        return this.processQueue();\r\n      }\r\n    };\r\n\r\n    resolveOption = function() {\r\n      var args, option;\r\n      option = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\r\n      if (typeof option === 'function') {\r\n        return option.apply(this, args);\r\n      }\r\n      return option;\r\n    };\r\n\r\n    Dropzone.prototype.uploadFile = function(file) {\r\n      return this.uploadFiles([file]);\r\n    };\r\n\r\n    Dropzone.prototype.uploadFiles = function(files) {\r\n      var doneCounter, doneFunction, file, formData, handleError, headerName, headerValue, headers, i, input, inputName, inputType, j, k, key, l, len, len1, len2, len3, m, method, o, option, progressObj, ref, ref1, ref2, ref3, ref4, ref5, response, results, updateProgress, url, value, xhr;\r\n      xhr = new XMLHttpRequest();\r\n      for (j = 0, len = files.length; j < len; j++) {\r\n        file = files[j];\r\n        file.xhr = xhr;\r\n      }\r\n      method = resolveOption(this.options.method, files);\r\n      url = resolveOption(this.options.url, files);\r\n      xhr.open(method, url, true);\r\n      xhr.timeout = resolveOption(this.options.timeout, files);\r\n      xhr.withCredentials = !!this.options.withCredentials;\r\n      response = null;\r\n      handleError = (function(_this) {\r\n        return function() {\r\n          var k, len1, results;\r\n          results = [];\r\n          for (k = 0, len1 = files.length; k < len1; k++) {\r\n            file = files[k];\r\n            results.push(_this._errorProcessing(files, response || _this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr));\r\n          }\r\n          return results;\r\n        };\r\n      })(this);\r\n      updateProgress = (function(_this) {\r\n        return function(e) {\r\n          var allFilesFinished, k, l, len1, len2, len3, m, progress, results;\r\n          if (e != null) {\r\n            progress = 100 * e.loaded / e.total;\r\n            for (k = 0, len1 = files.length; k < len1; k++) {\r\n              file = files[k];\r\n              file.upload = {\r\n                progress: progress,\r\n                total: e.total,\r\n                bytesSent: e.loaded\r\n              };\r\n            }\r\n          } else {\r\n            allFilesFinished = true;\r\n            progress = 100;\r\n            for (l = 0, len2 = files.length; l < len2; l++) {\r\n              file = files[l];\r\n              if (!(file.upload.progress === 100 && file.upload.bytesSent === file.upload.total)) {\r\n                allFilesFinished = false;\r\n              }\r\n              file.upload.progress = progress;\r\n              file.upload.bytesSent = file.upload.total;\r\n            }\r\n            if (allFilesFinished) {\r\n              return;\r\n            }\r\n          }\r\n          results = [];\r\n          for (m = 0, len3 = files.length; m < len3; m++) {\r\n            file = files[m];\r\n            results.push(_this.emit(\"uploadprogress\", file, progress, file.upload.bytesSent));\r\n          }\r\n          return results;\r\n        };\r\n      })(this);\r\n      xhr.onload = (function(_this) {\r\n        return function(e) {\r\n          var error1, ref;\r\n          if (files[0].status === Dropzone.CANCELED) {\r\n            return;\r\n          }\r\n          if (xhr.readyState !== 4) {\r\n            return;\r\n          }\r\n          response = xhr.responseText;\r\n          if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\r\n            try {\r\n              response = JSON.parse(response);\r\n            } catch (error1) {\r\n              e = error1;\r\n              response = \"Invalid JSON response from server.\";\r\n            }\r\n          }\r\n          updateProgress();\r\n          if (!((200 <= (ref = xhr.status) && ref < 300))) {\r\n            return handleError();\r\n          } else {\r\n            return _this._finished(files, response, e);\r\n          }\r\n        };\r\n      })(this);\r\n      xhr.onerror = (function(_this) {\r\n        return function() {\r\n          if (files[0].status === Dropzone.CANCELED) {\r\n            return;\r\n          }\r\n          return handleError();\r\n        };\r\n      })(this);\r\n      progressObj = (ref = xhr.upload) != null ? ref : xhr;\r\n      progressObj.onprogress = updateProgress;\r\n      headers = {\r\n        \"Accept\": \"application/json\",\r\n        \"Cache-Control\": \"no-cache\",\r\n        \"X-Requested-With\": \"XMLHttpRequest\"\r\n      };\r\n      if (this.options.headers) {\r\n        extend(headers, this.options.headers);\r\n      }\r\n      for (headerName in headers) {\r\n        headerValue = headers[headerName];\r\n        if (headerValue) {\r\n          xhr.setRequestHeader(headerName, headerValue);\r\n        }\r\n      }\r\n      formData = new FormData();\r\n      if (this.options.params) {\r\n        ref1 = this.options.params;\r\n        for (key in ref1) {\r\n          value = ref1[key];\r\n          formData.append(key, value);\r\n        }\r\n      }\r\n      for (k = 0, len1 = files.length; k < len1; k++) {\r\n        file = files[k];\r\n        this.emit(\"sending\", file, xhr, formData);\r\n      }\r\n      if (this.options.uploadMultiple) {\r\n        this.emit(\"sendingmultiple\", files, xhr, formData);\r\n      }\r\n      if (this.element.tagName === \"FORM\") {\r\n        ref2 = this.element.querySelectorAll(\"input, textarea, select, button\");\r\n        for (l = 0, len2 = ref2.length; l < len2; l++) {\r\n          input = ref2[l];\r\n          inputName = input.getAttribute(\"name\");\r\n          inputType = input.getAttribute(\"type\");\r\n          if (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\r\n            ref3 = input.options;\r\n            for (m = 0, len3 = ref3.length; m < len3; m++) {\r\n              option = ref3[m];\r\n              if (option.selected) {\r\n                formData.append(inputName, option.value);\r\n              }\r\n            }\r\n          } else if (!inputType || ((ref4 = inputType.toLowerCase()) !== \"checkbox\" && ref4 !== \"radio\") || input.checked) {\r\n            formData.append(inputName, input.value);\r\n          }\r\n        }\r\n      }\r\n      doneCounter = 0;\r\n      results = [];\r\n      for (i = o = 0, ref5 = files.length - 1; 0 <= ref5 ? o <= ref5 : o >= ref5; i = 0 <= ref5 ? ++o : --o) {\r\n        doneFunction = (function(_this) {\r\n          return function(file, paramName, fileName) {\r\n            return function(transformedFile) {\r\n              formData.append(paramName, transformedFile, fileName);\r\n              if (++doneCounter === files.length) {\r\n                return _this.submitRequest(xhr, formData, files);\r\n              }\r\n            };\r\n          };\r\n        })(this);\r\n        results.push(this.options.transformFile.call(this, files[i], doneFunction(files[i], this._getParamName(i), this._renameFilename(file.name, file))));\r\n      }\r\n      return results;\r\n    };\r\n\r\n    Dropzone.prototype.submitRequest = function(xhr, formData, files) {\r\n      return xhr.send(formData);\r\n    };\r\n\r\n    Dropzone.prototype._finished = function(files, responseText, e) {\r\n      var file, j, len;\r\n      for (j = 0, len = files.length; j < len; j++) {\r\n        file = files[j];\r\n        file.status = Dropzone.SUCCESS;\r\n        this.emit(\"success\", file, responseText, e);\r\n        this.emit(\"complete\", file);\r\n      }\r\n      if (this.options.uploadMultiple) {\r\n        this.emit(\"successmultiple\", files, responseText, e);\r\n        this.emit(\"completemultiple\", files);\r\n      }\r\n      if (this.options.autoProcessQueue) {\r\n        return this.processQueue();\r\n      }\r\n    };\r\n\r\n    Dropzone.prototype._errorProcessing = function(files, message, xhr) {\r\n      var file, j, len;\r\n      for (j = 0, len = files.length; j < len; j++) {\r\n        file = files[j];\r\n        file.status = Dropzone.ERROR;\r\n        this.emit(\"error\", file, message, xhr);\r\n        this.emit(\"complete\", file);\r\n      }\r\n      if (this.options.uploadMultiple) {\r\n        this.emit(\"errormultiple\", files, message, xhr);\r\n        this.emit(\"completemultiple\", files);\r\n      }\r\n      if (this.options.autoProcessQueue) {\r\n        return this.processQueue();\r\n      }\r\n    };\r\n\r\n    return Dropzone;\r\n\r\n  })(Emitter);\r\n\r\n  Dropzone.version = \"5.0.0\";\r\n\r\n  Dropzone.options = {};\r\n\r\n  Dropzone.optionsForElement = function(element) {\r\n    if (element.getAttribute(\"id\")) {\r\n      return Dropzone.options[camelize(element.getAttribute(\"id\"))];\r\n    } else {\r\n      return void 0;\r\n    }\r\n  };\r\n\r\n  Dropzone.instances = [];\r\n\r\n  Dropzone.forElement = function(element) {\r\n    if (typeof element === \"string\") {\r\n      element = document.querySelector(element);\r\n    }\r\n    if ((element != null ? element.dropzone : void 0) == null) {\r\n      throw new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\r\n    }\r\n    return element.dropzone;\r\n  };\r\n\r\n  Dropzone.autoDiscover = true;\r\n\r\n  Dropzone.discover = function() {\r\n    var checkElements, dropzone, dropzones, j, len, results;\r\n    if (document.querySelectorAll) {\r\n      dropzones = document.querySelectorAll(\".dropzone\");\r\n    } else {\r\n      dropzones = [];\r\n      checkElements = function(elements) {\r\n        var el, j, len, results;\r\n        results = [];\r\n        for (j = 0, len = elements.length; j < len; j++) {\r\n          el = elements[j];\r\n          if (/(^| )dropzone($| )/.test(el.className)) {\r\n            results.push(dropzones.push(el));\r\n          } else {\r\n            results.push(void 0);\r\n          }\r\n        }\r\n        return results;\r\n      };\r\n      checkElements(document.getElementsByTagName(\"div\"));\r\n      checkElements(document.getElementsByTagName(\"form\"));\r\n    }\r\n    results = [];\r\n    for (j = 0, len = dropzones.length; j < len; j++) {\r\n      dropzone = dropzones[j];\r\n      if (Dropzone.optionsForElement(dropzone) !== false) {\r\n        results.push(new Dropzone(dropzone));\r\n      } else {\r\n        results.push(void 0);\r\n      }\r\n    }\r\n    return results;\r\n  };\r\n\r\n  Dropzone.blacklistedBrowsers = [/opera.*Macintosh.*version\\/12/i];\r\n\r\n  Dropzone.isBrowserSupported = function() {\r\n    var capableBrowser, j, len, ref, regex;\r\n    capableBrowser = true;\r\n    if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\r\n      if (!(\"classList\" in document.createElement(\"a\"))) {\r\n        capableBrowser = false;\r\n      } else {\r\n        ref = Dropzone.blacklistedBrowsers;\r\n        for (j = 0, len = ref.length; j < len; j++) {\r\n          regex = ref[j];\r\n          if (regex.test(navigator.userAgent)) {\r\n            capableBrowser = false;\r\n            continue;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      capableBrowser = false;\r\n    }\r\n    return capableBrowser;\r\n  };\r\n\r\n  Dropzone.dataURItoBlob = function(dataURI) {\r\n    var ab, byteString, i, ia, j, mimeString, ref;\r\n    byteString = atob(dataURI.split(',')[1]);\r\n    mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n    ab = new ArrayBuffer(byteString.length);\r\n    ia = new Uint8Array(ab);\r\n    for (i = j = 0, ref = byteString.length; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {\r\n      ia[i] = byteString.charCodeAt(i);\r\n    }\r\n    return new Blob([ab], {\r\n      type: mimeString\r\n    });\r\n  };\r\n\r\n  without = function(list, rejectedItem) {\r\n    var item, j, len, results;\r\n    results = [];\r\n    for (j = 0, len = list.length; j < len; j++) {\r\n      item = list[j];\r\n      if (item !== rejectedItem) {\r\n        results.push(item);\r\n      }\r\n    }\r\n    return results;\r\n  };\r\n\r\n  camelize = function(str) {\r\n    return str.replace(/[\\-_](\\w)/g, function(match) {\r\n      return match.charAt(1).toUpperCase();\r\n    });\r\n  };\r\n\r\n  Dropzone.createElement = function(string) {\r\n    var div;\r\n    div = document.createElement(\"div\");\r\n    div.innerHTML = string;\r\n    return div.childNodes[0];\r\n  };\r\n\r\n  Dropzone.elementInside = function(element, container) {\r\n    if (element === container) {\r\n      return true;\r\n    }\r\n    while (element = element.parentNode) {\r\n      if (element === container) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  Dropzone.getElement = function(el, name) {\r\n    var element;\r\n    if (typeof el === \"string\") {\r\n      element = document.querySelector(el);\r\n    } else if (el.nodeType != null) {\r\n      element = el;\r\n    }\r\n    if (element == null) {\r\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector or a plain HTML element.\");\r\n    }\r\n    return element;\r\n  };\r\n\r\n  Dropzone.getElements = function(els, name) {\r\n    var e, el, elements, error1, j, k, len, len1, ref;\r\n    if (els instanceof Array) {\r\n      elements = [];\r\n      try {\r\n        for (j = 0, len = els.length; j < len; j++) {\r\n          el = els[j];\r\n          elements.push(this.getElement(el, name));\r\n        }\r\n      } catch (error1) {\r\n        e = error1;\r\n        elements = null;\r\n      }\r\n    } else if (typeof els === \"string\") {\r\n      elements = [];\r\n      ref = document.querySelectorAll(els);\r\n      for (k = 0, len1 = ref.length; k < len1; k++) {\r\n        el = ref[k];\r\n        elements.push(el);\r\n      }\r\n    } else if (els.nodeType != null) {\r\n      elements = [els];\r\n    }\r\n    if (!((elements != null) && elements.length)) {\r\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\");\r\n    }\r\n    return elements;\r\n  };\r\n\r\n  Dropzone.confirm = function(question, accepted, rejected) {\r\n    if (window.confirm(question)) {\r\n      return accepted();\r\n    } else if (rejected != null) {\r\n      return rejected();\r\n    }\r\n  };\r\n\r\n  Dropzone.isValidFile = function(file, acceptedFiles) {\r\n    var baseMimeType, j, len, mimeType, validType;\r\n    if (!acceptedFiles) {\r\n      return true;\r\n    }\r\n    acceptedFiles = acceptedFiles.split(\",\");\r\n    mimeType = file.type;\r\n    baseMimeType = mimeType.replace(/\\/.*$/, \"\");\r\n    for (j = 0, len = acceptedFiles.length; j < len; j++) {\r\n      validType = acceptedFiles[j];\r\n      validType = validType.trim();\r\n      if (validType.charAt(0) === \".\") {\r\n        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\r\n          return true;\r\n        }\r\n      } else if (/\\/\\*$/.test(validType)) {\r\n        if (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\r\n          return true;\r\n        }\r\n      } else {\r\n        if (mimeType === validType) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  if (typeof jQuery !== \"undefined\" && jQuery !== null) {\r\n    jQuery.fn.dropzone = function(options) {\r\n      return this.each(function() {\r\n        return new Dropzone(this, options);\r\n      });\r\n    };\r\n  }\r\n\r\n  if (typeof module !== \"undefined\" && module !== null) {\r\n    module.exports = Dropzone;\r\n  } else {\r\n    window.Dropzone = Dropzone;\r\n  }\r\n\r\n  Dropzone.ADDED = \"added\";\r\n\r\n  Dropzone.QUEUED = \"queued\";\r\n\r\n  Dropzone.ACCEPTED = Dropzone.QUEUED;\r\n\r\n  Dropzone.UPLOADING = \"uploading\";\r\n\r\n  Dropzone.PROCESSING = Dropzone.UPLOADING;\r\n\r\n  Dropzone.CANCELED = \"canceled\";\r\n\r\n  Dropzone.ERROR = \"error\";\r\n\r\n  Dropzone.SUCCESS = \"success\";\r\n\r\n\r\n  /*\r\n  \r\n  Bugfix for iOS 6 and 7\r\n  Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\r\n  based on the work of https://github.com/stomita/ios-imagefile-megapixel\r\n   */\r\n\r\n  detectVerticalSquash = function(img) {\r\n    var alpha, canvas, ctx, data, ey, ih, iw, py, ratio, sy;\r\n    iw = img.naturalWidth;\r\n    ih = img.naturalHeight;\r\n    canvas = document.createElement(\"canvas\");\r\n    canvas.width = 1;\r\n    canvas.height = ih;\r\n    ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(img, 0, 0);\r\n    data = ctx.getImageData(1, 0, 1, ih).data;\r\n    sy = 0;\r\n    ey = ih;\r\n    py = ih;\r\n    while (py > sy) {\r\n      alpha = data[(py - 1) * 4 + 3];\r\n      if (alpha === 0) {\r\n        ey = py;\r\n      } else {\r\n        sy = py;\r\n      }\r\n      py = (ey + sy) >> 1;\r\n    }\r\n    ratio = py / ih;\r\n    if (ratio === 0) {\r\n      return 1;\r\n    } else {\r\n      return ratio;\r\n    }\r\n  };\r\n\r\n  drawImageIOSFix = function(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\r\n    var vertSquashRatio;\r\n    vertSquashRatio = detectVerticalSquash(img);\r\n    return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\r\n  };\r\n\r\n  ExifRestore = (function() {\r\n    function ExifRestore() {}\r\n\r\n    ExifRestore.KEY_STR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n\r\n    ExifRestore.encode64 = function(input) {\r\n      var chr1, chr2, chr3, enc1, enc2, enc3, enc4, i, output;\r\n      output = '';\r\n      chr1 = void 0;\r\n      chr2 = void 0;\r\n      chr3 = '';\r\n      enc1 = void 0;\r\n      enc2 = void 0;\r\n      enc3 = void 0;\r\n      enc4 = '';\r\n      i = 0;\r\n      while (true) {\r\n        chr1 = input[i++];\r\n        chr2 = input[i++];\r\n        chr3 = input[i++];\r\n        enc1 = chr1 >> 2;\r\n        enc2 = (chr1 & 3) << 4 | chr2 >> 4;\r\n        enc3 = (chr2 & 15) << 2 | chr3 >> 6;\r\n        enc4 = chr3 & 63;\r\n        if (isNaN(chr2)) {\r\n          enc3 = enc4 = 64;\r\n        } else if (isNaN(chr3)) {\r\n          enc4 = 64;\r\n        }\r\n        output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\r\n        chr1 = chr2 = chr3 = '';\r\n        enc1 = enc2 = enc3 = enc4 = '';\r\n        if (!(i < input.length)) {\r\n          break;\r\n        }\r\n      }\r\n      return output;\r\n    };\r\n\r\n    ExifRestore.restore = function(origFileBase64, resizedFileBase64) {\r\n      var image, rawImage, segments;\r\n      if (!origFileBase64.match('data:image/jpeg;base64,')) {\r\n        return resizedFileBase64;\r\n      }\r\n      rawImage = this.decode64(origFileBase64.replace('data:image/jpeg;base64,', ''));\r\n      segments = this.slice2Segments(rawImage);\r\n      image = this.exifManipulation(resizedFileBase64, segments);\r\n      return 'data:image/jpeg;base64,' + this.encode64(image);\r\n    };\r\n\r\n    ExifRestore.exifManipulation = function(resizedFileBase64, segments) {\r\n      var aBuffer, exifArray, newImageArray;\r\n      exifArray = this.getExifArray(segments);\r\n      newImageArray = this.insertExif(resizedFileBase64, exifArray);\r\n      aBuffer = new Uint8Array(newImageArray);\r\n      return aBuffer;\r\n    };\r\n\r\n    ExifRestore.getExifArray = function(segments) {\r\n      var seg, x;\r\n      seg = void 0;\r\n      x = 0;\r\n      while (x < segments.length) {\r\n        seg = segments[x];\r\n        if (seg[0] === 255 & seg[1] === 225) {\r\n          return seg;\r\n        }\r\n        x++;\r\n      }\r\n      return [];\r\n    };\r\n\r\n    ExifRestore.insertExif = function(resizedFileBase64, exifArray) {\r\n      var array, ato, buf, imageData, mae, separatePoint;\r\n      imageData = resizedFileBase64.replace('data:image/jpeg;base64,', '');\r\n      buf = this.decode64(imageData);\r\n      separatePoint = buf.indexOf(255, 3);\r\n      mae = buf.slice(0, separatePoint);\r\n      ato = buf.slice(separatePoint);\r\n      array = mae;\r\n      array = array.concat(exifArray);\r\n      array = array.concat(ato);\r\n      return array;\r\n    };\r\n\r\n    ExifRestore.slice2Segments = function(rawImageArray) {\r\n      var endPoint, head, length, seg, segments;\r\n      head = 0;\r\n      segments = [];\r\n      while (true) {\r\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 218) {\r\n          break;\r\n        }\r\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 216) {\r\n          head += 2;\r\n        } else {\r\n          length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3];\r\n          endPoint = head + length + 2;\r\n          seg = rawImageArray.slice(head, endPoint);\r\n          segments.push(seg);\r\n          head = endPoint;\r\n        }\r\n        if (head > rawImageArray.length) {\r\n          break;\r\n        }\r\n      }\r\n      return segments;\r\n    };\r\n\r\n    ExifRestore.decode64 = function(input) {\r\n      var base64test, buf, chr1, chr2, chr3, enc1, enc2, enc3, enc4, i, output;\r\n      output = '';\r\n      chr1 = void 0;\r\n      chr2 = void 0;\r\n      chr3 = '';\r\n      enc1 = void 0;\r\n      enc2 = void 0;\r\n      enc3 = void 0;\r\n      enc4 = '';\r\n      i = 0;\r\n      buf = [];\r\n      base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\r\n      if (base64test.exec(input)) {\r\n        console.warning('There were invalid base64 characters in the input text.\\n' + 'Valid base64 characters are A-Z, a-z, 0-9, \\'+\\', \\'/\\',and \\'=\\'\\n' + 'Expect errors in decoding.');\r\n      }\r\n      input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\r\n      while (true) {\r\n        enc1 = this.KEY_STR.indexOf(input.charAt(i++));\r\n        enc2 = this.KEY_STR.indexOf(input.charAt(i++));\r\n        enc3 = this.KEY_STR.indexOf(input.charAt(i++));\r\n        enc4 = this.KEY_STR.indexOf(input.charAt(i++));\r\n        chr1 = enc1 << 2 | enc2 >> 4;\r\n        chr2 = (enc2 & 15) << 4 | enc3 >> 2;\r\n        chr3 = (enc3 & 3) << 6 | enc4;\r\n        buf.push(chr1);\r\n        if (enc3 !== 64) {\r\n          buf.push(chr2);\r\n        }\r\n        if (enc4 !== 64) {\r\n          buf.push(chr3);\r\n        }\r\n        chr1 = chr2 = chr3 = '';\r\n        enc1 = enc2 = enc3 = enc4 = '';\r\n        if (!(i < input.length)) {\r\n          break;\r\n        }\r\n      }\r\n      return buf;\r\n    };\r\n\r\n    return ExifRestore;\r\n\r\n  })();\r\n\r\n\r\n  /*\r\n   * contentloaded.js\r\n   *\r\n   * Author: Diego Perini (diego.perini at gmail.com)\r\n   * Summary: cross-browser wrapper for DOMContentLoaded\r\n   * Updated: 20101020\r\n   * License: MIT\r\n   * Version: 1.2\r\n   *\r\n   * URL:\r\n   * http://javascript.nwbox.com/ContentLoaded/\r\n   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\r\n   */\r\n\r\n  contentLoaded = function(win, fn) {\r\n    var add, doc, done, init, poll, pre, rem, root, top;\r\n    done = false;\r\n    top = true;\r\n    doc = win.document;\r\n    root = doc.documentElement;\r\n    add = (doc.addEventListener ? \"addEventListener\" : \"attachEvent\");\r\n    rem = (doc.addEventListener ? \"removeEventListener\" : \"detachEvent\");\r\n    pre = (doc.addEventListener ? \"\" : \"on\");\r\n    init = function(e) {\r\n      if (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\r\n        return;\r\n      }\r\n      (e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\r\n      if (!done && (done = true)) {\r\n        return fn.call(win, e.type || e);\r\n      }\r\n    };\r\n    poll = function() {\r\n      var e, error1;\r\n      try {\r\n        root.doScroll(\"left\");\r\n      } catch (error1) {\r\n        e = error1;\r\n        setTimeout(poll, 50);\r\n        return;\r\n      }\r\n      return init(\"poll\");\r\n    };\r\n    if (doc.readyState !== \"complete\") {\r\n      if (doc.createEventObject && root.doScroll) {\r\n        try {\r\n          top = !win.frameElement;\r\n        } catch (undefined) {}\r\n        if (top) {\r\n          poll();\r\n        }\r\n      }\r\n      doc[add](pre + \"DOMContentLoaded\", init, false);\r\n      doc[add](pre + \"readystatechange\", init, false);\r\n      return win[add](pre + \"load\", init, false);\r\n    }\r\n  };\r\n\r\n  Dropzone._autoDiscoverFunction = function() {\r\n    if (Dropzone.autoDiscover) {\r\n      return Dropzone.discover();\r\n    }\r\n  };\r\n\r\n  contentLoaded(window, Dropzone._autoDiscoverFunction);\r\n\r\n}).call(this);\r\n"]}