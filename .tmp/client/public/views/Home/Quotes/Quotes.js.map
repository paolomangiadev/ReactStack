{"version":3,"sources":["views/Home/Quotes/Quotes.js"],"names":["quote","isMounted","Quotes","props","state","self","timestart","setTimeout","console","log","poll","_timer","setInterval","bind","str","element","document","createElement","innerHTML","textContent","get","Date","getTime","then","response","data","content","decodeEntities","title","length","setState","catch","error","startPolling","clearInterval"],"mappings":"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","file":"Quotes.js","sourcesContent":["import React, { Component } from 'react';\r\nimport css from './Quotes.css';\r\nimport axios from 'axios';\r\nimport ReactHtmlParser from 'react-html-parser';\r\nimport _ from 'lodash';\r\n\r\nlet quote = {};\r\nlet isMounted = false;\n\r\nclass Quotes extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      quote: quote\r\n    }\r\n  }\r\n\r\n  startPolling () {\r\n    var self = this;\r\n    this.timestart = setTimeout(function() {\r\n      console.log('isMounted: ' + isMounted);\r\n      if (!isMounted) { return; } // abandon\r\n      self.poll(); // do it once and then start it up ...\r\n      self._timer = setInterval(self.poll.bind(self), 13000);\r\n    }, 10);\r\n  }\r\n\r\n  decodeEntities(str) {\r\n  // this prevents any overhead from creating the object each time\r\n    var element = document.createElement('div');\r\n    if(str && typeof str === 'string') {\r\n      // strip script/html tags\r\n      element.innerHTML = str;\r\n      str = element.textContent;\r\n      element.textContent = '';\r\n    }\r\n    return str;\r\n  }\r\n\r\n  poll () {\r\n    var self = this;\r\n    axios.get('http://quotesondesign.com/wp-json/posts?filter[orderby]=rand&callback=' + new Date().getTime())\r\n    .then((response) => {\r\n      var data = response.data[0];\r\n      data.content = this.decodeEntities(response.data[0].content);\r\n      data.title = this.decodeEntities(response.data[0].title);\r\n      if (data.content.length < 200) {\r\n        this.setState({quote: data});\r\n      }\r\n      else {\r\n        console.log('too long');\r\n        this.poll();\r\n      }\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.startPolling();\r\n    isMounted = true;\r\n  }\r\n  componentWillUnmount(){\r\n    isMounted = false;\r\n    clearInterval(this._timer)\r\n    this._timer = false;\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div id=\"fourth\" className=\"is-fullwidth is-quotes\" onClick={this.poll.bind(this)}>\r\n        <section className=\"hero is-fullheight quotes\">\r\n          <div className=\"hero-body\">\r\n            <div data-wow-duration=\"0.7s\" className=\"wow fadeIn container has-text-centered\">\r\n              <h1 className=\"title\">\r\n                Quotes We Love\r\n              </h1>\r\n              <div className=\"quotes_container\">\r\n                <div className=\"quote_text\">\r\n                  <p>{ ReactHtmlParser(this.state.quote.content) } </p>\r\n                </div>\r\n                <span className=\"quote_author\">\r\n                  - {this.state.quote.title} -\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"apiby\">\r\n            <span className=\"white\">API by </span>\r\n            <a href=\"https://quotesondesign.com\" target=\"_blank\" className=\"blue\">\r\n              quotesondesign.com\r\n            </a>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Quotes;\r\n"]}